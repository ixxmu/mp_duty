---
title: "单细胞上游分析/cellranger流程学习(一）"
date: 2025-02-12T12:26:59Z
draft: ["false"]
tags: [
  "fetched",
  "生信方舟"
]
categories: ["Acdemic"]
---
单细胞上游分析/cellranger流程学习(一） by 生信方舟
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><p data-tool="mdnice编辑器"><span leaf="">这次来学习一下单细胞数据的上游分析，本次主要集中在环境部署、软件安装和数据下载这三个方面。</span></p><h4 data-tool="mdnice编辑器"><span></span><span leaf="">分析流程</span><span></span></h4><h5 data-tool="mdnice编辑器"><span></span><span leaf="">1.环境部署/软件安装：</span><span></span></h5><p data-tool="mdnice编辑器"><span leaf="">清华镜像</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf=""># 设置镜像</span></span><span leaf=""><br></span><span leaf="">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><span leaf=""><br></span><span leaf="">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span><span leaf=""><br></span><span leaf="">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda/</span><span leaf=""><br></span><span leaf="">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</span><span leaf=""><br></span><span leaf="">conda config --set show_channel_urls yes</span><span leaf=""><br></span></code></pre><p data-tool="mdnice编辑器"><span leaf="">创建环境</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda create -n scRNA python=</span><span><span leaf="">3.9</span></span><span leaf=""><br></span><span leaf="">conda activate scRNA</span><span leaf=""><br></span></code></pre><p data-tool="mdnice编辑器"><span leaf="">安装sra-tools软件</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf=""># conda install -c bioconda sra-tools</span></span><span leaf=""><br></span><span><span leaf=""># -c是选择默认镜像 可能会存在减慢网速的问题</span></span><span leaf=""><br></span><span><span leaf=""># 这里的bioconda是一个特定的软件库</span></span><span leaf=""><br></span><span><span leaf=""># bioconda 可以理解为是一个软件库，-c  bioconda 意思是优先从bioconda库来检索适配的软件</span></span><span leaf=""><br></span><span><span leaf=""># 一般是-c 参数才需要指定特定的库，你没有加 -c参数，  更不需要加bioconda 了 </span></span><span leaf=""><br></span><span leaf="">conda install sra-tools</span><span leaf=""><br></span></code></pre><p data-tool="mdnice编辑器"><span leaf="">安装cellranger<img data-imgfileid="100003998" data-ratio="0.5018518518518519" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfmpiaxnrpG7XVsQ3aEESfIISRq78ctrcbXq7zDH0nKW3pZszjFe7epVQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfmpiaxnrpG7XVsQ3aEESfIISRq78ctrcbXq7zDH0nKW3pZszjFe7epVQ/640?wx_fmt=png&amp;from=appmsg"></span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf=""># 在10X官网上下载这个软件</span></span><span leaf=""><br></span><span><span leaf=""># 下载代码就在网页上有</span></span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf=""># 在相应的文件夹中解压缩</span></span><span leaf=""><br></span><span leaf="">cd ./biosoft</span><span leaf=""><br></span><span leaf="">tar -xzvf cellranger-</span><span><span leaf="">9.0</span></span><span><span leaf="">.0</span></span><span leaf="">.tar.gz </span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf=""># 在linux或者终端中安装好了之后导入到环境中</span></span><span leaf=""><br></span><span><span leaf=""># 检查bin中是否存在cellranger</span></span><span leaf=""><br></span><span leaf="">ls /home/data/t200558/biosoft/cellranger-</span><span><span leaf="">9.0</span></span><span><span leaf="">.0</span></span><span leaf="">/bin</span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf=""># 临时添加到PATH</span></span><span leaf=""><br></span><span leaf="">export PATH=/home/data/t200558/biosoft/cellranger-</span><span><span leaf="">9.0</span></span><span><span leaf="">.0</span></span><span leaf="">/bin:$PATH</span><span leaf=""><br></span><span><span leaf=""># which函数确认是否添加成功</span></span><span leaf=""><br></span><span leaf="">which cellranger</span><span leaf=""><br></span></code></pre><p data-tool="mdnice编辑器"><span leaf="">单独设定一个biosoft文件夹保存下载的软件<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfEgL3Ehsf3MpzfoSVlibCasg1Od1ibLshKKcc6sCxvmaBQiaVarjRoUCZw/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.1875" data-type="png" data-w="880" data-imgfileid="100003996" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfEgL3Ehsf3MpzfoSVlibCasg1Od1ibLshKKcc6sCxvmaBQiaVarjRoUCZw/640?wx_fmt=png&amp;from=appmsg">临时添加到PATH, which函数确认是否添加成功<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfLzkLvjVOo1QyEzJqtdr3IldLXZj5IwZHiabicCiazS7XkqYhIdxjNic98g/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.07679738562091504" data-type="png" data-w="612" data-imgfileid="100003994" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfLzkLvjVOo1QyEzJqtdr3IldLXZj5IwZHiabicCiazS7XkqYhIdxjNic98g/640?wx_fmt=png&amp;from=appmsg">下载人类参考基因组，其他物种同理，见10X官网</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">nohup wget </span><span><span leaf="">"https://cf.10xgenomics.com/supp/cell-exp/refdata-gex-GRCh38-2024-A.tar.gz"</span></span><span leaf=""> &gt; download.log </span><span><span leaf="">2</span></span><span leaf="">&gt;&amp;</span><span><span leaf="">1</span></span><span leaf=""> &amp;</span><span leaf=""><br></span></code></pre><p data-tool="mdnice编辑器"><span leaf="">单独设定一个biosoft文件夹保存下载的参考数据<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfrsuQzLS4KxoGyZfP07IRUzaSFkn3Y3gIUW4QC2iadL5y4lEo32PzLVw/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.12071778140293637" data-type="png" data-w="613" data-imgfileid="100003995" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfrsuQzLS4KxoGyZfP07IRUzaSFkn3Y3gIUW4QC2iadL5y4lEo32PzLVw/640?wx_fmt=png&amp;from=appmsg"></span></p><h5 data-tool="mdnice编辑器"><span></span><span leaf="">2.数据下载</span><span></span></h5><p data-tool="mdnice编辑器"><span leaf="">挑选了一个两样本的数据集：GSE150321<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfBNqHTel9Yx3vReB3aXAdXbVSSLl3sc89NKUKib8Bricib4ZuOiaYNN9r4A/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.5068119891008175" data-type="png" data-w="734" data-imgfileid="100003997" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfBNqHTel9Yx3vReB3aXAdXbVSSLl3sc89NKUKib8Bricib4ZuOiaYNN9r4A/640?wx_fmt=png&amp;from=appmsg"></span></p><h5 data-tool="mdnice编辑器"><span></span><span leaf="">方法一：直接下载</span><span></span></h5><p data-tool="mdnice编辑器"><span leaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfAwRoL33ushlHu8WRvzEQnuOTaptXXGMmFsP2o0FSHlFv7crqxtbPSQ/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.2490740740740741" data-type="png" data-w="1080" data-imgfileid="100004001" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfAwRoL33ushlHu8WRvzEQnuOTaptXXGMmFsP2o0FSHlFv7crqxtbPSQ/640?wx_fmt=png&amp;from=appmsg">复制SRA Normalized链接即可<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfnWoC9epOQDOVdZaAwSYIJaBUowgLpVjibQnURKmeCAraJgia5AOdXNOQ/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.2657407407407407" data-type="png" data-w="1080" data-imgfileid="100004003" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfnWoC9epOQDOVdZaAwSYIJaBUowgLpVjibQnURKmeCAraJgia5AOdXNOQ/640?wx_fmt=png&amp;from=appmsg"></span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">nohup wget https://sra-pub-run-odp.s3.amazonaws.com/sra/SRR11666954/SRR11666954 &gt; download.log &gt; &amp;</span><span><span leaf="">1</span></span><span leaf=""> &amp;</span><span leaf=""><br></span><span leaf="">nohup wget https://sra-pub-run-odp.s3.amazonaws.com/sra/SRR11666955/SRR11666955 &gt; download.log &gt; &amp;</span><span><span leaf="">1</span></span><span leaf=""> &amp;</span><span leaf=""><br></span></code></pre><h5 data-tool="mdnice编辑器"><span></span><span leaf="">方法二：获得SRR_Acc_List.txt后下载</span><span></span></h5><p data-tool="mdnice编辑器"><span leaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfqt3VXbZaClCyxs15yVMpDAAzjpSDLyaia56wvov9sqja9htaND8t0TA/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.46111111111111114" data-type="png" data-w="1080" data-imgfileid="100004002" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfqt3VXbZaClCyxs15yVMpDAAzjpSDLyaia56wvov9sqja9htaND8t0TA/640?wx_fmt=png&amp;from=appmsg">可以得到一个Accession list<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfBsbVcsZliaiakuvc0adodA73iboxLYsROm1icP8Xd7HxTbIvDDXYdQt8PA/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.6550680786686838" data-type="png" data-w="661" data-imgfileid="100003999" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfBsbVcsZliaiakuvc0adodA73iboxLYsROm1icP8Xd7HxTbIvDDXYdQt8PA/640?wx_fmt=png&amp;from=appmsg"></span></p><h6 data-tool="mdnice编辑器"><span></span><span leaf="">1.使用 prefetch 下载</span><span></span></h6><p data-tool="mdnice编辑器"><span leaf="">prefetch 是 NCBI SRA 工具包提供的命令，用于从 SRA 数据库下载数据。该方法有三种不同的写法，适应不同场景：</span></p><ol><li><section><span leaf="">代码一 使用管道和 while read 遍历 SRR_Acc_List.txt 文件中的每个 SRR ID，依次调用 prefetch 下载数据，限制最大下载大小为 500G。</span></section></li><li><section><span leaf="">代码二 以相同的方式遍历文件，但是在每次下载完成后打印确认信息。</span></section></li><li><section><span leaf="">代码三 使用了 --option-file 选项，通过指定文件来批量下载，适合处理多个文件。</span></section></li></ol><p data-tool="mdnice编辑器"><span leaf="">这三种方法的区别在于如何指定下载的文件路径，以及是否打印下载状态。通常，prefetch 工具适用于从 SRA 服务器下载原始 .sra 文件，下载速度和稳定性受到 SRA 服务器带宽限制。</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf=""># 先需要cd到保存Accession list的文件夹</span></span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf="">## 代码一</span></span><span leaf=""><br></span><span leaf="">cat SRR_Acc_List.txt | </span><span><span leaf="">while</span></span><span leaf=""> read id; do prefetch --max-size 500G </span><span><span leaf="">"$id"</span></span><span leaf="">; done</span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf="">## 代码二</span></span><span leaf=""><br></span><span><span leaf="">## 遍历 SRR_Acc_List.txt 中的每一行，并下载每个 SRR 文件</span></span><span leaf=""><br></span><span leaf="">cat SRR_Acc_List.txt | </span><span><span leaf="">while</span></span><span leaf=""> read i</span><span leaf=""><br></span><span leaf="">do </span><span leaf=""><br></span><span leaf="">    prefetch $i --max-size 500G -O `pwd` &amp;&amp; echo </span><span><span leaf="">"** ${i}.sra done **"</span></span><span leaf=""><br></span><span leaf="">done</span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf="">## 代码三</span></span><span leaf=""><br></span><span><span leaf=""># 确认当前路径</span></span><span leaf=""><br></span><span leaf="">pwd </span><span leaf=""><br></span><span><span leaf=""># /home/data/t200558/downloads</span></span><span leaf=""><br></span><span leaf="">prefetch \</span><span leaf=""><br></span><span leaf=""> --option-file /home/data/t200558/downloads/SRR_Acc_List.txt \</span><span leaf=""><br></span><span leaf=""> -O /home/data/t200558/downloads/ \</span><span leaf=""><br></span><span leaf=""> --min-size </span><span><span leaf="">0</span></span><span leaf=""> --max-size 500GB</span><span leaf=""><br></span></code></pre><h6 data-tool="mdnice编辑器"><span></span><span leaf="">2.使用 kingfisher 下载</span><span></span></h6><p data-tool="mdnice编辑器"><span leaf="">kingfisher 是一个高效的工具，专门设计用于下载大规模的公共数据集（例如 SRA、ENA 等数据库）。它具有以下特点：</span></p><ol><li><section><span leaf="">多线程下载：支持指定下载线程数，能够提高下载速度。</span></section></li><li><section><span leaf="">数据验证：支持下载后自动校验文件的 MD5 值，确保数据完整性。</span></section></li><li><section><span leaf="">kingfisher 更加灵活，适合大规模数据下载任务。</span></section></li></ol><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf="">## kingfisher 下载方法</span></span><span leaf=""><br></span><span leaf="">kingfisher get --run-identifiers-list SRR_Acc_List.txt -m ena-ascp ena-ftp prefetch --download-threads </span><span><span leaf="">10</span></span><span leaf=""> --check-md5sums </span><span><span leaf="">1</span></span><span leaf="">&gt;down_srr_list.log </span><span><span leaf="">2</span></span><span leaf="">&gt;&amp;</span><span><span leaf="">1</span></span><span leaf=""><br></span><span><span leaf="">## tail -f down_srr_list.log</span></span><span leaf=""><br></span></code></pre><p data-tool="mdnice编辑器"><span leaf="">这个下载方式要是能够成功的话，其实挺方便的，一行代码解决问题。</span></p><h6 data-tool="mdnice编辑器"><span></span><span leaf="">方法三：从ENA网站中找到需要下载的数据集的信息后下载</span><span></span></h6><p data-tool="mdnice编辑器"><span leaf="">从ENA网站中找到需要下载的数据集的信息：https://www.ebi.ac.uk/ena/browser/view/PRJNA629880<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfhIIHQF8sSyAuoSp6x4gVZ08eibYicuu0EYAWFoDpnLz8Q3cb3kqMHujA/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.552738336713996" data-type="png" data-w="986" data-imgfileid="100004000" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfhIIHQF8sSyAuoSp6x4gVZ08eibYicuu0EYAWFoDpnLz8Q3cb3kqMHujA/640?wx_fmt=png&amp;from=appmsg">其中关键的一步是需要提取想要下载内容的链接<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVf8Zva4VGBMaWHMsW1Hyezrrt5s3NVzdpzn0xSuwGxzHKgUcBLckS6Bg/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.6546296296296297" data-type="png" data-w="1080" data-imgfileid="100004008" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVf8Zva4VGBMaWHMsW1Hyezrrt5s3NVzdpzn0xSuwGxzHKgUcBLckS6Bg/640?wx_fmt=png&amp;from=appmsg">其中第12列有我们所需要的fastq文件下载链接<img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfzSSDfMalGVITA0KJG77icGjicfZfEm9hTQJZ2LoKEvpwsNlOlKBHLImQ/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.10462962962962963" data-type="png" data-w="1080" data-imgfileid="100004007" src="https://mmbiz.qpic.cn/sz_mmbiz_png/0SOG4MpDAyEDW4EicwlHBdYeibLVuWzBVfzSSDfMalGVITA0KJG77icGjicfZfEm9hTQJZ2LoKEvpwsNlOlKBHLImQ/640?wx_fmt=png&amp;from=appmsg">因此我们就需要把这个信息提取出来并进行清洗</span></p><h6 data-tool="mdnice编辑器"><span></span><span leaf="">使用 ascp 下载</span><span></span></h6><p data-tool="mdnice编辑器"><span leaf="">ascp（Aspera Command Line）是一个高速数据传输工具，用于通过 Aspera 协议加速文件下载，通常用于处理大规模的数据传输。此方法的步骤如下：</span></p><ol><li><section><span leaf="">ascp 需要配置私钥文件，这个文件允许通过认证的方式安全地传输文件。</span></section></li><li><section><span leaf="">使用 ascp 命令来下载 SRR 文件，适合需要大文件传输时，ascp 在高速网络条件下提供比传统 FTP 下载更高的速度和稳定性。</span></section></li></ol><p data-tool="mdnice编辑器"><span leaf="">与 prefetch 相比，ascp 通常在需要加速传输大规模数据时更为有效。</span></p><p data-tool="mdnice编辑器"><strong><span leaf="">安装aspera</span></strong></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">wget http://download.asperasoft.com/download/sw/connect/</span><span><span leaf="">3.7</span></span><span><span leaf="">.4</span></span><span leaf="">/aspera-connect-</span><span><span leaf="">3.7</span></span><span><span leaf="">.4</span></span><span><span leaf="">.147727</span></span><span leaf="">-linux-</span><span><span leaf="">64.</span></span><span leaf="">tar.gz</span><span leaf=""><br></span><span leaf="">tar zxvf aspera-connect-</span><span><span leaf="">3.7</span></span><span><span leaf="">.4</span></span><span><span leaf="">.147727</span></span><span leaf="">-linux-</span><span><span leaf="">64.</span></span><span leaf="">tar.gz</span><span leaf=""><br></span><span><span leaf="">#安装</span></span><span leaf=""><br></span><span leaf="">bash aspera-connect-</span><span><span leaf="">3.7</span></span><span><span leaf="">.4</span></span><span><span leaf="">.147727</span></span><span leaf="">-linux-</span><span><span leaf="">64.</span></span><span leaf="">sh</span><span leaf=""><br></span><span><span leaf=""># 然后cd到根目录下看看是不是存在了.aspera文件夹，有的话表示安装成功</span></span><span leaf=""><br></span><span leaf="">cd &amp;&amp; ls -a</span><span leaf=""><br></span><span><span leaf=""># 将aspera软件加入环境变量，并激活</span></span><span leaf=""><br></span><span leaf="">echo </span><span><span leaf="">'export PATH=~/.aspera/connect/bin:$PATH'</span></span><span leaf=""> &gt;&gt; ~/.bashrc</span><span leaf=""><br></span><span><span leaf="">source</span></span><span leaf=""> ~/.bashrc</span><span leaf=""><br></span><span><span leaf=""># 最后检查ascp是不是能用了</span></span><span leaf=""><br></span><span leaf="">ascp --help</span><span leaf=""><br></span></code></pre><p data-tool="mdnice编辑器"><span leaf="">需要提醒的是，这里的路径是需要根据不同文件内容进行修改</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf="">##########ascp下载方式</span></span><span leaf=""><br></span><span><span leaf=""># 确定ascp私钥路径</span></span><span leaf=""><br></span><span leaf="">ls ~/.aspera/connect/etc/asperaweb_id_dsa.openssh</span><span leaf=""><br></span><span><span leaf=""># /home/data/t200558/.aspera/connect/etc/asperaweb_id_dsa.openssh</span></span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf=""># 提取 ASCP 路径并保存</span></span><span leaf=""><br></span><span><span leaf=""># 这个路径需要根据不同文件进行修改</span></span><span leaf=""><br></span><span leaf="">awk -</span><span><span leaf="">F</span></span><span><span leaf="">"\t"</span></span><span leaf=""> </span><span><span leaf="">'{print $12}'</span></span><span leaf=""> filereport_read_run_PRJNA629880_tsv.txt | grep -o </span><span><span leaf="">'fasp.*'</span></span><span leaf=""> | tr </span><span><span leaf="">';'</span></span><span leaf=""> </span><span><span leaf="">'\n'</span></span><span leaf=""> &gt; ascp_paths.txt</span><span leaf=""><br></span><span leaf=""><br></span><span><span leaf=""># 使用 ascp 下载 SRA 文件</span></span><span leaf=""><br></span><span leaf="">nohup bash -c </span><span><span leaf="">'cat ascp_paths.txt | while read id; do </span><span leaf=""><br></span><span leaf="">    ascp -QT -l 100m -P 33001 -i /home/data/t200558/.aspera/connect/etc/asperaweb_id_dsa.openssh era-fasp@${id} ./; </span><span leaf=""><br></span><span leaf="">done'</span></span><span leaf=""> &gt; download.log </span><span><span leaf="">2</span></span><span leaf="">&gt;&amp;</span><span><span leaf="">1</span></span><span leaf=""> &amp;</span><span leaf=""><br></span></code></pre><h4 data-tool="mdnice编辑器"><span></span><span leaf="">参考资料：</span><span></span></h4><ol><li><section><span leaf="">10xgenomics-cellranger：https://www.10xgenomics.com/support/software/cell-ranger/latest/tutorials/cr-tutorial-in</span></section></li><li><section><span leaf="">生信技能树：https://mp.weixin.qq.com/s/X1SYGr2zv-b7hSppNC_22Q https://mp.weixin.qq.com/s/X1SYGr2zv-b7hSppNC_22Q</span></section></li><li><section><span leaf="">生信菜鸟团：https://mp.weixin.qq.com/s/lvooimNKTQ8U9_2t2SuweQ https://mp.weixin.qq.com/s/AVqv07swFvjl6OCnLwwLPA</span></section></li></ol><p data-tool="mdnice编辑器"><strong><span leaf="">致谢</span></strong><span leaf="">：感谢曾老师，含盐量过高的鱼以及生信技能树团队全体成员。</span></p><p data-tool="mdnice编辑器"><strong><span leaf="">注</span></strong><span leaf="">：若对内容有疑惑或者有发现明确错误的朋友，请联系后台(欢迎交流)。更多相关内容可关注公众号：</span><strong><span leaf="">生信方舟</span></strong></p><span><span leaf="">- END -</span></span></section><section><span leaf=""><br></span></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/6l2jrb2jMzqgJp01-7yvlQ",target="_blank" rel="noopener noreferrer">原文链接</a>
