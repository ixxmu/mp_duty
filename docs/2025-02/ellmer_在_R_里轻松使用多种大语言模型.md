---
title: "ellmer：在 R 里轻松使用多种大语言模型"
date: 2025-02-02T12:31:27Z
draft: ["false"]
tags: [
  "fetched",
  "老俊俊的生信笔记"
]
categories: ["Acdemic"]
---
ellmer：在 R 里轻松使用多种大语言模型 by 老俊俊的生信笔记
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><section><mp-common-profile data-pluginname="mpprofile" data-id="MzkyMTI1MTYxNA==" data-headimg="http://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usezgsqIGqjITSMggCTSoViaYeoKe2xoZr1IIvNJoztibQxibYHLDDoiabwAc6Ggws3Tvdo8EPss2nLgaVQ/0?wx_fmt=png" data-nickname="老俊俊的生信笔记" data-alias="JunJunLab" data-signature="老俊俊的生信技能和知识分享,我不是巨人,但你可以站在我的肩膀上更进一步!" data-from="0" data-is_biz_ban="0" data-service_type="1"></mp-common-profile></section></section><section><mp-common-clmusic data-pluginname="insertaudio" type="1" music_name="%E8%AE%B0%E5%BE%97" albumurl="http://wx.y.gtimg.cn/music/photo_new/T002R500x500M000000TuW8h0AH2n4_3.jpg" singer="林俊杰" duration="287000" username="" music_source="1" is_vip="1" listenid="78236464831691737"></mp-common-clmusic></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h2 data-tool="mdnice编辑器"><span></span><span>引言</span><span></span></h2><blockquote data-tool="mdnice编辑器"><span>❝</span><p><strong>Hadley Wickham</strong> 大神最近新上线的 R 包，提供多种大语言模型，方便在 R 里进行使用。</p></blockquote><figure data-tool="mdnice编辑器"><img data-imgfileid="100033653" data-ratio="0.5039901780233272" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVggDnG0RM2cCqiadsb2s5sjSIEcQ0j2LsgZp333CRsHFYjau2exnKkuKA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1629" src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVggDnG0RM2cCqiadsb2s5sjSIEcQ0j2LsgZp333CRsHFYjau2exnKkuKA/640?wx_fmt=png&amp;from=appmsg"></figure><figure data-tool="mdnice编辑器"><img data-imgfileid="100033651" data-ratio="0.281767955801105" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgo2IN3L2PnmJkvr4PnCRaBFBWM9icAHHXAgfGMvqYpGicwur85bXbsCgw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1086" src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgo2IN3L2PnmJkvr4PnCRaBFBWM9icAHHXAgfGMvqYpGicwur85bXbsCgw/640?wx_fmt=png&amp;from=appmsg"></figure><p data-tool="mdnice编辑器"><strong>提供的模型：</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100033650" data-ratio="0.7380645161290322" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgcTnj0OQeDr2iboSZukQb2SYS4RzoRwRYxIXGlR41D75aUa0rMSrdu8g/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="775" src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgcTnj0OQeDr2iboSZukQb2SYS4RzoRwRYxIXGlR41D75aUa0rMSrdu8g/640?wx_fmt=png&amp;from=appmsg"></figure><p data-tool="mdnice编辑器"><strong>还推荐了 python 版本的：chatlas</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100033652" data-ratio="0.5396201702685003" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgZAWIsMnG85AoYZiaGYUSmNl0aI6Oj5ctXGCFl8Pm2LjrliaOKzic6S4Mg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1527" src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgZAWIsMnG85AoYZiaGYUSmNl0aI6Oj5ctXGCFl8Pm2LjrliaOKzic6S4Mg/640?wx_fmt=png&amp;from=appmsg"></figure><figure data-tool="mdnice编辑器"><img data-imgfileid="100033654" data-ratio="0.34470046082949307" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgUXOjktMyDSlDOkCbX0vMLnNmTmcicwdCBza3e3mEP6GEDJX5vvUwCCQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1085" src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgUXOjktMyDSlDOkCbX0vMLnNmTmcicwdCBza3e3mEP6GEDJX5vvUwCCQ/640?wx_fmt=png&amp;from=appmsg"></figure><h2 data-tool="mdnice编辑器"><span></span><span>安装</span><span></span></h2><pre data-tool="mdnice编辑器"><span></span><code>devtools::install_github(<span>"tidyverse/ellmer"</span>)<br><br><span>library</span>(ellmer)<br></code></pre><h2 data-tool="mdnice编辑器"><span></span><span>介绍</span><span></span></h2><p data-tool="mdnice编辑器">创建一个聊天对象（<strong>注意：使用对应的模型需要提供对应的 api</strong>）：</p><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(ellmer)<br><br>chat &lt;- chat_openai(<br>  model = <span>"gpt-4o-mini"</span>,<br>  system_prompt = <span>"You are a friendly but terse assistant."</span>,<br>)<br></code></pre><p data-tool="mdnice编辑器"><strong>交互式使用：</strong></p><pre data-tool="mdnice编辑器"><span></span><code>live_console(chat)<br><span>#&gt; ╔════════════════════════════════════════════════════════╗</span><br><span>#&gt; ║  Entering chat console. Use """ for multi-line input.  ║</span><br><span>#&gt; ║  Press Ctrl+C to quit.                                 ║</span><br><span>#&gt; ╚════════════════════════════════════════════════════════╝</span><br><span>#&gt; &gt;&gt;&gt; Who were the original creators of R?</span><br><span>#&gt; R was originally created by Ross Ihaka and Robert Gentleman at the University of</span><br><span>#&gt; Auckland, New Zealand.</span><br><span>#&gt;</span><br><span>#&gt; &gt;&gt;&gt; When was that?</span><br><span>#&gt; R was initially released in 1995. Development began a few years prior to that,</span><br><span>#&gt; in the early 1990s.</span><br></code></pre><p data-tool="mdnice编辑器"><strong>提取 chat 进行对话：</strong></p><pre data-tool="mdnice编辑器"><span></span><code>chat$chat(<span>"What preceding languages most influenced R?"</span>)<br><span>#&gt; R was primarily influenced by the S programming language, particularly S-PLUS.</span><br><span>#&gt; Other languages that had an impact include Scheme and various data analysis</span><br><span>#&gt; languages.</span><br></code></pre><p data-tool="mdnice编辑器"><strong>通过 content_image_file() 或者 content_image_url() 对图片进行对话：</strong></p><pre data-tool="mdnice编辑器"><span></span><code>chat$chat(<br>  content_image_url(<span>"https://www.r-project.org/Rlogo.png"</span>),<br>  <span>"Can you explain this logo?"</span><br>)<br><span>#&gt; The logo of R features a stylized letter "R" in blue, enclosed in an oval</span><br><span>#&gt; shape that resembles the letter "O," signifying the programming language's</span><br><span>#&gt; name. The design conveys a modern and professional look, reflecting its use</span><br><span>#&gt; in statistical computing and data analysis. The blue color often represents</span><br><span>#&gt; trust and reliability, which aligns with R's role in data science.</span><br></code></pre><p data-tool="mdnice编辑器"><strong>包装成函数：</strong></p><pre data-tool="mdnice编辑器"><span></span><code>my_function &lt;- <span>function</span>() {<br>  chat &lt;- chat_openai(<br>    model = <span>"gpt-4o-mini"</span>,<br>    system_prompt = <span>"You are a friendly but terse assistant."</span>,<br>  )<br>  chat$chat(<span>"Is R a functional programming language?"</span>)<br>}<br>my_function()<br><span>#&gt; [1] "Yes, R supports functional programming concepts. It allows functions to</span><br><span>#&gt; be first-class objects, supports higher-order functions, and encourages the</span><br><span>#&gt; use of functions as core components of code. However, it also supports</span><br><span>#&gt; procedural and object-oriented programming styles."</span><br></code></pre><h2 data-tool="mdnice编辑器"><span></span><span>结尾</span><span></span></h2><blockquote data-tool="mdnice编辑器"><span>❝</span><p><strong>路漫漫其修远兮,吾将上下而求索。</strong></p></blockquote><hr data-tool="mdnice编辑器"><p data-tool="mdnice编辑器">欢迎加入生信交流群。加我微信我也拉你进 <strong>微信群聊</strong> <strong>老俊俊生信交流群</strong> <strong>(微信交流群需收取 20 元入群费用,一旦交费,拒不退还!(防止骗子和便于管理))</strong> 。</p><figure data-tool="mdnice编辑器"><img data-imgfileid="100033659" data-ratio="0.6083707025411061" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgS3H13uXhRUjh49B6SfNl5ibP0SKMAxR3dx3NABaAQ0kbO4JqYgjrD9g/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="669" src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usewUHmeglOySZ0S6GUrvVkVgS3H13uXhRUjh49B6SfNl5ibP0SKMAxR3dx3NABaAQ0kbO4JqYgjrD9g/640?wx_fmt=png&amp;from=appmsg"></figure><hr data-tool="mdnice编辑器"><p data-tool="mdnice编辑器"><strong></strong></p><center data-tool="mdnice编辑器"><strong> 往期回顾目录 </strong></center><p data-tool="mdnice编辑器"><br></p><blockquote data-tool="mdnice编辑器"><span>❝</span><p><strong></strong></p><center><strong><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517289&amp;idx=1&amp;sn=9cd32447d157278f8a866650c4a7750f&amp;token=1692534674&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">shiny 版交互式大语言模型 shiny.ollama</a></strong></center><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517272&amp;idx=1&amp;sn=b1bb859171036c9b4c56d26c31744d4f&amp;token=1284293236&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">Nature Methods 2025 年 1 月 22 卷 第 1 期</a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517222&amp;idx=1&amp;sn=fb60eabb4419ec73721de60a4f3aa671&amp;token=2055540477&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">Cancer Cell 2025 年 1 月 13 日 第 43 卷 第 1 期</a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517172&amp;idx=1&amp;sn=ec1c752b8e2066bc5a7e0fb4444ef593&amp;token=2055540477&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">Science 2025 年 1 月 17 日 387 卷 第 6731 期</a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517118&amp;idx=1&amp;sn=94b1039b25d2ce21ba987d100b33a6e1&amp;token=2055540477&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">使用 python 来制作 shiny App</a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517077&amp;idx=1&amp;sn=e7511e7c9998ff660f3d796d654256a4&amp;token=838853934&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">Cell|Nature|Science 期刊10年封面一览</a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247516725&amp;idx=1&amp;sn=6026f2680d72958d8b7f79f6129835e7&amp;token=1176684326&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">Cell 2025 年 1 月 9 日 第 188 卷 第 1 期</a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247516695&amp;idx=1&amp;sn=7bc650f43e283de2d9b906fe743fba6a&amp;token=1176684326&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">单细胞格式转换工具一文掌握！</a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247516646&amp;idx=1&amp;sn=dfed6a0d382abbb7a568640cd7c0976a&amp;token=1176684326&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">snapATAC2 多样本整合及去批次效应</a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247516593&amp;idx=1&amp;sn=ee97613b6abefd0f422f4ac27a134dcf&amp;token=1364048330&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">CNS 科研高质量图形鉴赏（三）</a></center></strong><p><br></p></blockquote></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/VCvVSC8io52bP7E9TCHifw",target="_blank" rel="noopener noreferrer">原文链接</a>
