---
title: "中秋画“饼”充饥（解你想入门R的饥渴）"
date: 2025-10-05T23:15:44Z
draft: ["false"]
tags: [
  "fetched",
  "小丫画图"
]
categories: ["Acdemic"]
---
中秋画“饼”充饥（解你想入门R的饥渴） by 小丫画图
------
<div><h1>这篇推文值得你往下看吗？<br></h1><ul><li><h1>如果你是R小白，想用R包来画图，却搞不清输入文件的格式，不知如何套用在自己的数据上。</h1></li><li><h1>如果你已经能用R画图了，R包画出的图总有些不尽如人意的地方，你想修改却不知从何处下手。</h1></li><li><h1>或者，你就想短平快的画个好看的月饼晒个圈</h1></li></ul><h1>那么，本文适合你继续读下去，打开R，读我写的文字，复制粘贴代码，小丫带你踏平R小白进阶的门槛～</h1><h1><br></h1><h1>FigureYa0mooncake</h1><h4>小丫画图出品</h4><h4>己亥年八月十五中秋节</h4><p>欢迎关注“小丫画图”公众号，同名知识星球等你加入</p><p>小丫微信: epigenomics</p><p>作者：小丫</p><h2>需求描述</h2><p>模仿Y叔画月饼，想自己修改颜色，换祝福语～</p><p><img data-ratio="0.6251851851851852" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/fTGTY7BwuzdAnXQ3WwiaFWlLOgwvdicDtF8ia8JnnDJaltibGjaWSXnz72MTbMF9znrP5tCCBL5zHV5VbJjiaa50MibQ/640?wx_fmt=jpeg" data-type="jpeg" data-w="675" src="https://mmbiz.qpic.cn/mmbiz_jpg/fTGTY7BwuzdAnXQ3WwiaFWlLOgwvdicDtF8ia8JnnDJaltibGjaWSXnz72MTbMF9znrP5tCCBL5zHV5VbJjiaa50MibQ/640?wx_fmt=jpeg"></p><p>出自https://github.com/GuangchuangYu/biobabble</p><h2>应用场景</h2><p>场景一：朋友圈炫技，晒出与众不同的月饼。</p><p>场景二：小丫带你破解R包自带函数，改函数原来可以这么简单。</p><h2>环境设置</h2><p>安装包</p><pre><code><span>library</span>(devtools)<br>install_github(<span>"GuangchuangYu/biobabble"</span>)</code></pre><p>加载包</p><pre><code><span>library</span>(biobabble)<br><span>library</span>(ggplot2)<br>Sys.setenv(LANGUAGE = <span>"en"</span>) <span>#显示英文报错信息</span><br>options(stringsAsFactors = <span>FALSE</span>) <span>#禁止chr转成factor</span></code></pre><h2>输入文件</h2><p>R包里通常都自带示例数据，可是小白看不懂。只有用鼠标点开文件，看到Excel里一行行一列列的数字心里才踏实。</p><p>小丫带你拆解R包里自带的示例数据，顺利套用到自己的数据上。</p><h3>示例数据的导出</h3><pre><code><span># R包通常都用这一行来导入数据</span><br>data(mooncake)<br><br><span># 这数据长啥样？</span><br><span># 在两边加上括号（），获取它的名字</span><br>(data(mooncake))</code></pre><pre><code>## [1] "mooncake"</code></pre><pre><code><span># 原来数据存储在mooncake里，可以通过head、tail、summary查看</span><br>head(mooncake)</code></pre><pre><code>##          x        y<br>## 1 152.0012 270.6194<br>## 2 152.0013 275.2755<br>## 3 152.0013 279.9316<br>## 4 152.0014 284.5876<br>## 5 152.0014 289.2437<br>## 6 152.0015 293.8998</code></pre><pre><code><span># 我们把示例数据输出到小白最爱的文件里，文件名就叫easy_input.csv</span><br>write.csv(mooncake, <span>"easy_input.csv"</span>, quote = <span>F</span>, row.names = <span>F</span>)</code></pre><p>在当前文件夹里，你就会看到出现了一个新的easy_input.csv文件，鼠标双击它，就会出现在Excel里。</p><h3>示例数据的套用</h3><p>看到Excel里的一行行一列列，行里面放了啥，列里放了啥，列的名字是啥，一目了然。</p><p>把自己的数据修改成easy_input.csv的模样，就可以作为输入，顺利使用R包啦～</p><h3>输入文件的读入</h3><p>下面就从文件读入数据：</p><pre><code>mooncake &lt;- read.csv(<span>"easy_input.csv"</span>) <span># 从文件读入数据</span><br>head(mooncake) <span># 查看开头几行</span></code></pre><pre><code>##          x        y<br>## 1 152.0012 270.6194<br>## 2 152.0013 275.2755<br>## 3 152.0013 279.9316<br>## 4 152.0014 284.5876<br>## 5 152.0014 289.2437<br>## 6 152.0015 293.8998</code></pre><h2>开始画图</h2><h3>用biobabble包自带的bplot函数画图</h3><p>R包作者把代码封装到函数里，使用起来非常简单，只要这一句：</p><pre><code>bplot(mooncake)</code></pre><p><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/fTGTY7BwuzdAnXQ3WwiaFWlLOgwvdicDtF42lTDxib9UYXaFvBIGGMuzEm3gzHRFnKw5icRwgCWqhLXrSxj4NQxL7Q/640?wx_fmt=png" data-type="png" data-w="1344" width="672" src="https://mmbiz.qpic.cn/mmbiz_png/fTGTY7BwuzdAnXQ3WwiaFWlLOgwvdicDtF42lTDxib9UYXaFvBIGGMuzEm3gzHRFnKw5icRwgCWqhLXrSxj4NQxL7Q/640?wx_fmt=png"></p><p>可是我想给月饼改改颜色，上面加上祝福语，要怎么写？</p><h3>用自己修改后的函数画图</h3><p><strong>经过这步，你也能自己修改R包的函数啦</strong></p><p>bplot函数长啥样？这样查看：</p><pre><code>bplot</code></pre><pre><code>## function (data, title = "")<br>## {<br>##     caption_file &lt;- system.file("extdata/caption.txt", package = "biobabble")<br>##     caption &lt;- readLines(caption_file, encoding = "UTF-8")<br>##     caption &lt;- gsub("\\\\n", "\n", caption)<br>##     ggplot(data, aes_(x = ~x, y = ~y)) + geom_point(size = 0.8) +<br>##         scale_y_reverse() + xlab(NULL) + ylab(NULL) + labs(title = title,<br>##         caption = caption) + theme(plot.caption = element_text(hjust = 0))<br>## }<br>## &lt;bytecode: 0x7fd09bfdafb8&gt;<br>## &lt;environment: namespace:biobabble&gt;</code></pre><p>把从<code>function</code>到<code>}</code>的这一整段复制下来，粘贴到这里。</p><p>取名叫做bplot_plus，在大括号{}里肆意修改成我们想要的样子：</p><pre><code><span># 下面就是我修改后的函数</span><br>bplot_plus &lt;- <span>function</span> (data, title = <span>""</span>) {<br>    ggplot(data, aes_(x = ~x, y = ~y)) +<br>    geom_point(size = <span>0.8</span>, color = <span>"darkgoldenrod1"</span>) + <span># 我要吃油汪汪金黄色的广式月饼</span><br>    scale_y_reverse() +<br>    theme_classic() + <span># 保留x和y轴，晒朋友圈的时候显得高大上</span><br>    xlab(<span>"Happy Mid-Autumn Day!"</span>) + ylab(<span>"Your effort is sure to win!"</span>) + <span># 把祝福语写在坐标轴lable上</span><br>    labs(title = title, caption = <span>"by FigureYa"</span>) + <span># 打上作图者签名</span><br>    theme(axis.title.x = element_text(size = <span>15</span>, face = <span>"bold"</span>, color = <span>"darkgoldenrod1"</span>),<br>          axis.title.y = element_text(size = <span>14</span>, face = <span>"bold"</span>, color = <span>"darkgoldenrod1"</span>),<br>          plot.caption = element_text(size = <span>10</span>, face = <span>"bold"</span>, color = <span>"darkgoldenrod1"</span>)) <span># 设置字体</span><br>}<br><br><span># 用修改后的函数画图</span><br>bplot_plus(mooncake)</code></pre><p><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/fTGTY7BwuzdAnXQ3WwiaFWlLOgwvdicDtFOAIKB8xrLkuIooMcbYJhibdlIricC2y8Ly5Y3GmtZBJTeXzgeaPtHZUA/640?wx_fmt=png" data-type="png" data-w="1344" width="672" src="https://mmbiz.qpic.cn/mmbiz_png/fTGTY7BwuzdAnXQ3WwiaFWlLOgwvdicDtFOAIKB8xrLkuIooMcbYJhibdlIricC2y8Ly5Y3GmtZBJTeXzgeaPtHZUA/640?wx_fmt=png"></p><pre><code><span># 保存到pdf文件，是矢量图，可以在Illustrator等软件里继续编辑。</span><br>ggsave(<span>"mooncake.pdf"</span>)</code></pre><pre><code>## Saving 7 x 5 in image</code></pre><pre><code>sessionInfo()</code></pre><pre><code>## R version 3.6.0 (2019-04-26)<br>## Platform: x86_64-apple-darwin15.6.0 (64-bit)<br>## Running under: macOS Mojave 10.14.6<br>##<br>## Matrix products: default<br>## BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib<br>## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib<br>##<br>## locale:<br>## [1] zh_CN.UTF-8/zh_CN.UTF-8/zh_CN.UTF-8/C/zh_CN.UTF-8/zh_CN.UTF-8<br>##<br>## attached base packages:<br>## [1] stats     graphics  grDevices utils     datasets  methods   base<br>##<br>## other attached packages:<br>## [1] ggplot2_3.2.1   biobabble_0.0.2<br>##<br>## loaded via a namespace (and not attached):<br>##  [1] Rcpp_1.0.2       knitr_1.24       magrittr_1.5     tidyselect_0.2.5<br>##  [5] munsell_0.5.0    colorspace_1.4-1 R6_2.4.0         rlang_0.4.0<br>##  [9] stringr_1.4.0    dplyr_0.8.3      tools_3.6.0      grid_3.6.0<br>## [13] gtable_0.3.0     xfun_0.9         withr_2.1.2      htmltools_0.3.6<br>## [17] assertthat_0.2.1 yaml_2.2.0       lazyeval_0.2.2   digest_0.6.20<br>## [21] tibble_2.1.3     crayon_1.3.4     purrr_0.3.2      glue_1.3.1<br>## [25] evaluate_0.14    rmarkdown_1.15   labeling_0.3     stringi_1.4.3<br>## [29] compiler_3.6.0   pillar_1.4.2     scales_1.0.0     pkgconfig_2.0.2</code></pre><p><br></p><p><span>回复“群公告”，加入“小丫画图群”，我们一起画美图～</span></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/UTIyYqn5HLzRVFzSs3_1RQ",target="_blank" rel="noopener noreferrer">原文链接</a>
