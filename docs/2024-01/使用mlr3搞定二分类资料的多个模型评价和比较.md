---
title: "ä½¿ç”¨mlr3æå®šäºŒåˆ†ç±»èµ„æ–™çš„å¤šä¸ªæ¨¡å‹è¯„ä»·å’Œæ¯”è¾ƒ"
date: 2024-01-04T23:36:48Z
draft: ["false"]
tags: [
  "fetched",
  "åŒ»å­¦å’Œç”Ÿä¿¡ç¬”è®°"
]
categories: ["Acdemic"]
---
ä½¿ç”¨mlr3æå®šäºŒåˆ†ç±»èµ„æ–™çš„å¤šä¸ªæ¨¡å‹è¯„ä»·å’Œæ¯”è¾ƒ by åŒ»å­¦å’Œç”Ÿä¿¡ç¬”è®°
------
<div><section><span>å…³æ³¨å…¬ä¼—å·ï¼Œå‘é€</span><strong>Rè¯­è¨€</strong><span>æˆ–</span><strong>python</strong><span>ï¼Œå¯è·å–èµ„æ–™</span><span></span></section><section><mpprofile data-pluginname="mpprofile" data-id="MzUzOTQzNzU0NA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R9YDc8IDhqWAHTrZsMuhDpFlw4scqOl1ZVWpeY77cdibaSzPeGALfkEhdVpwHzVibHCRSYZg4csB43g/0?wx_fmt=png" data-nickname="åŒ»å­¦å’Œç”Ÿä¿¡ç¬”è®°" data-alias="yxhsxbj" data-signature="å¤–ç§‘åŒ»ç”ŸğŸ‘¨â€âš•ï¸çš„Rè¯­è¨€å’Œç”Ÿä¿¡å­¦ä¹ ğŸ”–" data-from="0"></mpprofile></section><section><span></span></section><section data-role="outer" label="edit by 135editor"><section data-role="paragraph"><section data-role="outer" label="edit by 135editor"><section data-role="paragraph"><section data-role="outer" label="edit by 135editor"><section data-role="paragraph"><section data-role="outer"><section data-role="outer" label="edit by 135editor"><section data-tools="135ç¼–è¾‘å™¨" data-id="28"><p data-brushtype="text" hm_fix="440:185"><span>ğŸ’¡ä¸“æ³¨Rè¯­è¨€åœ¨ğŸ©ºç”Ÿç‰©åŒ»å­¦ä¸­çš„ä½¿ç”¨</span></p></section><section data-role="paragraph"><p><br></p></section></section></section></section><section data-role="paragraph"><section data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com"><section data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com"><p data-tool="mdniceç¼–è¾‘å™¨">å‰é¢ä»‹ç»äº†ä½¿ç”¨<code>tidymodels</code>è¿›è¡ŒäºŒåˆ†ç±»èµ„æ–™çš„æ¨¡å‹è¯„ä»·å’Œæ¯”è¾ƒï¼Œä¸çŸ¥é“å¤§å®¶å­¦ä¼šäº†æ²¡ï¼Ÿ</p><p data-tool="mdniceç¼–è¾‘å™¨">æˆ‘ä¹‹å‰è¯¦ç»†ä»‹ç»è¿‡<code>mlr3</code>è¿™ä¸ªåŒ…ï¼Œä¹Ÿæ˜¯ç›®å‰Rè¯­è¨€æœºå™¨å­¦ä¹ é¢†åŸŸæ¯”è¾ƒç«çš„RåŒ…äº†ï¼Œä»Šå¤©è¯´ä¸‹è¿™ä¹ˆç”¨<code>mlr3</code>è¿›è¡ŒäºŒåˆ†ç±»èµ„æ–™çš„æ¨¡å‹è¯„ä»·å’Œæ¯”è¾ƒã€‚</p><p data-tool="mdniceç¼–è¾‘å™¨">æœ¬æœŸç›®å½•ï¼š</p><ul><li><p>åŠ è½½RåŒ…</p></li><li><p>å»ºç«‹ä»»åŠ¡</p></li><li><p>æ•°æ®é¢„å¤„ç†</p></li><li><p>é€‰æ‹©å¤šä¸ªæ¨¡å‹</p></li><li><p>å»ºç«‹benchmark_grid</p></li><li><p>å¼€å§‹è®¡ç®—</p></li><li><p>æŸ¥çœ‹æ¨¡å‹è¡¨ç°</p></li><li><p>ç»“æœå¯è§†åŒ–</p></li><li><p>é€‰æ‹©æœ€å¥½çš„æ¨¡å‹</p></li></ul><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>åŠ è½½RåŒ…</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">é¦–å…ˆè¿˜æ˜¯åŠ è½½æ•°æ®å’ŒRåŒ…ï¼Œå’Œä¹‹å‰çš„æ•°æ®ä¸€æ ·çš„ã€‚</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code><span>library</span>(mlr3verse)<br><span>##Â LoadingÂ requiredÂ package:Â mlr3</span><br><span>library</span>(mlr3pipelines)<br><span>library</span>(mlr3filters)<br></code></pre><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>å»ºç«‹ä»»åŠ¡</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">ç„¶åæ˜¯å¯¹æ•°æ®è¿›è¡Œåˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œä¸ºäº†å’Œä¹‹å‰çš„<code>tidymodels</code>è¿›è¡Œæ¯”è¾ƒï¼Œè¿™é‡Œä½¿ç”¨çš„æ•°æ®å’Œé¢„å¤„ç†æ­¥éª¤éƒ½æ˜¯å’Œä¹‹å‰ä¸€æ ·çš„ã€‚</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code><span>#Â è¯»å–æ•°æ®</span><br>all_playsÂ &lt;-Â readRDS(<span>"../000files/all_plays.rds"</span>)<br><br><span>#Â å»ºç«‹ä»»åŠ¡</span><br>pbp_taskÂ &lt;-Â as_task_classif(all_plays,Â target=<span>"play_type"</span>)<br><br><span>#Â æ•°æ®åˆ’åˆ†</span><br>split_taskÂ &lt;-Â partition(pbp_task,Â ratio=<span>0.75</span>)<br><br>task_trainÂ &lt;-Â pbp_task$clone()$filter(split_task$train)<br>task_testÂ &lt;-Â pbp_task$clone()$filter(split_task$test)<br></code></pre><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>æ•°æ®é¢„å¤„ç†</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">å»ºç«‹ä»»åŠ¡åå°±æ˜¯å»ºç«‹æ•°æ®é¢„å¤„ç†æ­¥éª¤ï¼Œè¿™é‡Œé‡‡ç”¨å’Œä¸Šç¯‡æ¨æ–‡<code>tidymodels</code>ä¸­ä¸€æ ·çš„é¢„å¤„ç†æ­¥éª¤ï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code><span>#Â æ•°æ®é¢„å¤„ç†</span><br>pbp_prepÂ &lt;-Â po(<span>"select"</span>,Â <span>#Â å»æ‰3åˆ—</span><br>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â selectorÂ =Â selector_invert(<br>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â selector_name(c(<span>"half_seconds_remaining"</span>,<span>"yards_gained"</span>,<span>"game_id"</span>)))<br>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )Â %&gt;&gt;%<br>Â Â po(<span>"colapply"</span>,Â <span>#Â æŠŠè¿™ä¸¤åˆ—å˜æˆå› å­ç±»å‹</span><br>Â Â Â Â Â affect_columnsÂ =Â selector_name(c(<span>"posteam"</span>,<span>"defteam"</span>)),<br>Â Â Â Â Â applicatorÂ =Â as.factor)Â %&gt;&gt;%Â <br>Â Â po(<span>"filter"</span>,Â <span>#Â å»é™¤é«˜åº¦ç›¸å…³çš„åˆ—</span><br>Â Â Â Â Â filterÂ =Â mlr3filters::flt(<span>"find_correlation"</span>),Â filter.cutoff=<span>0.3</span>)Â %&gt;&gt;%<br>Â Â po(<span>"scale"</span>,Â scaleÂ =Â <span>F</span>)Â %&gt;&gt;%Â <span>#Â ä¸­å¿ƒåŒ–</span><br>Â Â po(<span>"removeconstants"</span>)Â <span>#Â å»æ‰é›¶æ–¹å·®å˜é‡</span><br></code></pre><p data-tool="mdniceç¼–è¾‘å™¨">å¯ä»¥çœ‹åˆ°<code>mlr3</code>çš„æ•°æ®é¢„å¤„ç†ä¸<code>tidymodels</code>ç›¸æ¯”ï¼Œåœ¨è¯­æ³•ä¸Šç¡®å®æ˜¯æœ‰äº›å¤æ‚äº†ï¼Œè€Œä¸”ç”±äºä½¿ç”¨çš„<code>R6</code>ï¼Œå¾ˆå¤šè¯­æ³•çœ‹èµ·æ¥å¾ˆåˆ«æ‰­ï¼Œæ–‡æ¡£ä¹Ÿè¯´çš„ä¸æ¸…æ¥šï¼Œå¯¹äºæ–°æ‰‹æ¥è¯´è¿˜æ˜¯<code>tidymodels</code>æ›´å¥½äº›ã€‚ç›®å‰æ¥è¯´æœ€å¤§çš„ä¼˜åŠ¿å¯èƒ½å°±æ˜¯é€Ÿåº¦äº†å§ã€‚ã€‚ã€‚</p><p data-tool="mdniceç¼–è¾‘å™¨">å¦‚æœä½ æƒ³æŠŠé¢„å¤„ç†æ­¥éª¤åº”ç”¨äºæ•°æ®ï¼Œå¾—åˆ°é¢„å¤„ç†ä¹‹åçš„æ•°æ®ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code>task_prepÂ &lt;-Â pbp_prep$clone()$train(pbp_task)[[<span>1</span>]]<br>dim(task_train$data())<br><span>##Â Â 68982Â Â Â Â 26</span><br><br>task_prep$feature_types<br><span>##Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â idÂ Â Â Â type</span><br><span>##Â Â 1:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â defteamÂ Â factor</span><br><span>##Â Â 2:Â Â Â Â Â Â Â Â Â Â Â Â Â Â defteam_scoreÂ numeric</span><br><span>##Â Â 3:Â defteam_timeouts_remainingÂ Â factor</span><br><span>##Â Â 4:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â downÂ ordered</span><br><span>##Â Â 5:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â goal_to_goÂ Â factor</span><br><span>##Â Â 6:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â in_fg_rangeÂ Â factor</span><br><span>##Â Â 7:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â in_red_zoneÂ Â factor</span><br><span>##Â Â 8:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â no_huddleÂ Â factor</span><br><span>##Â Â 9:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â posteamÂ Â factor</span><br><span>##Â 10:Â Â Â Â Â Â Â Â Â Â Â Â Â Â posteam_scoreÂ numeric</span><br><span>##Â 11:Â posteam_timeouts_remainingÂ Â factor</span><br><span>##Â 12:Â Â Â Â Â Â Â Â Â Â Â Â Â Â previous_playÂ Â factor</span><br><span>##Â 13:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â qtrÂ ordered</span><br><span>##Â 14:Â Â Â Â Â Â Â Â Â score_differentialÂ numeric</span><br><span>##Â 15:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â shotgunÂ Â factor</span><br><span>##Â 16:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â total_passÂ numeric</span><br><span>##Â 17:Â Â Â Â Â Â Â Â Â Â Â Â Â Â two_min_drillÂ Â factor</span><br><span>##Â 18:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â yardline_100Â numeric</span><br><span>##Â 19:Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ydstogoÂ numeric</span><br></code></pre><p data-tool="mdniceç¼–è¾‘å™¨">è¿™æ ·å°±å¾—åˆ°äº†å¤„ç†å¥½çš„æ•°æ®ï¼Œä½†æ˜¯å¯¹äº<code>mlr3pipelines</code>æ¥è¯´ï¼Œè¿™ä¸€æ­¥åšä¸åšéƒ½å¯ä»¥ã€‚</p><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>é€‰æ‹©å¤šä¸ªæ¨¡å‹</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">è¿˜æ˜¯é€‰æ‹©å’Œä¹‹å‰ä¸€æ ·çš„4ä¸ªæ¨¡å‹ï¼šé€»è¾‘å›å½’ã€éšæœºæ£®æ—ã€å†³ç­–æ ‘ã€kæœ€è¿‘é‚»ï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code># éšæœºæ£®æ—<br>rf_glr &lt;- as_learner(pbp_prep %&gt;&gt;% lrn("classif.ranger", predict_type="prob")) <br>rf_glr$id &lt;- "randomForest"<br><br># é€»è¾‘å›å½’<br>log_glr &lt;-as_learner(pbp_prep %&gt;&gt;% lrn("classif.log_reg", predict_type="prob")) <br>log_glr$id &lt;- "logistic"<br><br># å†³ç­–æ ‘<br>tree_glr &lt;- as_learner(pbp_prep %&gt;&gt;% lrn("classif.rpart", predict_type="prob")) <br>tree_glr$id &lt;- "decisionTree"<br><br># kè¿‘é‚»<br>kknn_glr &lt;- as_learner(pbp_prep %&gt;&gt;% lrn("classif.kknn", predict_type="prob")) <br>kknn_glr$id &lt;- "kknn"</code></pre><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>å»ºç«‹benchmark_grid</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">ç±»ä¼¼äº<code>tidymodels</code>ä¸­çš„<code>workflow_set</code>ã€‚</p><p data-tool="mdniceç¼–è¾‘å™¨">æ¥ä¸‹æ¥å°±æ˜¯é€‰æ‹©10æŠ˜äº¤å‰éªŒè¯ï¼Œå»ºç«‹å¤šä¸ªæ¨¡å‹ï¼Œè¯­æ³•ä¹Ÿæ˜¯å¾ˆç®€å•äº†ã€‚</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code>set.seed(<span>0520</span>)<br><br><span>#Â 10æŠ˜äº¤å‰éªŒè¯</span><br>cvÂ &lt;-Â rsmp(<span>"cv"</span>,folds=<span>10</span>)<br><br>set.seed(<span>0520</span>)<br><br><span>#Â å»ºç«‹å¤šä¸ªæ¨¡å‹</span><br>designÂ &lt;-Â benchmark_grid(<br>Â Â tasksÂ =Â task_train,<br>Â Â learnersÂ =Â list(rf_glr,log_glr,tree_glr,kknn_glr),<br>Â Â resamplingÂ =Â cv<br>)<br></code></pre><p data-tool="mdniceç¼–è¾‘å™¨">åœ¨è®­ç»ƒé›†ä¸­ï¼Œä½¿ç”¨10æŠ˜äº¤å‰éªŒè¯ï¼Œè¿è¡Œ4ä¸ªæ¨¡å‹ï¼Œçœ‹è¿™è¯­æ³•æ˜¯ä¸æ˜¯ä¹Ÿå¾ˆç®€å•æ¸…æ™°ï¼Ÿ</p><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>å¼€å§‹è®¡ç®—</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">ä¸‹é¢å°±æ˜¯å¼€å§‹è®¡ç®—ï¼Œå’Œ<code>tidymodels</code>ç›¸æ¯”ï¼Œè¿™ä¸€å—è¯­æ³•æ›´åŠ ç®€å•ä¸€ç‚¹ï¼Œå°±æ˜¯å»ºç«‹<code>benchmark_grid</code>ï¼Œç„¶åä½¿ç”¨<code>benchmark()</code>å‡½æ•°å³å¯ã€‚</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code><span>#Â åŠ é€Ÿ</span><br><span>library</span>(future)<br>plan(<span>"multisession"</span>,workers=<span>12</span>)<br><br><span>#Â å‡å°‘å±å¹•è¾“å‡º</span><br>lgr::get_logger(<span>"mlr3"</span>)$set_threshold(<span>"warn"</span>)<br>lgr::get_logger(<span>"bbotk"</span>)$set_threshold(<span>"warn"</span>)<br><br><span>#Â å¼€å§‹è¿è¡Œ</span><br>bmrÂ &lt;-Â benchmark(design,store_modelsÂ =Â <span>T</span>)<br><br>GrowingÂ trees..Â Progress:Â <span>29</span>%.Â EstimatedÂ remainingÂ time:Â <span>1</span>Â minute,Â <span>14</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>61</span>%.Â EstimatedÂ remainingÂ time:Â <span>39</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>92</span>%.Â EstimatedÂ remainingÂ time:Â <span>8</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>29</span>%.Â EstimatedÂ remainingÂ time:Â <span>1</span>Â minute,Â <span>16</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>60</span>%.Â EstimatedÂ remainingÂ time:Â <span>40</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>91</span>%.Â EstimatedÂ remainingÂ time:Â <span>8</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>43</span>%.Â EstimatedÂ remainingÂ time:Â <span>40</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>83</span>%.Â EstimatedÂ remainingÂ time:Â <span>12</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>42</span>%.Â EstimatedÂ remainingÂ time:Â <span>42</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>90</span>%.Â EstimatedÂ remainingÂ time:Â <span>7</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>30</span>%.Â EstimatedÂ remainingÂ time:Â <span>1</span>Â minute,Â <span>10</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>62</span>%.Â EstimatedÂ remainingÂ time:Â <span>38</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>93</span>%.Â EstimatedÂ remainingÂ time:Â <span>7</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>30</span>%.Â EstimatedÂ remainingÂ time:Â <span>1</span>Â minute,Â <span>10</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>61</span>%.Â EstimatedÂ remainingÂ time:Â <span>38</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>92</span>%.Â EstimatedÂ remainingÂ time:Â <span>7</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>29</span>%.Â EstimatedÂ remainingÂ time:Â <span>1</span>Â minute,Â <span>15</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>60</span>%.Â EstimatedÂ remainingÂ time:Â <span>41</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>91</span>%.Â EstimatedÂ remainingÂ time:Â <span>9</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>32</span>%.Â EstimatedÂ remainingÂ time:Â <span>1</span>Â minute,Â <span>7</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>73</span>%.Â EstimatedÂ remainingÂ time:Â <span>22</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>42</span>%.Â EstimatedÂ remainingÂ time:Â <span>42</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>84</span>%.Â EstimatedÂ remainingÂ time:Â <span>11</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>32</span>%.Â EstimatedÂ remainingÂ time:Â <span>1</span>Â minute,Â <span>7</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>63</span>%.Â EstimatedÂ remainingÂ time:Â <span>36</span>Â seconds.<br>GrowingÂ trees..Â Progress:Â <span>94</span>%.Â EstimatedÂ remainingÂ time:Â <span>6</span>Â seconds.<br><br><span>#Â ç»“æœ</span><br>bmr<br><br>&lt;BenchmarkResult&gt;Â ofÂ <span>40</span>Â rowsÂ withÂ <span>4</span>Â resamplingÂ runs<br>Â nrÂ Â Â task_idÂ Â Â learner_idÂ resampling_idÂ itersÂ warningsÂ errors<br>Â Â <span>1</span>Â all_playsÂ randomForestÂ Â Â Â Â Â Â Â Â Â Â Â cvÂ Â Â Â <span>10</span>Â Â Â Â Â Â Â Â <span>0</span>Â Â Â Â Â Â <span>0</span><br>Â Â <span>2</span>Â all_playsÂ Â Â Â Â logisticÂ Â Â Â Â Â Â Â Â Â Â Â cvÂ Â Â Â <span>10</span>Â Â Â Â Â Â Â Â <span>0</span>Â Â Â Â Â Â <span>0</span><br>Â Â <span>3</span>Â all_playsÂ decisionTreeÂ Â Â Â Â Â Â Â Â Â Â Â cvÂ Â Â Â <span>10</span>Â Â Â Â Â Â Â Â <span>0</span>Â Â Â Â Â Â <span>0</span><br>Â Â <span>4</span>Â all_playsÂ Â Â Â Â Â Â Â Â kknnÂ Â Â Â Â Â Â Â Â Â Â Â cvÂ Â Â Â <span>10</span>Â Â Â Â Â Â Â Â <span>0</span>Â Â Â Â Â Â <span>0</span><br></code></pre><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>æŸ¥çœ‹æ¨¡å‹è¡¨ç°</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">æŸ¥çœ‹ç»“æœï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code><span>#Â é»˜è®¤ç»“æœ</span><br>bmr$aggregate()<br><br>nrÂ Â Â Â Â Â resample_resultÂ Â Â task_idÂ Â Â learner_idÂ resampling_idÂ itersÂ classif.ce<br><span>1</span>:Â Â <span>1</span>Â &lt;ResampleResult[<span>22</span>]&gt;Â all_playsÂ randomForestÂ Â Â Â Â Â Â Â Â Â Â Â cvÂ Â Â Â <span>10</span>Â Â <span>0.2695630</span><br><span>2</span>:Â Â <span>2</span>Â &lt;ResampleResult[<span>22</span>]&gt;Â all_playsÂ Â Â Â Â logisticÂ Â Â Â Â Â Â Â Â Â Â Â cvÂ Â Â Â <span>10</span>Â Â <span>0.2770287</span><br><span>3</span>:Â Â <span>3</span>Â &lt;ResampleResult[<span>22</span>]&gt;Â all_playsÂ decisionTreeÂ Â Â Â Â Â Â Â Â Â Â Â cvÂ Â Â Â <span>10</span>Â Â <span>0.2799570</span><br><span>4</span>:Â Â <span>4</span>Â &lt;ResampleResult[<span>22</span>]&gt;Â all_playsÂ Â Â Â Â Â Â Â Â kknnÂ Â Â Â Â Â Â Â Â Â Â Â cvÂ Â Â Â <span>10</span>Â Â <span>0.3220549</span><br></code></pre><p data-tool="mdniceç¼–è¾‘å™¨">ä¹Ÿæ˜¯æ”¯æŒåŒæ—¶æŸ¥çœ‹å¤šä¸ªç»“æœçš„ï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code>measuresÂ &lt;-Â msrs(c(<span>"classif.auc"</span>,<span>"classif.acc"</span>,<span>"classif.bbrier"</span>))<br><br>bmr_resÂ &lt;-Â bmr$aggregate(measures)<br>bmr_res[,c(<span>4</span>,<span>7</span>:<span>9</span>)]<br><br>Â Â Â learner_idÂ classif.aucÂ classif.accÂ classif.bbrier<br><span>1</span>:Â randomForestÂ Â Â <span>0.7978436</span>Â Â Â <span>0.7304370</span>Â Â Â Â Â Â <span>0.1790968</span><br><span>2</span>:Â Â Â Â Â logisticÂ Â Â <span>0.7798504</span>Â Â Â <span>0.7229713</span>Â Â Â Â Â Â <span>0.1866577</span><br><span>3</span>:Â decisionTreeÂ Â Â <span>0.7034790</span>Â Â Â <span>0.7200430</span>Â Â Â Â Â Â <span>0.2003303</span><br><span>4</span>:Â Â Â Â Â Â Â Â Â kknnÂ Â Â <span>0.7322762</span>Â Â Â <span>0.6779451</span>Â Â Â Â Â Â <span>0.2210171</span><br></code></pre><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>ç»“æœå¯è§†åŒ–</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">æ”¯æŒ<code>ggplot2</code>è¯­æ³•ï¼Œä½¿ç”¨èµ·æ¥å’Œ<code>tidymodels</code>å·®ä¸å¤šï¼Œä¹Ÿæ˜¯å¯¹ç»“æœç›´æ¥<code>autoplot()</code>å³å¯ã€‚</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code><span>library</span>(ggplot2)<br>autoplot(bmr)+theme(axis.text.xÂ =Â element_text(angleÂ =Â <span>45</span>))<br></code></pre><figure data-tool="mdniceç¼–è¾‘å™¨"><img data-ratio="0.6171428571428571" data-type="png" data-w="700" data-src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R8qMYbuQcyicINmPv3jRR8GLFnF4Gd5PPSLhMicl416LtD891hEVI5nEr0mjqkgvxmwSib4zqn5SUosg/640?wx_fmt=png" src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R8qMYbuQcyicINmPv3jRR8GLFnF4Gd5PPSLhMicl416LtD891hEVI5nEr0mjqkgvxmwSib4zqn5SUosg/640?wx_fmt=png"></figure><p data-tool="mdniceç¼–è¾‘å™¨">å–œé—»ä¹è§çš„ROCæ›²çº¿ï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code>autoplot(bmr,typeÂ =Â <span>"roc"</span>)<br></code></pre><figure data-tool="mdniceç¼–è¾‘å™¨"><img data-ratio="0.6171428571428571" data-type="png" data-w="700" data-src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R8qMYbuQcyicINmPv3jRR8GLHrzf960gNYliafjtOdQ4fQibgrqjpzhRLeZWVgEBd6KicxRGZQBDlqa0w/640?wx_fmt=png" src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R8qMYbuQcyicINmPv3jRR8GLHrzf960gNYliafjtOdQ4fQibgrqjpzhRLeZWVgEBd6KicxRGZQBDlqa0w/640?wx_fmt=png"></figure><h2 data-tool="mdniceç¼–è¾‘å™¨"><span></span><span>é€‰æ‹©æœ€å¥½çš„æ¨¡å‹</span></h2><p data-tool="mdniceç¼–è¾‘å™¨">é€šè¿‡æ¯”è¾ƒç»“æœå¯ä»¥å‘ç°è¿˜æ˜¯éšæœºæ£®æ—æ•ˆæœæœ€å¥½~ï¼Œä¸‹é¢é€‰æ‹©éšæœºæ£®æ—ï¼Œåœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒï¼Œåœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•ç»“æœã€‚</p><p data-tool="mdniceç¼–è¾‘å™¨">è¿™ä¸€æ­¥å¹¶æ²¡æœ‰ä½¿ç”¨10æŠ˜äº¤å‰éªŒè¯ï¼Œå¦‚æœä½ æƒ³ç”¨ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„~</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code># è®­ç»ƒ<br>rf_glr$train(task_train)</code></pre><p data-tool="mdniceç¼–è¾‘å™¨">è®­ç»ƒå¥½ä¹‹åå°±æ˜¯åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•å¹¶æŸ¥çœ‹ç»“æœï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code># æµ‹è¯•<br>prediction &lt;- rf_glr$predict(task_test)<br>head(as.data.table(prediction))<br><br>row_ids truth response prob.pass   prob.run<br>1:       4   run     pass 0.7649998 0.23500021<br>2:       6   run      run 0.4168520 0.58314804<br>3:      11  pass     pass 0.7199717 0.28002834<br>4:      13   run     pass 0.9406333 0.05936668<br>5:      17   run      run 0.4073665 0.59263354<br>6:      24  pass     pass 0.6243693 0.37563072</code></pre><p data-tool="mdniceç¼–è¾‘å™¨">æ··æ·†çŸ©é˜µï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code>prediction$confusion<br><br>Â Â Â Â Â Â Â Â truth<br>responseÂ Â passÂ Â Â run<br>Â Â Â Â passÂ <span>10629</span>Â Â <span>3175</span><br>Â Â Â Â runÂ Â Â <span>2955</span>Â Â <span>6235</span><br></code></pre><p data-tool="mdniceç¼–è¾‘å™¨">å¯è§†åŒ–æ··æ·†çŸ©é˜µï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code>autoplot(prediction)<br></code></pre><figure data-tool="mdniceç¼–è¾‘å™¨"><img data-ratio="0.6171428571428571" data-type="png" data-w="700" data-src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R8qMYbuQcyicINmPv3jRR8GL16p0kIBBJGkZCc6sFHWfI9GicHIlicQEibS312me7toRqoVGib44T766wA/640?wx_fmt=png" src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R8qMYbuQcyicINmPv3jRR8GL16p0kIBBJGkZCc6sFHWfI9GicHIlicQEibS312me7toRqoVGib44T766wA/640?wx_fmt=png"></figure><p data-tool="mdniceç¼–è¾‘å™¨">å½“ç„¶ä¹Ÿæ˜¯æ”¯æŒå¤šä¸ªæŒ‡æ ‡çš„ï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code>prediction$score(msrs(c(<span>"classif.auc"</span>,<span>"classif.acc"</span>,<span>"classif.bbrier"</span>)))<br><br>classif.aucÂ Â Â Â classif.accÂ classif.bbrierÂ <br><span>0.8011720</span>Â Â Â Â Â Â <span>0.7334087</span>Â Â Â Â Â Â <span>0.1775684</span>Â <br></code></pre><p data-tool="mdniceç¼–è¾‘å™¨">å–œé—»ä¹è§ROCæ›²çº¿ï¼š</p><pre data-tool="mdniceç¼–è¾‘å™¨"><span></span><code>autoplot(prediction,typeÂ =Â <span>"roc"</span>)<br></code></pre><figure data-tool="mdniceç¼–è¾‘å™¨"><img data-ratio="0.6171428571428571" data-type="png" data-w="700" data-src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R8qMYbuQcyicINmPv3jRR8GLC8kInxl2RaubNOM48G2kSP5RQGfO7rFbMsCZymjUYUmh5b6ibCOfY7Q/640?wx_fmt=png" src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R8qMYbuQcyicINmPv3jRR8GLC8kInxl2RaubNOM48G2kSP5RQGfO7rFbMsCZymjUYUmh5b6ibCOfY7Q/640?wx_fmt=png"><figcaption>image-20220704162604466</figcaption></figure><p data-tool="mdniceç¼–è¾‘å™¨">æ€»ä½“æ¥çœ‹<code>mlr3</code>å’Œ<code>tidymodels</code>ç›¸æ¯”æœ‰ä¼˜åŠ¿ä¹Ÿæœ‰åŠ£åŠ¿ï¼ŒåŸºæœ¬æ­¥éª¤å¤§åŒå°å¼‚ï¼Œé™¤äº†é¢„å¤„ç†æ­¥éª¤æ¯”è¾ƒå¤æ‚å¤–ï¼Œå…¶ä»–åœ°æ–¹éƒ½æ¯”è¾ƒç®€å•~</p><p data-tool="mdniceç¼–è¾‘å™¨">åˆå­¦è€…è¿˜æ˜¯æ¨èä½¿ç”¨<code>tidymodels</code>ï¼Œç†Ÿæ‚‰äº†å¯ä»¥è¯•ä¸€ä¸‹<code>mlr3</code>ï¼Œé›†æˆåŒ–ç¨‹åº¦æ›´é«˜ï¼Œç›®å‰ä¹Ÿæ›´åŠ ç¨³å®šï¼Œ<code>tidymodels</code>ç›®å‰è¿˜å¤„äºå¿«é€Ÿå¼€å‘ä¸­ï¼Œç»å¸¸å‡ºç°å„ç§å°é—®é¢˜ï¼Œä½†æ˜¯è¯´æ˜æ–‡æ¡£æ¯”è¾ƒè¯¦ç»†ã€‚</p><p data-tool="mdniceç¼–è¾‘å™¨"><code>mlr3</code>ç›¸æ¯”ä¹‹ä¸‹æ›´ç¨³å®šä¸€äº›ï¼Œé€Ÿåº¦æ˜æ˜¾æ›´å¿«ï¼å°¤å…¶æ˜¯æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼ä½†æ˜¯<code>mlr3</code>çš„è¯´æ˜æ–‡æ¡£å¹¶ä¸æ˜¯å¾ˆè¯¦ç»†ï¼Œåªæœ‰<code>mlr3 book</code>ï¼Œè€Œä¸”å¾ˆå¤šç”¨æ³•å¹¶æ²¡æœ‰ä»‹ç»ï¼ç»å¸¸å¾—è‡ªå·±ç¢ç£¨ã€‚</p><p data-tool="mdniceç¼–è¾‘å™¨"><em>mlr3 bookä¸­æ–‡ç¿»è¯‘ç‰ˆ</em> å¯ä»¥ç¿»çœ‹æˆ‘ä¹‹å‰çš„æ¨æ–‡ï¼</p></section><p data-tool="mdniceç¼–è¾‘å™¨"><br></p></section><p>è·å–ä»Šæ—¥æ¼”ç¤ºæ•°æ®è¯·åŠ QQç¾¤~<br></p></section><section data-role="paragraph"><p><br></p><p><br></p></section></section><hr><section data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com"><p data-tool="mdniceç¼–è¾‘å™¨"><span>è·å–æ›´å¤šä¿¡æ¯ï¼Œæ¬¢è¿åŠ å…¥ğŸ§<strong>QQäº¤æµç¾¤ï¼š613637742</strong></span></p><hr></section><section data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com"><blockquote data-tool="mdniceç¼–è¾‘å™¨"><span>â€œ</span><p>åŒ»å­¦å’Œç”Ÿä¿¡ç¬”è®°ï¼Œä¸“æ³¨Rè¯­è¨€åœ¨ä¸´åºŠåŒ»å­¦ä¸­çš„ä½¿ç”¨ã€Rè¯­è¨€æ•°æ®åˆ†æå’Œå¯è§†åŒ–ã€‚ä¸»è¦åˆ†äº«Rè¯­è¨€åš<strong>åŒ»å­¦ç»Ÿè®¡å­¦ã€metaåˆ†æã€ç½‘ç»œè¯ç†å­¦ã€ä¸´åºŠé¢„æµ‹æ¨¡å‹ã€æœºå™¨å­¦ä¹ ã€ç”Ÿç‰©ä¿¡æ¯å­¦</strong>ç­‰ã€‚</p></blockquote></section><section powered-by="xmyeditor.com"><section powered-by="xmyeditor.com"><section powered-by="xmyeditor.com"><section powered-by="xmyeditor.com"><br></section></section></section><section powered-by="xmyeditor.com"><p><span><strong>å¾€æœŸå›é¡¾</strong></span></p></section><section data-type="lspecial01" data-tools="å°èš‚èšç¼–è¾‘å™¨" powered-by="xmyeditor.com"><section><section><a href="http://mp.weixin.qq.com/s?__biz=MzUzOTQzNzU0NA==&amp;mid=2247487478&amp;idx=1&amp;sn=00e6100eaa5f69561b1ed1fa5698ea73&amp;chksm=fac93f71cdbeb667b5fd615644003034ad4cb8baf588b17158731a440261776141e49bb2ce42&amp;scene=21#wechat_redirect" data-linktype="1"><section><section><section data-mid=""><span data-positionback="static"><img data-ratio="0.42407407407407405" data-type="jpeg" data-w="1080" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84RicgutuvDUDyekHLbhsXR8E2Nc5G5TU2WDr1fRnPb71RQVsrPEG2s1Nvard7PlVZtVnxL8n6I46OEQ/640?wx_fmt=jpeg" src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84RicgutuvDUDyekHLbhsXR8E2Nc5G5TU2WDr1fRnPb71RQVsrPEG2s1Nvard7PlVZtVnxL8n6I46OEQ/640?wx_fmt=jpeg"></span></section><section data-mid=""><p>Rè¯­è¨€æœºå™¨å­¦ä¹ RåŒ…ï¼š<em>mlr</em>3ï¼ˆåˆè¾‘ï¼‰</p></section></section></section></a></section><p><br></p><section><a href="http://mp.weixin.qq.com/s?__biz=MzUzOTQzNzU0NA==&amp;mid=2247487500&amp;idx=1&amp;sn=933498b9dbaf397436d4454c3629b80a&amp;chksm=fac9208bcdbea99d413c4534a537f5e6db28028103c0b06de8827cf4d61f71c66f04e085c0c6&amp;scene=21#wechat_redirect" data-linktype="1"><section><section><section data-mid=""><span data-positionback="static"><img data-ratio="0.4257142857142857" data-type="jpeg" data-w="700" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84R8WaicBO28vlYGAt1ybWUWSWxVCoVtO1lysYibUFiaBpcBDdOsInRia2s4RN5pZWhKJ2IWAmJSSrvKKdw/640?wx_fmt=jpeg" src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84R8WaicBO28vlYGAt1ybWUWSWxVCoVtO1lysYibUFiaBpcBDdOsInRia2s4RN5pZWhKJ2IWAmJSSrvKKdw/640?wx_fmt=jpeg"></span></section><section data-mid=""><p><em>mlr</em>3å®æˆ˜ï¼šå†³ç­–æ ‘å’Œxgboosté¢„æµ‹æˆ¿ä»·</p></section></section></section></a></section><p><br></p><section><a href="http://mp.weixin.qq.com/s?__biz=MzUzOTQzNzU0NA==&amp;mid=2247487676&amp;idx=1&amp;sn=3d61fe3f3f629dcd3dd2a5076ca7e50e&amp;chksm=fac9203bcdbea92d3bd9e95077669bf0b88077f0c723a5cdbf60ab9eb544a01322a0ce6a8ef2&amp;scene=21#wechat_redirect" data-linktype="1"><section><section><section data-mid=""><span data-positionback="static"><img data-ratio="0.42444444444444446" data-type="jpeg" data-w="900" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84RicuxPxudRMeFuHpoRZskGfDwOL8t8UiakiaJJJqwDQpeoCLtx5Iv4DMNic9dwY0lvzsnsryWwibAtudYw/640?wx_fmt=jpeg" src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84RicuxPxudRMeFuHpoRZskGfDwOL8t8UiakiaJJJqwDQpeoCLtx5Iv4DMNic9dwY0lvzsnsryWwibAtudYw/640?wx_fmt=jpeg"></span></section><section data-mid=""><p><em>åº”ç”¨é¢„æµ‹å»ºæ¨¡</em>ï¼šå¼€ç¯‡</p></section></section></section></a></section><p><br></p><section><a href="http://mp.weixin.qq.com/s?__biz=MzUzOTQzNzU0NA==&amp;mid=2247487843&amp;idx=1&amp;sn=cdf57eef3e0b1cb2d08b7c33bc630083&amp;chksm=fac921e4cdbea8f24b01bc4d101ce966f28dd8be0bd488aa1fc079ec55f807c834150f8d96b3&amp;scene=21#wechat_redirect" data-linktype="1"><section><section><section data-mid=""><span data-positionback="static"><img data-ratio="0.42444444444444446" data-type="jpeg" data-w="900" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84Rice3cUwJ4Yp4BZyvWRQlDYhTMk9TxJibEclChvBvOicbkIuCpAKB7oteVXibf5MUZINgAKvJZbeqK5nA/640?wx_fmt=jpeg" src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84Rice3cUwJ4Yp4BZyvWRQlDYhTMk9TxJibEclChvBvOicbkIuCpAKB7oteVXibf5MUZINgAKvJZbeqK5nA/640?wx_fmt=jpeg"></span></section><section data-mid=""><p><em>åº”ç”¨é¢„æµ‹å»ºæ¨¡</em>ï¼šè¿‡åº¦æ‹Ÿåˆå’Œæ¨¡å‹è°ƒä¼˜</p></section></section></section></a></section><p><br></p><section><a href="http://mp.weixin.qq.com/s?__biz=MzUzOTQzNzU0NA==&amp;mid=2247488038&amp;idx=1&amp;sn=a1b52cbac0634c58b77bd41425960458&amp;chksm=fac922a1cdbeabb79379cbb4dc575bd7d18d780b0e7a34114c2b60c7f742568006e89610c1ce&amp;scene=21#wechat_redirect" data-linktype="1"><section><section><section data-mid=""><span data-positionback="static"><img data-ratio="0.42444444444444446" data-type="jpeg" data-w="900" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84Rice3cUwJ4Yp4BZyvWRQlDYhTMk9TxJibEclChvBvOicbkIuCpAKB7oteVXibf5MUZINgAKvJZbeqK5nA/640?wx_fmt=jpeg" src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84Rice3cUwJ4Yp4BZyvWRQlDYhTMk9TxJibEclChvBvOicbkIuCpAKB7oteVXibf5MUZINgAKvJZbeqK5nA/640?wx_fmt=jpeg"></span></section><section data-mid=""><p><em>åº”ç”¨é¢„æµ‹å»ºæ¨¡</em>ï¼šè¡¡é‡å›å½’æ¨¡å‹çš„æ•ˆæœ</p></section></section></section></a></section><p><br></p><section><a href="http://mp.weixin.qq.com/s?__biz=MzUzOTQzNzU0NA==&amp;mid=2247485910&amp;idx=1&amp;sn=9118abd45acd8db275a5c5af4af156df&amp;chksm=fac93951cdbeb047a85fce74f912743ec02cf745e2b09bda99ccfa55365dd1a4a98cd37ccfdf&amp;scene=21#wechat_redirect" data-linktype="1"><section><section><section data-mid=""><span data-positionback="static"><img data-ratio="0.425" data-type="jpeg" data-w="1080" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84R8iaCKfThladL1g6icfEf0vYq89G1TAR3rFW46sXXqf4nyFySaOgoAwwI36Ib3ODiagc4XYJ59ibQ6Xnw/640?wx_fmt=jpeg" src="https://mmbiz.qpic.cn/mmbiz_jpg/tpAC6lR84R8iaCKfThladL1g6icfEf0vYq89G1TAR3rFW46sXXqf4nyFySaOgoAwwI36Ib3ODiagc4XYJ59ibQ6Xnw/640?wx_fmt=jpeg"></span></section><section data-mid=""><p>ä½¿ç”¨<em>tinyarray</em>ç®€åŒ–ä½ çš„TCGAåˆ†ææµç¨‹ï¼</p></section></section></section></a></section><p><br></p></section></section></section></section></section></section></section></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/0JJP25WugnThVvLjRkF_Wg",target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>
