---
title: "conda的安装与使用"
date: 2024-12-16T00:14:10Z
draft: ["false"]
tags: [
  "fetched",
  "宇言生信"
]
categories: ["Acdemic"]
---
conda的安装与使用 by 宇言生信
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><blockquote><p><span leaf=""><span textstyle="">学习笔记总结于『生信技能树』马拉松课程</span></span></p></blockquote><h1 data-tool="mdnice编辑器"><span></span><span><span leaf=""><span textstyle="">在正式安装conda之前，请先了解这两篇：</span><a href="https://mp.weixin.qq.com/s?__biz=MzkxMjU0MjM0NQ==&amp;mid=2247486689&amp;idx=1&amp;sn=179d284d9d6c3742b295714d6b507b0f&amp;scene=21#wechat_redirect" textvalue="conda安装软件前的准备——1.配置conda频道" data-itemshowtype="0" target="_blank" linktype="text" data-linktype="2"><span textstyle="">conda安装软件前的准备——1.配置conda频道</span></a><span textstyle="">；</span><a href="https://mp.weixin.qq.com/s?__biz=MzkxMjU0MjM0NQ==&amp;mid=2247486738&amp;idx=1&amp;sn=55c925b037c6701d080a0307b0c44ff2&amp;scene=21#wechat_redirect" textvalue="conda安装软件前的准备——2.创建独立小环境" data-itemshowtype="0" target="_blank" linktype="text" data-linktype="2"><span textstyle="">conda安装软件前的准备——2.创建独立小环境</span></a></span></span></h1><h1 data-tool="mdnice编辑器"><span><span leaf="">一、conda的安装</span></span><span></span></h1><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">1.安装单个软件</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">安装软件，以</span><code><span leaf="">fastqc</span></code><span leaf="">为例</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf=""># 先激活小环境</span></span><br><span leaf="">conda activate rna</span><br><span><span leaf=""># conda install &lt;software&gt;</span></span><br><span leaf="">conda install fastqc</span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">运行命令后，如图1所示，输入y并回车</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003157" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zWiaVMvLGWDcH5ibcmX0fsA3ibEPnI9nj15yhu7gKiaJzdAXng20f2y49icg/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zWiaVMvLGWDcH5ibcmX0fsA3ibEPnI9nj15yhu7gKiaJzdAXng20f2y49icg/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图1</span></figcaption></figure><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">2.安装多个软件</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">conda还可以一次性安装多个软件</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda install -y sra-tools fastqc trim-galore hisat2 subread multiqc samtools salmon fastp  </span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">-y：如图1，每次安装一个软件，都会问一遍，然后我们回复y。当一次性安装多个软件，用该函数相当于统一全部回复y</span></p><p data-tool="mdnice编辑器"><span leaf="">但同时安装多个软件容易遇到报错，因为会对依赖包进行一个类似于找最大公约数的操作。conda需要找到一个版本，这个版本既要满足软件包A的依赖，也要满足软件包B的依赖，就像找到一个数的公约数一样。如果conda找不到一个所有软件包都能接受的依赖版本，就会出现报错</span></p><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">3.检查是否安装成功</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">如果安装成功，会出现3个done，如图2所示</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003156" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2z8MiacqXiaEqrI0Qp2ro3ZMVCMjlfHM8NIqgG6e7H0DPkLhsnOhibdUAMQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2z8MiacqXiaEqrI0Qp2ro3ZMVCMjlfHM8NIqgG6e7H0DPkLhsnOhibdUAMQ/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图2</span></figcaption></figure><p data-tool="mdnice编辑器"><span leaf="">此外，如图3所示能成功调用软件的帮助文档，也说明下载成功；反之则下载失败，此时重新下载即可</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">fastqc --</span><span><span leaf="">help</span></span><br></code></pre><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003158" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zWicqqrCmnk6UTaOEjA32kL9DEwvQ5OclOn32MZYftUiabg01Rtv0elmg/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zWicqqrCmnk6UTaOEjA32kL9DEwvQ5OclOn32MZYftUiabg01Rtv0elmg/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图3</span></figcaption></figure><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">4.如何指定软件的安装版本</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">如果不指定版本，大概率conda会默认安装该软件的最新版</span></p><p data-tool="mdnice编辑器"><span leaf="">如果要安装旧版本：</span></p><h3 data-tool="mdnice编辑器"><span></span><span><span leaf="">①先看看有哪些可安装的版本</span></span><span></span></h3><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda search fastqc</span><br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span leaf="">②安装指定版本的软件</span></span><span></span></h3><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda install fastqc=0.11.7</span><br><span leaf="">conda install -y fastqc=0.11.7 </span><span><span leaf="">## 添加-y参数来跳过确认步骤</span></span><br></code></pre><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">5.安装成功，但无法调用软件</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">可能的常见原因：安装的软件包其名称，和实际调用的程序，两者不一定是同名的（可以理解为一支乐队名叫mygo，但乐队成员没有一个人叫mygo）</span></p><p data-tool="mdnice编辑器"><span leaf="">例如：</span><br><span leaf="">安装的是</span><code><span leaf="">subread</span></code><span leaf="">，调用的是其软件包里的子程序</span><code><span leaf="">featureCounts</span></code><span leaf="">；</span><br><span leaf="">安装的是</span><code><span leaf="">sra-tools</span></code><span leaf="">，调用的是</span><code><span leaf="">prefetch</span></code><span leaf="">；</span><br><span leaf="">安装的是</span><code><span leaf="">blast</span></code><span leaf="">，调用的是</span><code><span leaf="">blastp</span></code></p><p data-tool="mdnice编辑器"><span leaf="">特殊情况：</span><br><span leaf="">安装的是</span><code><span leaf="">trim-galore</span></code><span leaf="">，调用的是</span><code><span leaf="">trim_galore</span></code><span leaf="">（conda某些奇怪的设定导致不能用下划线）；</span><br><span leaf="">安装的是</span><code><span leaf="">ensembl-vep</span></code><span leaf="">，调用的是</span><code><span leaf="">vep</span></code><span leaf="">；</span><br><span leaf="">安装的是</span><code><span leaf="">sra-tools</span></code><span leaf="">， 调用的是</span><code><span leaf="">sratoolkit</span></code></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003160" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zKpaFa8VCb2YatDlO8icCg1gwT2AeCpXfRtEaER78da8FwEoVMrPX61A/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zKpaFa8VCb2YatDlO8icCg1gwT2AeCpXfRtEaER78da8FwEoVMrPX61A/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图4</span></figcaption></figure><h1 data-tool="mdnice编辑器"><span></span><span><span leaf="">二、conda的使用</span></span><span></span></h1><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">1.查看conda环境中已安装的软件</span></span><span></span></h2><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda list</span><br></code></pre><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003159" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zRpWFRhWQnBGOgjT2U4s0nbRCCgCSy3KqYyhYV0m96okC2ZtmNY7m3g/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zRpWFRhWQnBGOgjT2U4s0nbRCCgCSy3KqYyhYV0m96okC2ZtmNY7m3g/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图5</span></figcaption></figure><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">2.查看符合正则表达式的软件</span></span><span></span></h2><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf=""># 假设有一个包叫fastq什么什么，但具体名字忘记了，可以如下查询</span></span><br><span><span leaf=""># conda list fastq*</span></span><br><span leaf="">conda list fastq</span><br></code></pre><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003162" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zFKMI4RkqaNqnvG5b0mqUiaKbBvaj29Br9Sv4RBHpkIMfDsOe0JSadGg/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zFKMI4RkqaNqnvG5b0mqUiaKbBvaj29Br9Sv4RBHpkIMfDsOe0JSadGg/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图6</span></figcaption></figure><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">3.查看指定环境的软件</span></span><span></span></h2><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda list -n rna</span><br></code></pre><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003163" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2z7fOHTUoM1pGAG1BvHm9GEw39oOAOwvwbSkuajBQcj1tVvYUAII0krw/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2z7fOHTUoM1pGAG1BvHm9GEw39oOAOwvwbSkuajBQcj1tVvYUAII0krw/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图7</span></figcaption></figure><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">4.删除软件</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">先强调一下，如果某个软件不用了，一般放着不管即可。如果一定要删掉，需要注意，conda可能会把其对应的依赖包也一起删掉。这些依赖包可能也是其他软件的依赖包，如此会导致其他软件不能运行</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda remove fastqc </span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">如果实在想删，可以试试如下代码；如果不指定</span><code><span leaf="">-n</span></code><span leaf="">参数，那就得进入该环境之后再进行删除操作；同样的，可以用</span><code><span leaf="">-y</span></code><span leaf="">参数来跳过"确认执行"这一步骤</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda remove -n rna fastqc</span><br></code></pre><h1 data-tool="mdnice编辑器"><span></span><span><span leaf="">三、安装软件的另一种方式：用yml文件安装</span></span><span></span></h1><p data-tool="mdnice编辑器"><span leaf="">如果我想配置一个和别人一模一样的环境，可以让别人把ta的环境配置先导出来，我再把ta导出的文件直接导入我的环境里，这就是yml文件的大概原理</span></p><p data-tool="mdnice编辑器"><span leaf="">导出当前环境：</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda env </span><span><span leaf="">export</span></span><span leaf=""> envname &gt; env.yml </span><span><span leaf=""># 跨平台均适用，Windows、Mac、Linux通用</span></span><br><span leaf="">conda list --explicit &gt; env.txt </span><span><span leaf=""># 仅限相同平台</span></span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">导入环境：</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda env create --name &lt;envname&gt; --file env.yml</span><br><span leaf="">conda create --name &lt;env&gt; --file &lt;this file&gt;</span><br></code></pre><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">演示</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">现在假设</span><code><span leaf="">aug.rna.env</span></code><span leaf="">是别人的环境配置文件，我们如图8所示，在SFTP界面把该文件拖到右边，即上传到服务器</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003165" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zFNrjaicFH8KWUByymEuziad8oNaYqtwTKRFKqMyoLu7eINaMsZmTicF0Q/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zFNrjaicFH8KWUByymEuziad8oNaYqtwTKRFKqMyoLu7eINaMsZmTicF0Q/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图8</span></figcaption></figure><p data-tool="mdnice编辑器"><span leaf="">然后如图9所示检查一下，确认上传成功</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003161" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zQNAeDbc1BsBqlCGr08ySrfIibUL7QUHNlK67OkwpkOjYxZkdGtKb4gA/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zQNAeDbc1BsBqlCGr08ySrfIibUL7QUHNlK67OkwpkOjYxZkdGtKb4gA/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图9</span></figcaption></figure><p data-tool="mdnice编辑器"><span leaf="">最后如图10所示查看</span><code><span leaf="">aug.rna.env</span></code><span leaf="">文件并运行命令，即可配置成与别人一样的环境</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">conda create --name </span><span><span leaf="">test</span></span><span leaf=""> --file aug.rna.env.txt</span><br></code></pre><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003164" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zTBunmIsic3jQzI2ywX1drcib4VmsgRYQraeCOAlGwLCOjBHbIqmHST5Q/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zTBunmIsic3jQzI2ywX1drcib4VmsgRYQraeCOAlGwLCOjBHbIqmHST5Q/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图10</span></figcaption></figure><h1 data-tool="mdnice编辑器"><span></span><span><span leaf="">总结</span></span><span></span></h1><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100003170" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zKLS58Q4ibKprwJBNkuVblXKdUDibj2Rsickwn5Tz1joYegpj4L4oAH51Q/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zKLS58Q4ibKprwJBNkuVblXKdUDibj2Rsickwn5Tz1joYegpj4L4oAH51Q/640?wx_fmt=png&amp;from=appmsg"></span><figcaption><span leaf="">图11</span></figcaption></figure><p data-tool="mdnice编辑器"><span leaf=""><br></span></p><p data-tool="mdnice编辑器"><span leaf="">谢谢观看</span></p><p data-tool="mdnice编辑器"><span leaf=""><br></span></p></section><section nodeleaf=""><img data-imgfileid="100003180" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zXRCgR4Lvic3nvoRVSFLgVQWnFtZmWVEagh1ia3peCUFdAGNF0Vdbt1sQ/640?wx_fmt=jpeg&amp;from=appmsg" data-type="jpeg" type="block" src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/A8HZFc8vBSUWCpKkUia6c4Xnfa1Uk9W2zXRCgR4Lvic3nvoRVSFLgVQWnFtZmWVEagh1ia3peCUFdAGNF0Vdbt1sQ/640?wx_fmt=jpeg&amp;from=appmsg"></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/5nOYqqD6sX2xgYoyvc-N3A",target="_blank" rel="noopener noreferrer">原文链接</a>
