---
title: "使用ggdist包用于可视化“分布”和“不确定性”"
date: 2024-12-12T23:50:30Z
draft: ["false"]
tags: [
  "fetched",
  "R 学习践行者"
]
categories: ["Acdemic"]
---
使用ggdist包用于可视化“分布”和“不确定性” by R 学习践行者
------
<div><p>    ggdist 是一个基于 ggplot2 的 R 包，专门设计用于可视化“分布”和“不确定性”，并广泛应用于频率学派和贝叶斯统计分析；该包通过一系列灵活的几何对象（geoms）和统计量（stats），帮助用户在复杂数据分析中直观地展示统计不确定性、分布形态和模型预测。</p><p><img data-imgfileid="100003821" data-ratio="0.7727272727272727" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0pibnTzsBS9miat4pTS2pfWW9SKgbDMWAzdmC2icE6SQ7F7OBb0bhEicwRw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="3300" src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0pibnTzsBS9miat4pTS2pfWW9SKgbDMWAzdmC2icE6SQ7F7OBb0bhEicwRw/640?wx_fmt=png&amp;from=appmsg"> <img data-imgfileid="100003822" data-ratio="0.7727272727272727" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0dHYYfCylp2FuqrrERpIWoNcPbCcBR2ib3XkBCiaX6NJ7C3hRaK7jFKFw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="3300" src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0dHYYfCylp2FuqrrERpIWoNcPbCcBR2ib3XkBCiaX6NJ7C3hRaK7jFKFw/640?wx_fmt=png&amp;from=appmsg"> 主要特点</p><p>1)统一的不确定性可视化：</p><p>    对于频率学派模型，ggdist 支持可视化 置信区间 或 自助法分布。</p><p>    对于贝叶斯模型，它支持通过 概率分布 来展示后验不确定性。该包与 tidybayes 包结合紧密，后者专门用于贝叶斯模型的可视化。</p><p>2)灵活的几何对象和统计量：</p><p>    slabinterval 家族：用于绘制包含点摘要（如均值、众数、分位数）及不确定性区间（如置信区间或最高密度区间）的复合几何图形。可以生成 半眼图、脊图、CCDF 条形图 等。</p><p>    dotsinterval 家族：用于创建点图（dotplot），可以选择经典的 威尔金森点图、蜜蜂群图 等布局，并自动计算点大小，避免图像超出边界。</p><p>    lineribbon 家族：用于绘制带有不确定性带的拟合线，帮助展示回归模型的拟合程度和不确定性。</p><p>3)自动化处理和可配置性：</p><p>    ggdist 提供了多种自动化的功能，比如根据数据自动计算分位点、调整点大小和间距、自动选择合适的分布绘图布局等。同时，它也允许用户通过参数设置来手动控制点间距、区间宽度等细节。</p><p>使用案例</p><ol><li><p>贝叶斯后验分布可视化</p></li></ol><p>    借助 ggdist，可以用简单的代码展示贝叶斯模型的后验分布，例如：</p><pre><code><span>library</span>(ggdist)<br><span>library</span>(tidybayes)<br><span>library</span>(ggplot2)<br><br><span># 模拟的贝叶斯后验分布</span><br>posterior &lt;- rnorm(<span>1000</span>, mean = <span>0</span>, sd = <span>1</span>)<br><br><span># 绘制后验分布及不确定性区间</span><br>ggplot(data = data.frame(x = posterior)) +<br>  stat_slabinterval(aes(x = x), .width = c(<span>.66</span>, <span>.95</span>)) +<br>  labs(title = <span>"贝叶斯后验分布可视化"</span>)+<br>  theme_bw()</code></pre><p><img data-imgfileid="100003818" data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0aiaFU6sHWib52lhn4VRglD7ex0NE2hyUxwoRXJuyjD8c9nwRo6hNFlRw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1344" width="672" src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0aiaFU6sHWib52lhn4VRglD7ex0NE2hyUxwoRXJuyjD8c9nwRo6hNFlRw/640?wx_fmt=png&amp;from=appmsg"></p><p>在这个例子中，stat_slabinterval()自动绘制了后验分布及其对应的不确定性区间。</p><ol start="2"><li><p>自助法置信分布可视化</p></li></ol><p>    频率学派的置信区间（或自助法）也可以通过 ggdist 进行可视化：</p><pre><code><span># 模拟数据和自助法抽样</span><br>data &lt;- rnorm(<span>100</span>)<br>bootstrap_samples &lt;- replicate(<span>1000</span>, sample(data, replace = <span>TRUE</span>))<br><br><span># 计算自助法均值分布</span><br>bootstrap_means &lt;- apply(bootstrap_samples, <span>2</span>, mean)<br><br><span># 绘制自助法分布及置信区间</span><br>ggplot(data = data.frame(mean = bootstrap_means)) +<br>  stat_slabinterval(aes(x = mean), .width = c(<span>.66</span>, <span>.95</span>)) +<br>  labs(title = <span>"自助法置信区间可视化"</span>)+<br>  theme_bw()</code></pre><p><img data-imgfileid="100003819" data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0dxgGjrfIiaiaiaJBXvsC7eNiaRbpKO6LOQeicuB0au99GKjcpXcaxc5GVqg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1344" width="672" src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0dxgGjrfIiaiaiaJBXvsC7eNiaRbpKO6LOQeicuB0au99GKjcpXcaxc5GVqg/640?wx_fmt=png&amp;from=appmsg"> 这个例子展示了通过自助法生成的置信分布，带有 66% 和 95% 置信区间的图形。</p><ol start="3"><li><p>威尔金森点图</p></li></ol><p>    点 + 区间几何体 (dotsinterval) 是 ggdist 的另一亮点，能够轻松生成经典的点图。比如，以下代码绘制了一个带有点布局的分布：</p><pre><code><span># 模拟数据</span><br>data &lt;- rnorm(<span>100</span>, mean = <span>0</span>, sd = <span>1</span>)<br><br><span># 使用 Wilkinson 点图布局绘制点+区间图</span><br>ggplot(data = data.frame(x = data)) +<br>  stat_dotsinterval(aes(x = x), layout = <span>"weave"</span>, side = <span>"both"</span>) +<br>  labs(title = <span>"威尔金森点图"</span>)+<br>  theme_bw()</code></pre><p><img data-imgfileid="100003820" data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0YhQJMhW3WSAWGgKD0afcMHu68RV3ZoDsyxQcdguUPM5dkr8DY4ZkLw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1344" width="672" src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50n966icLuAVOoAeAsy621Eu0YhQJMhW3WSAWGgKD0afcMHu68RV3ZoDsyxQcdguUPM5dkr8DY4ZkLw/640?wx_fmt=png&amp;from=appmsg">     在这个例子中，stat_dotsinterval 使用 编织布局 (weave layout)，生成了一个点图，该点图中的点大小和位置已自动调整。</p><p>适用场景</p><p>ggdist 特别适合以下几类分析：</p><p>    1)分布形态展示：适合展示单变量和多变量分布，例如直观呈现后验分布、置信分布、或样本分布的形状。</p><p>    2)不确定性可视化：支持通过多种方式展示统计不确定性，例如置信区间、贝叶斯后验分布的最高密度区间等。</p><p>    3)模型预测与拟合：可以用于展示回归模型的拟合效果，以及模型预测带来的不确定性。</p><p>总结</p><p>    ggdist 提供了非常灵活、强大且直观的工具，帮助用户在频率学派和贝叶斯统计分析中轻松进行分布和不确定性可视化。无论是复杂的统计模型，还是简单的数据分布，ggdist 都能通过简洁的语法和丰富的可视化选项，提供优雅的图形解决方案。</p><p>参考资料：https://mjskay.github.io/ggdist/index.html</p><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/BIYPmAJkpT0bJbLT5Mx1nQ",target="_blank" rel="noopener noreferrer">原文链接</a>
