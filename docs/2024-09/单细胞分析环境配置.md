---
title: "单细胞分析环境配置"
date: 2024-09-21T02:20:42Z
draft: ["false"]
tags: [
  "fetched",
  "生信菜鸟团"
]
categories: ["Acdemic"]
---
单细胞分析环境配置 by 生信菜鸟团
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span></span><span>写在开头</span><span></span></h3><p data-tool="mdnice编辑器">在九月的某一天，<strong>登录服务器惊喜的发现服务器上面的R版本也已经更新到4.4.0</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100043902" data-ratio="0.9990740740740741" data-src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwtO3X3fQHP6Y1l0ZKnYoThudSmOLnh1HfLT08VKxkzoxCVg06m5SqHQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwtO3X3fQHP6Y1l0ZKnYoThudSmOLnh1HfLT08VKxkzoxCVg06m5SqHQ/640?wx_fmt=png&amp;from=appmsg"></figure><p data-tool="mdnice编辑器">然后发现在月初的时候，咱们服务器的管理员，就已经<strong>提醒过大家会更新服务器上的R语言版本，并且整理R语言更新之后的帮助文档，整理了一些注意事项</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100043904" data-ratio="1.924074074074074" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwXY8LptdtttPeGQALVtoxnpNEc39EKltBLBX3YHhIwSlDpUMguoSEDw/640?wx_fmt=jpeg&amp;from=appmsg" data-type="jpeg" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_jpg/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwXY8LptdtttPeGQALVtoxnpNEc39EKltBLBX3YHhIwSlDpUMguoSEDw/640?wx_fmt=jpeg&amp;from=appmsg"></figure><p data-tool="mdnice编辑器">刚开始登录更新完的服务器账号，看到R包还没有很多，还<strong>想着说有机会给大家整理一下如何配置服务器的单细胞分析环境。</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100043903" data-ratio="0.9296296296296296" data-src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwicAdLCtMVNY5xExqVjHFQOTIXEqt1DEaddQ5f3zIFibdESdzJO9vw8vg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwicAdLCtMVNY5xExqVjHFQOTIXEqt1DEaddQ5f3zIFibdESdzJO9vw8vg/640?wx_fmt=png&amp;from=appmsg"></figure><p data-tool="mdnice编辑器">结果就是<strong>拖延症小谢拖拖拖，拖到勤劳的同事把常用的R包都更新完了。。。</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100043901" data-ratio="0.23425925925925925" data-src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwXXUSicJVz9uJyHOmmR6FrGaxjN2LWiar4zicLv8RWjgV06OiaoAF4VfzOQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwXXUSicJVz9uJyHOmmR6FrGaxjN2LWiar4zicLv8RWjgV06OiaoAF4VfzOQ/640?wx_fmt=png&amp;from=appmsg"></figure><p data-tool="mdnice编辑器">甚至贴心的安装好了<strong>SeuratData！</strong>以及celldex这些配套的包。只能说<strong>给咱们的离线管理员点个大大的赞！</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100043900" data-ratio="0.23333333333333334" data-src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwGWUNzpLiaeMxvaAoEXZ15Dc6cj4DWBm7iaX7n4ChuSxhMCcfx7iaouIVg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwGWUNzpLiaeMxvaAoEXZ15Dc6cj4DWBm7iaX7n4ChuSxhMCcfx7iaouIVg/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span></span><span>关于服务器使用体会</span><span></span></h3><p data-tool="mdnice编辑器">去年的时候就给大家分享过<a href="https://mp.weixin.qq.com/s?__biz=MzUzMTEwODk0Ng==&amp;mid=2247518106&amp;idx=1&amp;sn=48d7a95b251c8165e21d87d33e1c8188&amp;scene=21#wechat_redirect" data-linktype="2">网页版Rstudio安装与使用</a>,那是当时<strong>刚开始从我的小破电脑转到服务器开始去分析</strong>。</p><p data-tool="mdnice编辑器">后来<strong>熟悉之后，已经可以使用服务器从下载单细胞数据，到跑完全部分析流程了！</strong>——<a href="https://mp.weixin.qq.com/s?__biz=MzUzMTEwODk0Ng==&amp;mid=2247522212&amp;idx=1&amp;sn=f4db7ab8ebed4b65997e932a43ae3aba&amp;scene=21#wechat_redirect" data-linktype="2">基于Rstudio-server下载并分析单细胞数据</a></p><p data-tool="mdnice编辑器">服务器一直用的是<strong>生信技能树团队的共享服务器</strong>——<a href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247528363&amp;idx=1&amp;sn=5e02f3e9b2e148191e23ebc2c0d780e7&amp;scene=21#wechat_redirect" data-linktype="2">2024的共享服务器交个朋友福利价仍然是800</a></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100043909" data-ratio="2.175" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwpwNGgQzhLq9VMyZ9LUnO7kV05iav06BgWWC76nc39MkSxrpa7z85lVQ/640?wx_fmt=jpeg&amp;from=appmsg" data-type="jpeg" data-w="800" src="https://mmbiz.qpic.cn/mmbiz_jpg/iaRJcrq2Los99ZexvzAhcU2fV6a0LfuqwpwNGgQzhLq9VMyZ9LUnO7kV05iav06BgWWC76nc39MkSxrpa7z85lVQ/640?wx_fmt=jpeg&amp;from=appmsg"></figure><p data-tool="mdnice编辑器"><strong>有专门的服务器管理群以及管理员，会根据用户的需求酌情更新R语言版本以及关键R包的版本，比如我们的服务器里面也很早就在使用V5版本的seurat包！</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100043908" data-ratio="1.217201166180758" data-src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0Lfuqw0ibRx6NedVxvD712pqBs7s8qdF7bpuklwpOKYfCxzweNzjY5uVJcXdw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="686" src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2Los99ZexvzAhcU2fV6a0Lfuqw0ibRx6NedVxvD712pqBs7s8qdF7bpuklwpOKYfCxzweNzjY5uVJcXdw/640?wx_fmt=png&amp;from=appmsg"><figcaption>更新完的答疑文档</figcaption></figure><h3 data-tool="mdnice编辑器"><span></span><span></span><span>单细胞分析环境配置</span><span></span></h3><p data-tool="mdnice编辑器">虽然没赶上热乎的服务器环境配置，但是之前<strong>更新自己本地电脑的R语言的时候，就整理了一下单细胞分析常用的R包。</strong></p><p data-tool="mdnice编辑器">如果大家需要<strong>配置自己本地的单细胞分析环境的话，可以去批量安装一下这些R包</strong>。（如果有遗漏掉，还请大家补充hhh）</p><pre data-tool="mdnice编辑器"><span></span><code><span>#设置镜像</span><br>options(<span>"repos"</span>=<span>"https://mirrors.ustc.edu.cn/CRAN/"</span>)<br>options(BioC_mirror=<span>"https://mirrors.ustc.edu.cn/bioc/"</span>)<br><br><span>#安装BiocManager</span><br><span>if</span>(!require(<span>"BiocManager"</span>)) install.packages(<span>"BiocManager"</span>,update = F,ask = F)<br><br><span>#批量安装R包</span><br>cran_packages &lt;- c(<span>'Matrix'</span>,<br>                   <span>'tibble'</span>,<br>                   <span>'dplyr'</span>,<br>                   <span>'stringr'</span>,<br>                   <span>'ggplot2'</span>,<br>                   <span>'ggpubr'</span>,<br>                   <span>"ggrepel"</span>,<br>                   <span>"ggsci"</span>,<br>                   <span>"gplots"</span>,<br>                   <span>'factoextra'</span>,<br>                   <span>'FactoMineR'</span>,<br>                   <span>'devtools'</span>,<br>                   <span>'cowplot'</span>,<br>                   <span>'patchwork'</span>,<br>                   <span>"pheatmap"</span>,<br>                   <span>'basetheme'</span>,<br>                   <span>'paletteer'</span>,<br>                   <span>'AnnoProbe'</span>,<br>                   <span>'ggthemes'</span>,<br>                   <span>'VennDiagram'</span>,<br>                   <span>'tinyarray'</span>) <br><br>Biocductor_packages &lt;- c(<span>'ReactomePA'</span>,<br>                         <span>'COSG'</span>,<br>                         <span>"Seurat"</span>,<br>                         <span>'EnhancedVolcano'</span>,<br>                         <span>"Seurat"</span>,<br>                         <span>"TENxPBMCData"</span>,<br>                         <span>"GSEABase"</span>,<br>                         <span>"GSVA"</span>,<br>                         <span>"clusterProfiler"</span>,<br>                         <span>"org.Hs.eg.db"</span>,<br>                         <span>"UpSetR"</span>,<br>                         <span>"clustree"</span>,<br>                         <span>"conos"</span>,<br>                         <span>"cowplot"</span>,<br>                         <span>"dorothea"</span>,<br>                         <span>"entropy"</span>,<br>                         <span>"future"</span>,<br>                         <span>"msigdbr"</span>,<br>                         <span>"pagoda2"</span>,<br>                         <span>"scRNAseq"</span>,<br>                         <span>"scRNAstat"</span>,<br>                         <span>"tidyverse"</span>,<br>                         <span>"viper"</span>,<br>                         <span>"progeny"</span>,<br>                         <span>"preprocessCore"</span>,<br>                         <span>"enrichplot"</span>)<br><br><span>for</span> (pkg <span>in</span> cran_packages){<br>  <span>if</span> (! require(pkg,character.only=T) ) {<br>    install.packages(pkg,ask = F,update = F)<br>    require(pkg,character.only=T) <br>  }<br>}<br><br><br><span>for</span> (pkg <span>in</span> Biocductor_packages){<br>  <span>if</span> (! require(pkg,character.only=T) ) {<br>    BiocManager::install(pkg,ask = F,update = F)<br>    require(pkg,character.only=T) <br>  }<br>}<br><br><span>#安装COSG包</span><br>remotes::install_github(<span>"genecell/COSGR"</span>)<br><span>#Downloading GitHub repo genecell/COSGR@HEAD</span><br><span>#Error in utils::download.file(url, path, method = method, quiet = quiet,  : </span><br><span>#                                无法打开URL'https://api.github.com/repos/genecell/COSGR/tarball/HEAD'</span><br><br>remotes::install_local(<span>"./genecell-COSGR-v0.9.0-1-gc8f3f53.tar.gz"</span>,upgrade = F,dependencies = T)<br><br><br><span>#前面的所有提示和报错都先不要管。主要看这里</span><br><span>for</span> (pkg <span>in</span> c(Biocductor_packages,cran_packages)){<br>  require(pkg,character.only=T) <br>}<br><span>#没有任何提示就是成功了，如果有warning xx包不存在，用library检查一下。</span><br><br><span>#library报错，就单独安装。</span><br></code></pre><h4 data-tool="mdnice编辑器"><span></span><span>COSGR包安装</span><span></span></h4><p data-tool="mdnice编辑器">在批量安装里面，COSG这个用来替代FindAllmarker的包比较特殊一些</p><ul data-tool="mdnice编辑器"><li><section>因为它是<strong>Github上面的包，不一定能顺利下载到本地</strong></section></li><li><section>调用的时候它的名字是COSG，但是在Github上它是COSGR，所以<strong>安装的时候需要输入正确的名字</strong>——<code>remotes::install_github("genecell/COSGR")</code></section></li><li><section>使用命令下载不成功的话，<strong>根据报错信息提供的网址，将R包下载到本地之后，从本地导入即可</strong></section></li></ul><h3 data-tool="mdnice编辑器"><span></span><span></span><span>R包安装系列</span><span></span></h3><p data-tool="mdnice编辑器">之前就基于<a href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247533037&amp;idx=2&amp;sn=e6dd07e9339a84c8cbad2a9d6b42c8ca&amp;scene=21#wechat_redirect" data-linktype="2">生信入门&amp;数据挖掘线上直播课</a>给大家整理了R包安装的系列推文：</p><ul data-tool="mdnice编辑器"><li><section><a href="https://mp.weixin.qq.com/s?__biz=MzUzMTEwODk0Ng==&amp;mid=2247516449&amp;idx=1&amp;sn=64b96653abb9629eadc6a28dea2d0702&amp;scene=21#wechat_redirect" data-linktype="2">R包安装方式以及Github包安装报错解决</a></section></li><li><section><a href="https://mp.weixin.qq.com/s?__biz=MzUzMTEwODk0Ng==&amp;mid=2247520501&amp;idx=1&amp;sn=8f422597571116fb4217626f0e58ae60&amp;scene=21#wechat_redirect" data-linktype="2">R包安装常见问题及解决方法</a></section></li><li><section><a href="https://mp.weixin.qq.com/s?__biz=MzUzMTEwODk0Ng==&amp;mid=2247521643&amp;idx=1&amp;sn=15188f18c5d7f82aba31aa8d7fb4cb9c&amp;scene=21#wechat_redirect" data-linktype="2">解决报错问题的思维步骤</a></section></li></ul><p data-tool="mdnice编辑器">大家<strong>如果在批量安装单细胞相关的R包遇到问题的时候，可以搜索解决一下。</strong></p></section><p><br></p><p><mp-style-type data-value="10000"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/sfILJFOo2YxJEajWHLS5hQ",target="_blank" rel="noopener noreferrer">原文链接</a>
