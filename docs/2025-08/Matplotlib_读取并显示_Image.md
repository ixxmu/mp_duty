---
title: "Matplotlib 读取并显示 Image"
date: 2025-08-29T23:48:15Z
draft: ["false"]
tags: [
  "fetched",
  "生信小博士"
]
categories: ["Acdemic"]
---
Matplotlib 读取并显示 Image by 生信小博士
------
<div><h1 data-start="106" data-end="125" data-pm-slice="0 0 []"><span leaf=""><span textstyle="">1) 启动与后端（backend）</span></span></h1><p data-start="127" data-end="167"><strong data-start="127" data-end="167"><span leaf="">IPython/Jupyter 与 </span><code data-start="147" data-end="160"><span leaf="">%matplotlib</span></code><span leaf=""> 魔法命令</span></strong></p><ul><li><p data-start="171" data-end="217"><span leaf="">在终端启动 IPython，或在 Jupyter Notebook/ Lab 里新建笔记本。</span></p></li><li><p data-start="220" data-end="254"><span leaf="">连接 GUI 事件循环（告诉 IPython 用什么后端显示图像）：</span></p></li><ul><li><p data-start="259" data-end="322"><code data-start="259" data-end="280"><span leaf="">%%matplotlib inline</span></code><span leaf="">：</span><strong data-start="281" data-end="287"><span leaf="">内嵌</span></strong><span leaf="">在笔记本输出区；</span><strong data-start="295" data-end="313"><span leaf="">已渲染的图不会被后续单元修改</span></strong><span leaf="">（不是“活体”）。</span></p></li><li><p data-start="327" data-end="404"><code data-start="327" data-end="344"><span leaf="">%%matplotlib qt</span></code><span leaf="">（或 </span><code data-start="347" data-end="351"><span leaf="">tk</span></code><span leaf="">, </span><code data-start="353" data-end="358"><span leaf="">osx</span></code><span leaf=""> 等）：弹出</span><strong data-start="364" data-end="372"><span leaf="">独立窗口</span></strong><span leaf="">；后续单元对“同一对象”的修改会</span><strong data-start="388" data-end="396"><span leaf="">即时反映</span></strong><span leaf="">（是“活体”）。</span></p></li></ul><li><p data-start="407" data-end="471"><span leaf="">本教程用 </span><strong data-start="412" data-end="428"><span leaf="">pyplot（隐式接口）</span></strong><span leaf=""> 演示，便于快速试验。写可复用脚本/大型项目时，建议用 </span><strong data-start="456" data-end="470"><span leaf="">面向对象（OO）接口</span></strong><span leaf="">。</span></p></li></ul><pre data-start="473" data-end="597"><section><p><span data-state="closed"></span></p></section></pre><section><span leaf=""><br></span></section><section><ul><li><li><li><li><li><li></ul><pre data-lang="python"><code><span leaf=""><span># 在 Jupyter 的第一个单元</span></span></code><code><span leaf="">%matplotlib inline</span></code><code><span leaf=""><span>import</span> matplotlib.pyplot <span>as</span> plt</span></code><code><span leaf=""><span>import</span> numpy <span>as</span> np</span></code><code><span leaf=""><span>from</span> PIL <span>import</span> Image</span></code><code><span leaf=""><span>from</span> skimage <span>import</span> data</span></code></pre></section><h1 data-start="604" data-end="624" data-pm-slice="0 0 []"><span leaf=""><span textstyle="">2) 将图像读入为 NumPy 数组</span></span></h1><p data-start="626" data-end="659"><span leaf="">Matplotlib 依赖 </span><strong data-start="640" data-end="650"><span leaf="">Pillow</span></strong><span leaf=""> 读图。常见类型：</span></p><ul><li><p data-start="662" data-end="691"><strong data-start="662" data-end="669"><span leaf="">RGB</span></strong><span leaf="">（3 通道，uint8 或 float32）</span></p></li><li><p data-start="694" data-end="720"><strong data-start="694" data-end="702"><span leaf="">RGBA</span></strong><span leaf="">（4 通道，含 alpha 透明度）</span></p></li><li><p data-start="723" data-end="770"><strong data-start="723" data-end="729"><span leaf="">灰度</span></strong><span leaf="">（单通道，Matplotlib 仅完全支持 float32；若不是，需转换/缩放）</span></p></li></ul><pre data-start="772" data-end="912"><section><p><span data-state="closed"></span></p></section></pre><section><ul><li><li></ul><pre data-lang="python"><code><span leaf="">img =  data.moon()</span></code><code><span leaf=""><span>print</span>(<span>repr</span>(img))</span></code></pre></section><section nodeleaf=""><img data-imgfileid="100006117" data-ratio="0.3792298716452742" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4ZlXrWXtwGDibUkbPib58jsUYAfnmjgQJicn417TFa6RQ2xvFxbibCpS4dg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="857" type="block" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4ZlXrWXtwGDibUkbPib58jsUYAfnmjgQJicn417TFa6RQ2xvFxbibCpS4dg/640?wx_fmt=png&amp;from=appmsg"></section><section><span leaf="">每个“内层列表”表示一个像素；RGB/RGBA 分别有 3/4 个数。灰度图仅 2D（H×W）。</span></section><section><span leaf=""><br></span></section><section><span leaf=""><span textstyle="">3) 用 </span></span><code data-start="978" data-end="988" data-pm-slice="0 0 []"><span leaf=""><span textstyle="">imshow()</span></span></code><span leaf=""><span textstyle=""> 显示数组</span></span></section><section><ul><li><li><li><li><li></ul><pre data-lang="bash"><code><span leaf="">plt.imshow(img)       <span># 自动根据数组形状判定是彩色还是灰度</span></span></code><code><span leaf="">plt.title(<span>'original'</span>)</span></code><code><span leaf="">plt.axis(<span>'off'</span>)</span></code><code><span leaf="">plt.show()</span></code><code><span leaf=""><br></span></code></pre></section><section><span leaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4LibIvRsnS7otKkWZdXbK5S1VIc18AFzic4wodt32QPLARJ2Yyqx2DZ0A/640?wx_fmt=png&amp;from=appmsg" data-ratio="1.051413881748072" data-type="png" data-w="389" data-imgfileid="100006118" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4LibIvRsnS7otKkWZdXbK5S1VIc18AFzic4wodt32QPLARJ2Yyqx2DZ0A/640?wx_fmt=png&amp;from=appmsg"></span></section><section><code data-start="1103" data-end="1111" data-pm-slice="0 0 []"><span leaf="">imshow接受任意数值数组（形状为 H×W 或 H×W×C），并按“数据→颜色”映射渲染。</span></code></section><section><span leaf=""><br></span></section><h1 data-start="1159" data-end="1185" data-pm-slice="0 0 []"><span leaf=""><span textstyle="">4) 伪彩色（pseudocolor）与通道选择</span></span></h1><p data-start="1187" data-end="1244"><span leaf="">伪彩色</span><strong data-start="1190" data-end="1195"><span leaf="">只</span></strong><span leaf="">对</span><strong data-start="1196" data-end="1203"><span leaf="">单通道</span></strong><span leaf="">图像有意义（灰度/亮度图）。若手头是 RGB、而三个通道近似，可取任一通道当灰度：</span></p><section><ul><li><li><li><li><li><li></ul><pre data-lang="nginx"><code><span leaf=""><span>lum</span> = img[:, : ]       </span></code><code><span leaf="">plt.imshow(lum, cmap=<span>'viridis'</span>)     <span># 默认 colormap 通常是 'viridis'</span></span></code><code><span leaf="">plt.title(<span>'luminosity  '</span>)</span></code><code><span leaf="">plt.colorbar(label=<span>'intensity'</span>)</span></code><code><span leaf="">plt.axis(<span>'off'</span>)</span></code><code><span leaf="">plt.show()</span></code></pre></section><section><span leaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4U0ibOv5BDrJAOhnTtibtviarFoSiaEmCjHsxw0sC8vAUCQwX9l3fLic7kTg/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.8565573770491803" data-type="png" data-w="488" data-imgfileid="100006119" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4U0ibOv5BDrJAOhnTtibtviarFoSiaEmCjHsxw0sC8vAUCQwX9l3fLic7kTg/640?wx_fmt=png&amp;from=appmsg"></span></section><section><span leaf=""><br></span></section><section><span leaf="">切换 colormap：</span></section><section><ul><li><li><li><li><li></ul><pre data-lang="javascript"><code><span leaf="">plt.<span>imshow</span>(lum, cmap=<span>'hot'</span>)</span></code><code><span leaf="">plt.<span>title</span>(<span>'cmap = hot'</span>)</span></code><code><span leaf="">plt.<span>axis</span>(<span>'off'</span>)</span></code><code><span leaf="">plt.<span>show</span>()</span></code><code><span leaf=""><br></span></code></pre></section><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4JVdxe9jGCFDcz6QgVfuxqWthqKtoEYnXKGibicMCxnWIKFKfBytFom9A/640?wx_fmt=png&amp;from=appmsg" data-ratio="1.7776349614395888" data-s="300,640" data-type="png" data-w="778" type="block" data-imgfileid="100006120" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4JVdxe9jGCFDcz6QgVfuxqWthqKtoEYnXKGibicMCxnWIKFKfBytFom9A/640?wx_fmt=png&amp;from=appmsg"></section><blockquote><p data-start="1567" data-end="1664"><strong data-start="1567" data-end="1589"><span leaf="">Jupyter inline 的注意</span></strong><span leaf="">：若上一单元已经把图“画出来”，下一单元对</span><strong data-start="1610" data-end="1622"><span leaf="">同一个已渲染对象</span></strong><span leaf="">调用 </span><code data-start="1625" data-end="1637"><span leaf="">set_cmap()</span></code><span leaf=""> 不会更新；把相关命令放在</span><strong data-start="1650" data-end="1658"><span leaf="">同一单元</span></strong><span leaf="">里执行即可。</span></p></blockquote><p data-start="1666" data-end="1678"><span leaf="">也可以拿到图像对象再改：</span></p><section><ul><li><li><li><li><li><li></ul><pre data-lang="nginx"><code><span leaf=""><span>im</span> = plt.imshow(lum)   <span># 返回一个 AxesImage 对象（ScalarMappable）</span></span></code><code><span leaf="">im.set_cmap(<span>'nipy_spectral'</span>)</span></code><code><span leaf="">plt.colorbar(im)</span></code><code><span leaf="">plt.axis(<span>'off'</span>)</span></code><code><span leaf="">plt.show()</span></code><code><span leaf=""><br></span></code></pre></section><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4PwBsCGkrElWkwUXx1SIcG65QMmuA1mGKiapXnHY4uhIV4JdKnJcbtqw/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.8280773143438453" data-s="300,640" data-type="png" data-w="983" type="block" data-imgfileid="100006121" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4PwBsCGkrElWkwUXx1SIcG65QMmuA1mGKiapXnHY4uhIV4JdKnJcbtqw/640?wx_fmt=png&amp;from=appmsg"></section><section><span leaf=""><br></span></section><h1 data-start="1831" data-end="1866" data-pm-slice="0 0 []"><span leaf=""><span textstyle="">5) 颜色刻度（color scale）与色条（colorbar）</span></span></h1><p data-start="1868" data-end="1888"><strong data-start="1868" data-end="1874"><span leaf="">色条</span></strong><span leaf="">是“颜色 ↔ 数值”的图例：</span></p><section><ul><li><li><li><li></ul><pre data-lang="nginx"><code><span leaf=""><span>im</span> = plt.imshow(lum, cmap=<span>'magma'</span>)</span></code><code><span leaf="">plt.colorbar(im, label=<span>'intensity'</span>)</span></code><code><span leaf="">plt.axis(<span>'off'</span>)</span></code><code><span leaf="">plt.show()</span></code></pre></section><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4r56zTFy5Kje2tWmYFZZhEdicyemRrnlAM3AKT5VU9L20uatVEsYGnicQ/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.8891566265060241" data-s="300,640" data-type="png" data-w="830" type="block" data-imgfileid="100006122" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4r56zTFy5Kje2tWmYFZZhEdicyemRrnlAM3AKT5VU9L20uatVEsYGnicQ/640?wx_fmt=png&amp;from=appmsg"></section><section><span leaf=""><br></span></section><h1 data-start="2008" data-end="2037" data-pm-slice="0 0 []"><span leaf=""><span textstyle="">6) 用直方图理解像素分布 &amp; 提升对比度（clim）</span></span></h1><p data-start="2039" data-end="2046"><span leaf="">先看灰度分布：</span></p><section><ul><li><li><li><li><li></ul><pre data-lang="bash"><code><span leaf="">plt.hist(lum.ravel(), bins=range(256), <span>fc</span>=<span>'k'</span>, ec=<span>'k'</span>)</span></code><code><span leaf="">plt.title(<span>'Histogram of intensity'</span>)</span></code><code><span leaf="">plt.xlabel(<span>'value'</span>); plt.ylabel(<span>'count'</span>)</span></code><code><span leaf="">plt.show()</span></code><code><span leaf=""><br></span></code></pre></section><section><span leaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4QCicCltpShV1RBzUxxLpEMDiahTibRImb0TVKVy2OqInURUYjWONxKaYg/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.769100169779287" data-type="png" data-w="589" data-imgfileid="100006124" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4QCicCltpShV1RBzUxxLpEMDiahTibRImb0TVKVy2OqInURUYjWONxKaYg/640?wx_fmt=png&amp;from=appmsg"></span></section><section><span leaf=""><br></span></section><section><span leaf="">若高端或低端信息量很少，可以通过</span><strong data-start="2221" data-end="2231" data-pm-slice="0 0 []"><span leaf="">裁剪显示范围</span></strong><span leaf="">提升可视对比度（不会改原数据，只影响“映射到颜色”的区间）：</span></section><section><ul><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="apache"><code><span leaf=""><span>plt</span>.imshow(lum, cmap='gray', vmin=<span>0</span>, vmax=<span>175</span>)   # 等价于 clim=(<span>0</span>,<span>175</span>)</span></code><code><span leaf=""><span>plt</span>.title('contrast enhanced (vmin=<span>0</span>, vmax=<span>175</span>)')</span></code><code><span leaf=""><span>plt</span>.axis('<span>off</span>')</span></code><code><span leaf=""><span>plt</span>.show()</span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 或者用返回对象的方法（注意：Jupyter inline 要同单元修改）</span></span></code><code><span leaf=""><span>im</span> = plt.imshow(lum, cmap='gray')</span></code><code><span leaf=""><span>im</span>.set_clim(<span>0</span>, <span>175</span>)</span></code><code><span leaf=""><span>plt</span>.axis('<span>off</span>')</span></code><code><span leaf=""><span>plt</span>.show()</span></code><code><span leaf=""><br></span></code></pre></section><section nodeleaf=""><img data-imgfileid="100006126" data-ratio="1.5343383584589614" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4Md0FXd0d0icXwjZYibPh6FGrc6R90wKRic8U47f0PuNIOTFv4aFHYWJbA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="597" type="block" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo4Md0FXd0d0icXwjZYibPh6FGrc6R90wKRic8U47f0PuNIOTFv4aFHYWJbA/640?wx_fmt=png&amp;from=appmsg"></section><section><span leaf=""><br></span></section><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo40KS7vQoxboX7r6DI6UOsC0K3CCP7tt5rWEg3lXpic3Q1q4p6grqL7lg/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.6868884540117417" data-s="300,640" data-type="png" data-w="1022" type="block" data-imgfileid="100006123" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo40KS7vQoxboX7r6DI6UOsC0K3CCP7tt5rWEg3lXpic3Q1q4p6grqL7lg/640?wx_fmt=png&amp;from=appmsg"></section><h1 data-start="2549" data-end="2574" data-pm-slice="0 0 []"><span leaf=""><span textstyle="">7) 插值（interpolation）与缩放</span></span></h1><p data-start="2576" data-end="2618"><span leaf="">当图像在屏幕上被放大/缩小时，需要</span><strong data-start="2593" data-end="2599"><span leaf="">插值</span></strong><span leaf="">“填像素”。不同插值法的视觉效果不同：</span></p><ul><li><p data-start="2621" data-end="2652"><code data-start="2621" data-end="2630"><span leaf="">nearest</span></code><span leaf="">：最近邻，</span><strong data-start="2635" data-end="2643"><span leaf="">像素感强</span></strong><span leaf="">（科研审阅常用）。</span></p></li><li><p data-start="2655" data-end="2674"><code data-start="2655" data-end="2665"><span leaf="">bilinear</span></code><span leaf="">：双线性，较平滑。</span></p></li><li><p data-start="2677" data-end="2703"><code data-start="2677" data-end="2686"><span leaf="">bicubic</span></code><span leaf="">：三次样条，更平滑，照片放大常用。</span></p></li></ul><p data-start="2705" data-end="2737"><span leaf="">先用 Pillow 缩小原图，再在屏幕上放大显示，比较不同插值：</span></p><section><ul><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="bash"><code><span leaf="">small = Image.open(<span>'stinkbug.png'</span>)</span></code><code><span leaf="">small.thumbnail((<span>64</span>, <span>64</span>))       <span># 原地缩小（长边 ≤ 64）</span></span></code><code><span leaf="">small = np.asarray(small)</span></code><code><span leaf=""><br></span></code><code><span leaf="">plt.figure()</span></code><code><span leaf="">plt.imshow(small, interpolation=<span>'nearest'</span>)</span></code><code><span leaf="">plt.title(<span>'nearest'</span>); plt.axis(<span>'off'</span>); plt.show()</span></code><code><span leaf=""><br></span></code><code><span leaf="">plt.figure()</span></code><code><span leaf="">plt.imshow(small, interpolation=<span>'bilinear'</span>)</span></code><code><span leaf="">plt.title(<span>'bilinear'</span>); plt.axis(<span>'off'</span>); plt.show()</span></code><code><span leaf=""><br></span></code><code><span leaf="">plt.figure()</span></code><code><span leaf="">plt.imshow(small, interpolation=<span>'bicubic'</span>)</span></code><code><span leaf="">plt.title(<span>'bicubic'</span>); plt.axis(<span>'off'</span>); plt.show()</span></code><code><span leaf=""><br></span></code></pre></section><section><span leaf=""><br></span></section><section><span leaf=""><span textstyle="">最后，图片保存</span></span></section><section><ul><li><li><li><li><li><li></ul><pre data-lang="javascript"><code><span leaf="">fig, ax = plt.<span>subplots</span>(layout=<span>'constrained'</span>)</span></code><code><span leaf="">im = ax.<span>imshow</span>(lum, cmap=<span>'gray'</span>, vmin=<span>0</span>, vmax=<span>175</span>)</span></code><code><span leaf="">fig.<span>colorbar</span>(im, ax=ax, label=<span>'intensity'</span>)</span></code><code><span leaf="">ax.<span>set_title</span>(<span>'OO style'</span>); ax.<span>set_axis_off</span>()</span></code><code><span leaf="">fig.<span>savefig</span>(<span>'image_oo.png'</span>, dpi=<span>300</span>, bbox_inches=<span>'tight'</span>)</span></code><code><span leaf=""><br></span></code></pre></section><section><span leaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo46H3Hk4nlOBl2jIKZyJ47iabxG5QzHRd4V8ibHeL0qH7jmURbiaRQetJHw/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.8659611992945326" data-type="png" data-w="567" data-imgfileid="100006127" src="https://mmbiz.qpic.cn/sz_mmbiz_png/xVhD7345SkvVIv7y4Sp9DyJmzmECAKo46H3Hk4nlOBl2jIKZyJ47iabxG5QzHRd4V8ibHeL0qH7jmURbiaRQetJHw/640?wx_fmt=png&amp;from=appmsg"></span></section><section><ul><li><li><li></ul><pre data-lang="ruby"><code><span leaf=""><span>https:</span>/<span>/matplotlib.org/stable/tutorials/images</span>.html</span></code><code><span leaf="">各种美学修饰：<span>https:</span>/<span>/matplotlib.org/stable/tutorials/pyplot</span>.html</span></code><code><span leaf="">matlablib总览：<span>https:</span>/<span>/matplotlib.org/stable/users/index</span>.html</span></code></pre></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/alw8GW4x5-hpu4FNoMuH1g",target="_blank" rel="noopener noreferrer">原文链接</a>
