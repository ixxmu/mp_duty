---
title: "ggplot2版本发布重大更新：v4.0.0（影响了超多其依赖他的包）"
date: 2025-09-23T14:23:06Z
draft: ["false"]
tags: [
  "fetched",
  "珠海健明生物医药科技"
]
categories: ["Acdemic"]
---
ggplot2版本发布重大更新：v4.0.0（影响了超多其依赖他的包） by 珠海健明生物医药科技
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" data-pm-slice="0 0 []"><blockquote><p><span leaf="">你最近画图是不是频繁地遇到各种报错？包括但不限于以下内容：</span></p></blockquote><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100062242" data-ratio="0.3870967741935484" data-src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgeApbF6GKw0Xf8iaxDnzceTkGh68ZXsAXFW2tat08CK6gJicMEqlNTJLLA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1054" src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgeApbF6GKw0Xf8iaxDnzceTkGh68ZXsAXFW2tat08CK6gJicMEqlNTJLLA/640?wx_fmt=png&amp;from=appmsg"></span></figure><figure data-tool="mdnice编辑器"><span leaf=""><img data-src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgeicugnm5ib92RCO8sbLFTNNAf8GOrLwmibLEGDbDC5JyaicAVBUG0bCT2jA/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.43280632411067194" data-type="png" data-w="1012" data-imgfileid="100062244" src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgeicugnm5ib92RCO8sbLFTNNAf8GOrLwmibLEGDbDC5JyaicAVBUG0bCT2jA/640?wx_fmt=png&amp;from=appmsg"></span></figure><figure data-tool="mdnice编辑器"><span leaf=""><img data-src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgeJUP9l47cwLcd6LCZm5vWHWKeEVBNbicgMnic9M3H6QgU0q4d2yUibwyzQ/640?wx_fmt=png&amp;from=appmsg" data-ratio="1.0416666666666667" data-type="png" data-w="504" data-imgfileid="100062246" src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgeJUP9l47cwLcd6LCZm5vWHWKeEVBNbicgMnic9M3H6QgU0q4d2yUibwyzQ/640?wx_fmt=png&amp;from=appmsg"></span></figure><h4 data-tool="mdnice编辑器"><span></span><span leaf="">好基友也发了一个报错来：</span><span></span></h4><figure data-tool="mdnice编辑器"><span leaf=""><img data-src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgeUbn74JB36icWibIvd3y0icuCsm8FbHqfXqiasibPwmXMcX8OXLfITHDJQ1w/640?wx_fmt=png&amp;from=appmsg" data-ratio="1.6569767441860466" data-type="png" data-w="688" data-imgfileid="100062243" src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgeUbn74JB36icWibIvd3y0icuCsm8FbHqfXqiasibPwmXMcX8OXLfITHDJQ1w/640?wx_fmt=png&amp;from=appmsg"></span></figure><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">重大更新内容</span></span></h2><p data-tool="mdnice编辑器"><span leaf="">https://github.com/tidyverse/ggplot2/blob/main/NEWS.md</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQge6GzXJkT6ibQcxEYctrGaDB31TAbEtyYon7ybJnqRV2XaHumiakQkhSnw/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.5685185185185185" data-type="png" data-w="1080" data-imgfileid="100062245" src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQge6GzXJkT6ibQcxEYctrGaDB31TAbEtyYon7ybJnqRV2XaHumiakQkhSnw/640?wx_fmt=png&amp;from=appmsg"></span></figure><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">更新了哪些内容呢？</span></span></h2><h3 data-tool="mdnice编辑器"><span></span><span><span leaf="">ggplot2 4.0.0 Breaking changes</span></span><span></span></h3><ul><li><section><p><strong><span leaf="">「ggplot2的S3部分已被S7组件替换（<a topic-id="mfw03zlp-2vmk4u" data-topic="1">#6352</a>）。」</span></strong></p></section></li><li><section><p><strong><span leaf="">「（重大变更）」</span></strong><span leaf="">geom_violin（quantiles）现在基于数据的实际分位数，而不是基于计算出的密度推断的分位数。取代draw_quantiles的分位数参数现在属于stat_ydensity（），而不是geom_violin（）（@teunbrand，<a topic-id="mfw03zlp-9zquw4" data-topic="1">#4120</a>）。</span></p></section></li><li><section><p><strong><span leaf="">「（重大变更）」</span></strong><span leaf="">可以在主题中一次性设置所有几何对象的默认值。（@teunbrand，基于@dpseidel的开创性工作，<a topic-id="mfw03zlp-fr9q0t" data-topic="1">#2239</a>）</span></p></section></li><ul><li><section><span leaf="">新增了一个theme（geom）参数用于跟踪这些默认值。</span></section></li><li><section><span leaf="">可以使用element_geom（）函数来填充该参数。</span></section></li><li><section><span leaf="">from_theme（）函数允许在aes（）函数内部访问主题默认字段。</span></section></li></ul><li><section><p><span leaf="">在描述文件中</span><strong><span leaf="">「移动了以下包」</span></strong><span leaf="">。如果您的包依赖ggplot2来安装这些依赖项，您可能需要将它们列在您自己的DESCRIPTION文件中（<a topic-id="mfw03zlp-jcwu1m" data-topic="1">#5986</a>）。</span></p></section></li><ul><li><section><span leaf="">将mgcv从Imports移动到Suggests</span></section></li><li><section><span leaf="">将tibble从Imports移动到Suggests</span></section></li><li><section><span leaf="">移除了glue依赖</span></section></li></ul><li><section><p><span leaf="">默认标签现在是在build_ggplot（）（以前是ggplot_build（））中派生的，而不是在update_ggplot（）（以前是ggplot_add.Layer（））的图层方法中。这可能会影响访问plot$labels属性的代码（@teunbrand，<a topic-id="mfw03zlp-kfxy13" data-topic="1">#5894</a>）。</span></p></section></li><li><section><p><span leaf="">在分箱统计中，现在默认边界的选择更好地遵循nbin参数。这可能会影响使用默认分箱的图表（@teunbrand，<a topic-id="mfw03zlp-48mlaz" data-topic="1">#5882</a>，<a topic-id="mfw03zlp-90xibm" data-topic="1">#5036</a>）。</span></p></section></li></ul><h3 data-tool="mdnice编辑器"><span></span><span><span leaf="">Lifecycle changes</span></span><span></span></h3><ul><li><section><p><strong><span leaf="">「在ggplot2 3.0.0之前的版本中，已弃用的函数和参数现在会抛出错误而不是警告。」</span></strong></p></section></li><li><section><p><strong><span leaf="">「在ggplot2 3.4.0之前的版本中，被软弃用的函数和参数现在会抛出警告。」</span></strong></p></section></li><li><section><p><span leaf="">annotation_borders（）取代了现</span><strong><span leaf="">「已弃用」</span></strong><span leaf="">的borders（）（@teunbrand，<a topic-id="mfw03zlp-gbffhs" data-topic="1">#6392</a>）</span></p></section></li><li><section><p><span leaf="">在geom_bar（）/geom_col（）中</span><strong><span leaf="">「关闭了」</span></strong><span leaf="">将尺寸回退到线宽转换的功能（<a topic-id="mfw03zlp-tt4asg" data-topic="1">#4848</a>）。</span></p></section></li><li><section><p><span leaf="">在geom_boxplot（）、geom_crossbar（）和geom_pointrange（）中，fatten参数</span><strong><span leaf="">「已被弃用」</span></strong><span leaf="">（@teunbrand，<a topic-id="mfw03zlp-c8yv5x" data-topic="1">#4881</a>）。</span></p></section></li><li><section><p><strong><span leaf="">「以下方法已被弃用」</span></strong><span leaf="">：fortify.lm（）、fortify.glht（）、fortify.confint.glht（）、fortify.summary.glht（）和fortify.cld（）。建议使用broom::augment（）和broom::tidy（）来替代（@teunbrand，<a topic-id="mfw03zlp-o345q3" data-topic="1">#3816</a>）。</span></p></section></li><li><section><p><span leaf="">geom_errorbarh（）</span><strong><span leaf="">「已被弃用」</span></strong><span leaf="">，建议使用geom_errorbar（orientation = “y”）来替代（@teunbrand，<a topic-id="mfw03zlq-7lbsad" data-topic="1">#5961</a>）。</span></p></section></li><li><section><p><span leaf="">为了保持一致性并实现更好的自动补全功能，特殊的getter和setter函数</span><strong><span leaf="">「已重命名」</span></strong><span leaf="">为带有get_*和set_*前缀的函数。旧的名称仍然可用，以确保向后兼容性（@teunbrand，<a topic-id="mfw03zlq-s3pbaz" data-topic="1">#5568</a>）。</span></p></section></li></ul><figure data-tool="mdnice编辑器"><span leaf=""><img data-src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgewY3jEo9YcROulQibHMe0fibNHG9KhjvEib2Yia0wWhUrLz4fPB582drKibw/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.8729096989966555" data-type="png" data-w="598" data-imgfileid="100062247" src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxiclKnOtRJ7EjfYsQQnIQgewY3jEo9YcROulQibHMe0fibNHG9KhjvEib2Yia0wWhUrLz4fPB582drKibw/640?wx_fmt=png&amp;from=appmsg"></span></figure><ul><li><section><p><code><span leaf="">facet_wrap()</span></code><span leaf="">为</span><code><span leaf="">dir</span></code><span leaf="">参数</span><strong><span leaf="">「新增了」</span></strong><span leaf="">选项，以便更好地控制面板方向。这些新选项取代了现已弃用的</span><code><span leaf="">as.table</span></code><span leaf="">参数的相关功能。在内部，</span><code><span leaf="">dir = "h"</span></code><span leaf="">或</span><code><span leaf="">dir = "v"</span></code><span leaf="">已被弃用（@teunbrand，<a topic-id="mfw03zlq-2b50wj" data-topic="1">#5212</a>）。</span></p></section></li><li><section><p><code><span leaf="">coord_trans()</span></code><strong><span leaf="">「已被重命名」</span></strong><span leaf="">为</span><code><span leaf="">coord_transform()</span></code><span leaf="">（@nmercadeb，<a topic-id="mfw03zlq-m29a1q" data-topic="1">#5825</a>）。</span></p></section></li></ul><p data-tool="mdnice编辑器"><span leaf="">更多更新细节可以看：https://github.com/tidyverse/ggplot2/blob/main/NEWS.md</span></p><h2 data-tool="mdnice编辑器"><span></span><span><span leaf="">让子弹先飞一会</span></span></h2><p data-tool="mdnice编辑器"><span leaf="">这种重大更新的影响应该还挺大的，可以先等一段时间。<span textstyle="">各位可以先还是保持ggplot2 3.5.2的版本，方法如下：</span></span></p><pre data-tool="mdnice编辑器"><code><span><span leaf=""># 检查包的版本</span></span><span leaf=""><br></span><span leaf="">packageVersion(</span><span><span leaf="">"ggplot2"</span></span><span leaf="">)</span><span leaf=""><br></span><span><span leaf=""># 安装3.5.2版本</span></span><span leaf=""><br></span><span leaf="">remotes::install_version(</span><span><span leaf="">"ggplot2"</span></span><span leaf="">, version = </span><span><span leaf="">"3.5.2"</span></span><span leaf="">) </span><span leaf=""><br></span><span><span leaf=""># 安装后需要重启Rstudio</span></span><span leaf=""><br></span></code></pre><p data-tool="mdnice编辑器"><span leaf=""><span textstyle="">当然，如果你没有遇到任何报错，就不用更改任何东西！</span></span></p></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" data-pm-slice="0 0 []"><p data-tool="mdnice编辑器"><span leaf="">友情转发：</span></p></section><ul><li><section><span leaf=""><a target="_blank" href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247545889&amp;idx=1&amp;sn=b7b37a458eead4645137126753d58c34&amp;scene=21#wechat_redirect" textvalue="生信入门&amp;数据挖掘线上直播课10月班" data-itemshowtype="0" linktype="text" data-linktype="2"><span textstyle="">生信入门&amp;数据挖掘线上直播课10月班</span></a><span textstyle="">，你的生物信息学入门课</span></span></section></li><li><section><span leaf=""><a target="_blank" href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247525079&amp;idx=1&amp;sn=0b997af16a58195b4192691373048fd5&amp;scene=21#wechat_redirect" textvalue="时隔5年，我们的生信技能树VIP学徒继续招生啦" data-itemshowtype="0" linktype="text" data-linktype="2"><span textstyle="">时隔5年，我们的生信技能树VIP学徒继续招生啦</span></a></span></section></li><li><section><span leaf=""><a target="_blank" href="https://mp.weixin.qq.com/s?__biz=MzUzMTEwODk0Ng==&amp;mid=2247530048&amp;idx=1&amp;sn=28aa7bbd5e00521f79e074496a5f5d66&amp;scene=21#wechat_redirect" textvalue="满足你生信分析计算需求的低价解决方案" data-itemshowtype="0" linktype="text" data-linktype="2">满足你生信分析计算需求的低价解决方案</a></span></section></li><li><section><span leaf=""><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxMDkxODM1Ng==&amp;action=getalbum&amp;album_id=1679199708449144836&amp;scene=173&amp;subscene=207&amp;sessionid=1745492310&amp;enterid=1745492314&amp;from_msgid=2247541298&amp;from_itemidx=1&amp;count=3&amp;nolastread=1#wechat_redirect" textvalue="生信故事会" data-itemshowtype="0" linktype="text" data-linktype="2">生信故事会</a>，来看看他们的生信入门故事</span></section></li><li><section><span leaf=""><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxMDkxODM1Ng==&amp;action=getalbum&amp;album_id=3690970204957147140&amp;scene=173&amp;subscene=207&amp;sessionid=1745066271&amp;enterid=1745066274&amp;from_msgid=2247540702&amp;from_itemidx=1&amp;count=3&amp;nolastread=1#wechat_redirect" textvalue="生信马拉松答疑专辑" data-itemshowtype="0" linktype="text" data-linktype="2">生信马拉松答疑专辑</a>，获取你的生信专属答疑</span></section></li></ul><section><span leaf=""><br></span></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/wqATEobr3WINWVVATe6V3Q",target="_blank" rel="noopener noreferrer">原文链接</a>
