---
title: "iseq＋aspera高速下载单细胞上游数据！"
date: 2026-02-03T03:45:32Z
draft: ["false"]
tags: [
  "fetched",
  "单细胞天地"
]
categories: ["Acdemic"]
---
iseq＋aspera高速下载单细胞上游数据！ by 单细胞天地
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" data-pm-slice="0 0 []"><h3 data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><span></span><span><span leaf="">iseq软件及常用参数简介</span></span><span></span></h3><p data-tool="mdnice编辑器"><span leaf="">上期推文说到准备<a target="_blank" href="https://mp.weixin.qq.com/s?__biz=MzI1Njk4ODE0MQ==&amp;mid=2247535362&amp;idx=1&amp;sn=a877d098cab6599b20411c8b4c032966&amp;scene=21#wechat_redirect" textvalue="" linktype="text" data-linktype="2">单细胞原始数据下载，选ENA还是SRA？</a></span></p><p data-tool="mdnice编辑器"><span leaf="">因为ENA上面已经叭fastq文件拆分成_1.fastq.gz以及_2.fastq.gz文件，所以从ENA数据库下载之后使用起来会更加简便一些。</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051812" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFk0NQ5yQBl1viclBdaibYFaEpmWHgvxWgXXygS2wQ0flAeUWK6z42PpqA/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFk0NQ5yQBl1viclBdaibYFaEpmWHgvxWgXXygS2wQ0flAeUWK6z42PpqA/640?wx_fmt=png&amp;from=appmsg"></span></figure><p data-tool="mdnice编辑器"><span leaf="">不过</span><strong><span leaf="">如果使用iseq软件下载PRJNA1014406数据，就无需纠结是从SRA还是ENA下载啦！</span></strong></p><p data-tool="mdnice编辑器"><span leaf="">因为iSeq这个工具，支持从GEO以及ENA下载需要的上游数据，会自动去检索合适的下载方式，并且有多个参数可以帮助我们整理下载好的数据。</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051811" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFSBUL20voy10wMMI4dAxssUfpjq8pZRfhlXjBefLJ1odlFr2ZwmyRRQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFSBUL20voy10wMMI4dAxssUfpjq8pZRfhlXjBefLJ1odlFr2ZwmyRRQ/640?wx_fmt=png&amp;from=appmsg"></span></figure><p data-tool="mdnice编辑器"><strong><span leaf="">-g, --gzip参数</span></strong></p><ul><li><section><span leaf="">直接下载gzip格式的FASTQ文件，如果不能直接下载，则会下载SRA文件并通过多线程分解和压缩转换为gzip格式。</span></section></li></ul><blockquote><span></span><p><span leaf="">由于GSA数据库直接存储的格式大多数为gzip格式，因此，如果检索的accession来自于GSA数据库，无论是否使用-g 参数都可以直接下载gzip格式的FASTQ文件。</span></p><p><span leaf="">如果</span><strong><span leaf="">accession来自于SRA/ENA/DDBJ/GEO数据库，那么iSeq会首先访问ENA数据库，如果可以直接下载gzip格式的FASTQ文件，则会直接下载</span></strong><span leaf="">，否则，</span><strong><span leaf="">会下载SRA文件并通过fasterq-dump工具转换为FASTQ, 然后通过pigz工具对FASTQ文件进行压缩，最终得到gzip格式的FASTQ文件。</span></strong></p></blockquote><p data-tool="mdnice编辑器"><strong><span leaf="">-q, --fastq参数</span></strong></p><ul><li><section><span leaf="">将下载完成的SRA文件分解为多个未压缩的FASTQ格式。</span></section></li></ul><blockquote><span></span><p><span leaf="">该参数只有在accession来自于SRA/ENA/DDBJ/GEO数据库，并且下载的文件为SRA文件时才有效。</span></p><p><span leaf="">总之，</span><strong><span leaf="">SRA文件下载完成后，iSeq会通过fasterq-dump工具转换为FASTQ文件，除此之外，可以通过-t参数指定转换的线程数。</span></strong></p></blockquote><p data-tool="mdnice编辑器"><span leaf="">那么</span><strong><span leaf="">接下来我们就来看看如何下载使用iSeq，以及在具体使用过程中具体会用到哪些参数。</span></strong></p><h2 data-cacheurl="" data-remoteid="" data-tool="mdnice编辑器"><span></span><span><span leaf="">iSeq下载与使用</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">之前在菜鸟团的推文<a target="_blank" href="https://mp.weixin.qq.com/s?__biz=MzUzMTEwODk0Ng==&amp;mid=2247526352&amp;idx=1&amp;sn=713ee83a873b1739f9b24fe36e67340c&amp;scene=21#wechat_redirect" textvalue="" linktype="text" data-linktype="2">iSeq — 小而精的公共数据集下载集成工具</a>，里面介绍了安装方法，</span><strong><span leaf="">使用conda直接下载即可，但是要注意不要和不建议和kingfisher安装在一个环境。因为两者依赖性会有冲突。</span></strong></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf="">#<a topic-id="ml60p78b-5yd3i7" data-topic="1">#创建并激活独立小环境</a></span></span><br><span leaf="">conda create -n</span><br><span leaf="">conda activate scRNA</span><br><br><span><span leaf=""><a topic-id="ml60p78c-xwekoc" data-topic="1">#安装iseq</a></span></span><br><span leaf="">conda install iseq</span><br></code></pre><blockquote><span></span><p><span leaf="">iSeq使用方法帮助文档——https://github.com/BioOmics/iSeq/blob/main/docs/ChineseTutorial.md</span></p></blockquote><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051813" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFwVJzpAJQWQHicgYwFZE8WdqjrloaK04ibd0QibSr1Jn3T8K6FuDJza9iaw/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFwVJzpAJQWQHicgYwFZE8WdqjrloaK04ibd0QibSr1Jn3T8K6FuDJza9iaw/640?wx_fmt=png&amp;from=appmsg"></span></figure><blockquote><span></span><p><span leaf="">Examples of using iSeq:https://github.com/BioOmics/iSeq/blob/main/docs/Examples.md</span></p></blockquote><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051814" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFWoNXN50ibV40V1bFgJwrfjjGmaC6IGK6K0ic2gfs9hLqMjlwR5EMzCEQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFWoNXN50ibV40V1bFgJwrfjjGmaC6IGK6K0ic2gfs9hLqMjlwR5EMzCEQ/640?wx_fmt=png&amp;from=appmsg"></span></figure><p data-tool="mdnice编辑器"><span leaf="">文档作者写了一个很详细的参数介绍页面，以及使用示例，大家可以去读读看。</span></p><h3 data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><span></span><span><span leaf="">测试下载PRJNA1014406数据</span></span><span></span></h3><p data-tool="mdnice编辑器"><span leaf="">首先是</span><strong><span leaf="">基于iseq基础的命令，加了设置线程已经并行下载的参数，想着能不能提点速度，但是还是有点慢。</span></strong></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">iseq -i PRJNA1014406 -g -p 10 -t 16 -o ./PRJNA1014406_data</span><br></code></pre><p data-tool="mdnice编辑器"><code><span leaf="">-i PRJNA1014406</span></code><span leaf="">: 指定要下载的项目 ID。</span></p><p data-tool="mdnice编辑器"><code><span leaf="">-g</span></code><span leaf="">: 直接下载 .fastq.gz 格式。如果服务器上没有现成的 gz 文件，自动下载 SRA 格式并转换和压缩。</span></p><p data-tool="mdnice编辑器"><code><span leaf="">-p 10</span></code><span leaf="">: 开启 10 个并行连接下载。</span></p><p data-tool="mdnice编辑器"><code><span leaf="">-t 16</span></code><span leaf="">: 使用 16 个线程进行文件转换和压缩。</span></p><p data-tool="mdnice编辑器"><code><span leaf="">-o ./PRJNA1014406_data</span></code><span leaf="">: 把所有文件存在这个新创建的文件夹里存放，方便后续查找位置。</span></p><p data-tool="mdnice编辑器"><span leaf="">开始下载的时候，会确认提示每个文件的大小，然后在开始下载。</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051810" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFPtCEJrKID5iaYibVWd5dauueoEeB8H2yLDHxWzN5l8dOGicKw5KEkG2Tg/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFPtCEJrKID5iaYibVWd5dauueoEeB8H2yLDHxWzN5l8dOGicKw5KEkG2Tg/640?wx_fmt=png&amp;from=appmsg"></span></figure><h3 data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><span></span><span><span leaf="">结合aspera高速下载</span></span><span></span></h3><p data-tool="mdnice编辑器"><strong><span leaf="">-a, --aspera参数：</span></strong><span leaf="">使用Aspera进行下载。</span></p><blockquote><span></span><p><span leaf="">由于Aspera下载速度较快，因此，可以通过-a参数让iSeq调用ascp工具进行下载。可惜的是，目前</span><strong><span leaf="">仅有GSA和ENA数据库支持Aspera下载</span></strong><span leaf="">，NCBI SRA数据库由于广泛采用了Google Cloud 和 AWS Cloud技术以及其他原因（请看Avoid-using-ascp），暂无法使用Aspera进行下载。</span></p></blockquote><p data-tool="mdnice编辑器"><strong><span leaf="">翻文档的时候看到有-a参数，可以让iSeq调用ascp工具进行下载，所以就想着试试看。</span></strong></p><p data-tool="mdnice编辑器"><span leaf="">所以首先</span><strong><span leaf="">使用conda安装aspera</span></strong></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">mamba install aspera-cli </span><br></code></pre><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051818" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFLe6Ydvoa4ibkPMSMiakZIpy9IbekhZjia9CIxicTzSGRMu4JkQrOy6W4bw/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFLe6Ydvoa4ibkPMSMiakZIpy9IbekhZjia9CIxicTzSGRMu4JkQrOy6W4bw/640?wx_fmt=png&amp;from=appmsg"></span></figure><p data-tool="mdnice编辑器"><span leaf="">但是</span><strong><span leaf="">虽然使用mamba下载下来了，但是并不能正常使用，所以还是从官网手动下载了一个到本地。</span></strong></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051819" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLF7AxLEmmX5iaL7icEUSwrAFn4JydNOAhkmHIL4GmOPketyWZyGzTJZUVQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLF7AxLEmmX5iaL7icEUSwrAFn4JydNOAhkmHIL4GmOPketyWZyGzTJZUVQ/640?wx_fmt=png&amp;from=appmsg"></span></figure><p data-tool="mdnice编辑器"><strong><span leaf="">下载及配置的教程可以参考一下——Aspera史上最全安装方法 + 批量下载fastq数据</span></strong></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span><span leaf=""><a topic-id="ml60p78c-9d409n" data-topic="1">#下载需要的软件</a></span></span><br><span leaf="">wget -c https://d3gcli72yxqn2z.cloudfront.net/downloads/connect/latest/bin/ibm-aspera-connect_4.2.18.918-HEAD_linux_x86_64.tar.gz</span><br><br><span><span leaf=""><a topic-id="ml60p78c-pqceac" data-topic="1">#解压软件</a></span></span><br><span leaf="">tar -zxvf ibm-aspera-connect_4.2.18.918-HEAD_linux_x86_64.tar.gz</span><br><br><span><span leaf=""><a topic-id="ml60p78c-e97kk8" data-topic="1">#运行脚本文件</a></span></span><br><span leaf="">bash ibm-aspera-connect_4.2.18.918-HEAD_linux_x86_64.sh </span><br><br><span><span leaf=""><a topic-id="ml60p78c-yp3s3x" data-topic="1">#添加环境变量</a></span></span><br><span><span leaf="">echo</span></span><span leaf=""> </span><span><span leaf="">'export PATH="$HOME/.aspera/connect/bin:$PATH"'</span></span><span leaf=""> &gt;&gt; ~/.bashrc</span><br><br><span><span leaf="">source</span></span><span leaf=""> ~/.bashrc</span><br><br><span><span leaf=""><a topic-id="ml60p78c-bat5i1" data-topic="1">#查看版本确定是否安装好</a></span></span><br><span leaf="">ascp --version</span><br></code></pre><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051815" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLF7icMsrpkkek6ibop7HGcprxBccqEX284Q5LXPTEodjMYfPM7RfXZok8Q/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLF7icMsrpkkek6ibop7HGcprxBccqEX284Q5LXPTEodjMYfPM7RfXZok8Q/640?wx_fmt=png&amp;from=appmsg"></span></figure><p data-tool="mdnice编辑器"><span leaf="">然后</span><strong><span leaf="">整理需要的密钥文件asperaweb_id_dsa.openssh，因为是在服务器里面，所以我就按照教程直接生成了一个asperaweb_id_dsa.openssh文件。</span></strong></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051816" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLF6NCR1xIsfuAw5WSia1dLI9nQd7mh8Xj0NSTeJqiaAJzzXjrmHicDTJ23A/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLF6NCR1xIsfuAw5WSia1dLI9nQd7mh8Xj0NSTeJqiaAJzzXjrmHicDTJ23A/640?wx_fmt=png&amp;from=appmsg"></span></figure><p data-tool="mdnice编辑器"><strong><span leaf="">接着就可以正常调用aspera下载数据啦！</span></strong></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">iseq -i PRJNA1014406 -a -g -p 10 -t 16 -o ./PRJNA1014406_data</span><br></code></pre><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051817" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFjmoPqLYKezEqWQMWS4gnkyv7SR6CYNneR37x770WQibmgSbmGFfScMg/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFjmoPqLYKezEqWQMWS4gnkyv7SR6CYNneR37x770WQibmgSbmGFfScMg/640?wx_fmt=png&amp;from=appmsg"></span></figure><figure data-tool="mdnice编辑器"><span leaf=""><img data-aistatus="1" data-imgfileid="100051824" data-src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFfdKkddkMVv0Glh6J9SoaqeZ7zTDUPav7voSK7iclZEEKb1LgyUjpWzQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/mmbiz_png/siaia0BDGJdjSv2wG4pA1wSzoDTeAyYRLFfdKkddkMVv0Glh6J9SoaqeZ7zTDUPav7voSK7iclZEEKb1LgyUjpWzQ/640?wx_fmt=png&amp;from=appmsg"></span></figure><p data-tool="mdnice编辑器"><strong><span leaf="">看起来速度确实还行，但是就是文件比较大，终究也没有特别快hhh！</span></strong></p><p data-tool="mdnice编辑器"><strong><span leaf="">大家也试试看叭，看看有没有提升一些下载速度。下期咱们就可以正式开始处理上游数据啦！</span></strong></p></section><section><span leaf=""><br></span></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/mZ1QGbH2lFex-cuZ49C8gg",target="_blank" rel="noopener noreferrer">原文链接</a>
