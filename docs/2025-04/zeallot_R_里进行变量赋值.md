---
title: "zeallot-R 里进行变量赋值"
date: 2025-04-14T10:44:26Z
draft: ["false"]
tags: [
  "fetched",
  "老俊俊的生信笔记"
]
categories: ["Acdemic"]
---
zeallot-R 里进行变量赋值 by 老俊俊的生信笔记
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" data-pm-slice="0 0 []"><section nodeleaf=""><mp-common-profile data-pluginname="mpprofile" data-nickname="老俊俊的生信笔记" data-alias="JunJunLab" data-from="0" data-headimg="http://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usezgsqIGqjITSMggCTSoViaYeoKe2xoZr1IIvNJoztibQxibYHLDDoiabwAc6Ggws3Tvdo8EPss2nLgaVQ/0?wx_fmt=png" data-signature="老俊俊的生信技能和知识分享,我不是巨人,但你可以站在我的肩膀上更进一步!" data-id="MzkyMTI1MTYxNA==" data-is_biz_ban="0" data-service_type="1" data-verify_status="1"></mp-common-profile></section><h2 data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><span><span leaf="">引言</span></span><span></span></h2><blockquote><span><span leaf="">❝</span></span><p><span leaf="">分享一个 R 包 </span><strong><span leaf="">zeallot</span></strong><span leaf="">，</span><strong><span leaf="">zeallot</span></strong><span leaf=""> 通过提供 </span><strong><span leaf="">%&lt;-%</span></strong><span leaf=""> 操作符，允许在 R 中进行多重、拆包或解构赋值。使用 zeallot，你可以用明确的变量名使代码更加紧凑，拆包一个长列表的一部分或一个小列表的所有内容，解构并分配对象元素，或者一次性完成所有操作。类似于 python 里的操作。</span></p></blockquote><p data-tool="mdnice编辑器"><strong><span leaf="">链接：</span></strong><strong><span leaf="">https://github.com/r-lib/zeallot</span></strong></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100034540" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usexIH2tj6xQjnjxYA4fJT8ZoJdMmo7LMtt4Ew3l4Mqk6SxSHZNjOYCib5tHcg0eiaeoNhz4fRB2G9Tvg/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usexIH2tj6xQjnjxYA4fJT8ZoJdMmo7LMtt4Ew3l4Mqk6SxSHZNjOYCib5tHcg0eiaeoNhz4fRB2G9Tvg/640?wx_fmt=png&amp;from=appmsg"></span></figure><h2 data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><span><span leaf="">安装</span></span><span></span></h2><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">install.packages(</span><span><span leaf="">"zeallot"</span></span><span leaf="">)</span><br><br><span leaf="">devtools::install_github(</span><span><span leaf="">"nteetor/zeallot"</span></span><span leaf="">)</span><br></code></pre><h2 data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><span><span leaf="">示例</span></span><span></span></h2><p data-tool="mdnice编辑器"><span leaf="">解包一个值向量：</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">c(x, y) %&lt;-% c(</span><span><span leaf="">0</span></span><span leaf="">, </span><span><span leaf="">1</span></span><span leaf="">)</span><br><span><span leaf="">#&gt; x</span></span><br><span><span leaf="">#[1] 0</span></span><br><span><span leaf="">#&gt; y</span></span><br><span><span leaf="">#[1] 1</span></span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">拆包一个值列表:</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">c(r, d) %&lt;-% list(</span><span><span leaf="">2</span></span><span leaf="">, </span><span><span leaf="">2</span></span><span leaf="">)</span><br><span><span leaf="">#&gt; r</span></span><br><span><span leaf="">#[1] 2</span></span><br><span><span leaf="">#&gt; d</span></span><br><span><span leaf="">#[1] 2</span></span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">解构一个数据框并分配其列:</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">c(duration, wait) %&lt;-% head(faithful)</span><br><br><span><span leaf="">#&gt; duration</span></span><br><span><span leaf="">#[1] 3.600 1.800 3.333 2.283 4.533 2.883</span></span><br><span><span leaf="">#&gt; wait</span></span><br><span><span leaf="">#[1] 79 54 74 62 85 55</span></span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">将嵌套列表拆解为嵌套的左侧变量:</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">c(c(a, b), c(c, d)) %&lt;-% list(list(</span><span><span leaf="">1</span></span><span leaf="">, </span><span><span leaf="">2</span></span><span leaf="">), list(</span><span><span leaf="">3</span></span><span leaf="">, </span><span><span leaf="">4</span></span><span leaf="">))</span><br><span><span leaf="">#&gt; a</span></span><br><span><span leaf="">#[1] 1</span></span><br><span><span leaf="">#&gt; b</span></span><br><span><span leaf="">#[1] 2</span></span><br><span><span leaf="">#&gt; c</span></span><br><span><span leaf="">#[1] 3</span></span><br><span><span leaf="">#&gt; d</span></span><br><span><span leaf="">#[1] 4</span></span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">分解并部分解包一个列表。"a" 被分配给 first ，但 "b"、"c"、"d" 和 "e" 被分组并分配给一个变量:</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">c(first, ...rest) %&lt;-% list(</span><span><span leaf="">"a"</span></span><span leaf="">, </span><span><span leaf="">"b"</span></span><span leaf="">, </span><span><span leaf="">"c"</span></span><span leaf="">, </span><span><span leaf="">"d"</span></span><span leaf="">, </span><span><span leaf="">"e"</span></span><span leaf="">)</span><br><span leaf="">first</span><br><span><span leaf="">#[1] "a"</span></span><br><span leaf="">rest</span><br><span><span leaf="">#[[1]]</span></span><br><span><span leaf="">#[1] "b"</span></span><br><span><span leaf="">#</span></span><br><span><span leaf="">#[[2]]</span></span><br><span><span leaf="">#[1] "c"</span></span><br><span><span leaf="">#</span></span><br><span><span leaf="">#[[3]]</span></span><br><span><span leaf="">#[1] "d"</span></span><br><span><span leaf="">#</span></span><br><span><span leaf="">#[[4]]</span></span><br><span><span leaf="">#[1] "e"</span></span><br></code></pre><p data-tool="mdnice编辑器"><strong><span leaf="">purrr::safely</span></strong><span leaf=""> 函数返回一个“安全”的版本的函数。以下示例来自 safely 文档。在这个示例中，创建了一个安全版本的 log 函数:</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">safe_log &lt;- purrr::safely(log)</span><br><span leaf="">safe_log(</span><span><span leaf="">10</span></span><span leaf="">)</span><br><span><span leaf="">#$result</span></span><br><span><span leaf="">#[1] 2.302585</span></span><br><span><span leaf="">#</span></span><br><span><span leaf="">#$error</span></span><br><span><span leaf="">#NULL</span></span><br><br><span leaf="">safe_log(</span><span><span leaf="">"a"</span></span><span leaf="">)</span><br><span><span leaf="">#$result</span></span><br><span><span leaf="">#NULL</span></span><br><span><span leaf="">#</span></span><br><span><span leaf="">#$error</span></span><br><span><span leaf="">#&lt;simpleError in .f(...): non-numeric argument to mathematical function&gt;</span></span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">一个安全函数总是返回一个包含两个元素的列表，并且不会抛出错误。如果发生错误，返回列表中的错误元素会被设置，值元素为 NULL。如果调用成功，结果元素会被设置，错误元素为 NULL。</span></p><p data-tool="mdnice编辑器"><span leaf="">安全函数是一种很好的编写自文档代码的方式。然而，处理总是返回列表的返回值可能会变得繁琐，并可能抵消编写简洁、可读代码的努力。这时，zeallot 就派上用场了。</span></p><p data-tool="mdnice编辑器"><span leaf="">使用 zeallot 的解包运算符 </span><strong><span leaf="">%&lt;-%</span></strong><span leaf=""> ，我们可以将安全函数的返回值解包到两个明确的变量中，从而完全避免处理列表返回值。</span></p><pre data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><code><span leaf="">c(res, err) %&lt;-% safe_log(</span><span><span leaf="">10</span></span><span leaf="">)</span><br><span leaf="">res</span><br><span><span leaf="">#[1] 2.302585</span></span><br><span leaf="">err</span><br><span><span leaf="">#NULL</span></span><br></code></pre><p data-tool="mdnice编辑器"><span leaf="">操作符的命名结构是由通过 </span><strong><span leaf="">c()</span></strong><span leaf=""> 调用构建的平坦或嵌套的裸变量名集合。这些变量无需事先定义。右侧是一个向量、列表或其他 R 对象，用于拆包。 </span><strong><span leaf="">%&lt;-%</span></strong><span leaf=""> 将右侧拆包，检查变量名的数量与拆包值的数量是否匹配，然后将每个拆包值分配给一个变量。结果，而不是处理一个值列表，而是有两个独立的变量 res 和 err 。</span></p><h2 data-tool="mdnice编辑器"><span data-cacheurl="" data-remoteid=""></span><span><span leaf="">结尾</span></span><span></span></h2><blockquote><span><span leaf="">❝</span></span><p><strong><span leaf="">路漫漫其修远兮,吾将上下而求索。</span></strong></p></blockquote><hr><p data-tool="mdnice编辑器"><span leaf="">欢迎加入生信交流群。加我微信我也拉你进 </span><strong><span leaf="">微信群聊</span></strong><span leaf=""> </span><strong><span leaf="">老俊俊生信交流群</span></strong><span leaf=""> </span><strong><span leaf="">(微信交流群需收取 20 元入群费用,一旦交费,拒不退还!(防止骗子和便于管理))</span></strong><span leaf=""> 。</span></p><figure data-tool="mdnice编辑器"><span leaf=""><img data-imgfileid="100034539" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usexIH2tj6xQjnjxYA4fJT8ZoMop0apo4xRicksLZaMItWt4zScz0zIbwrvicSAfkIGyhWCB349MV0Qbg/640?wx_fmt=png&amp;from=appmsg" data-type="png" src="https://mmbiz.qpic.cn/sz_mmbiz_png/G5jjcE4usexIH2tj6xQjnjxYA4fJT8ZoMop0apo4xRicksLZaMItWt4zScz0zIbwrvicSAfkIGyhWCB349MV0Qbg/640?wx_fmt=png&amp;from=appmsg"></span></figure><hr><p data-tool="mdnice编辑器"><strong></strong></p><center data-tool="mdnice编辑器"><strong><span leaf=""> 往期回顾目录 </span></strong></center><p data-tool="mdnice编辑器"><span leaf=""><br></span></p><blockquote><span><span leaf="">❝</span></span><p><strong></strong></p><center><strong><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247518114&amp;idx=1&amp;sn=d9fd469d6487ad2f1f0a0e98665b0b3b&amp;scene=21#wechat_redirect"><span leaf="">GseaVis: 一种用于生物医学中基因集富集分析增强可视化的 R 包</span></a></strong></center><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247518044&amp;idx=1&amp;sn=1d9e937b7b59625858d941ae503eb6fa&amp;scene=21#wechat_redirect"><span leaf="">Logolas：一个 7 年前绘制 motif 的 R 包</span></a></center></strong><strong><center><span leaf="">多尺度足迹揭示了顺式调控元件的组织方式</span></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517965&amp;idx=1&amp;sn=693c77d042de0a3a2376d6dc82ceed16&amp;scene=21#wechat_redirect"><span leaf="">grateful：一键完成 R 包论文格式引用</span></a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517923&amp;idx=1&amp;sn=cbe8b3f4c003d791d8387a06410acad2&amp;scene=21#wechat_redirect"><span leaf="">RNA-seq 下游分析一条龙服务 broadSeq</span></a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517854&amp;idx=1&amp;sn=877331b4b86d5ec2b3e5ef356ea364cb&amp;scene=21#wechat_redirect"><span leaf="">使用 ggvfields 进行向量方向可视化</span></a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517751&amp;idx=1&amp;sn=7bf02a2a1084b23fc67dd7d3de547ed8&amp;scene=21#wechat_redirect"><span leaf="">Cell 2025 年 2 月 20 日 第 188 卷 第 4 期</span></a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517719&amp;idx=1&amp;sn=f591e71df11576143f44b769e31852cb&amp;scene=21#wechat_redirect"><span leaf="">NC 文章复现-Ribo-SEQ</span></a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517670&amp;idx=1&amp;sn=5bc0c60b5b2f18d7d5d4f90830b8e752&amp;scene=21#wechat_redirect"><span leaf="">RiboParser 流程化综合分析 ribo-seq 数据</span></a></center></strong><strong><center><a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247517649&amp;idx=1&amp;sn=5b59fa5d3fe030d10dd9ef33dcb47a1b&amp;scene=21#wechat_redirect"><span leaf="">riboTransVis：致力于 ribo-seq 数据分析</span></a></center></strong><p><br></p></blockquote></section><section><span leaf=""><br></span></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/TdhjGYEcYzzL-Wmcmf5QXg",target="_blank" rel="noopener noreferrer">原文链接</a>
