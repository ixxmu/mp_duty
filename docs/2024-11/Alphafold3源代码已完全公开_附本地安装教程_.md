---
title: "Alphafold3源代码已完全公开（附本地安装教程）"
date: 2024-11-11T22:58:30Z
draft: ["false"]
tags: [
  "fetched",
  "危生物组"
]
categories: ["Acdemic"]
---
Alphafold3源代码已完全公开（附本地安装教程） by 危生物组
------
<div><section><h1><span>Alphafold3开源</span></h1><blockquote><p>写在前面的<br>DeepMind于2024年5月9日正式发布Alphafold3，作为其前身AlphaFold2的升级版本Alphafold3采用了扩散模型来生成最终的三维结构。该模型通过加噪和去噪的过程，从随机噪声中逐步生成清晰的原子坐标。这一过程强调了局部和全局结构的学习，能够在不同的尺度上理解蛋白质的构象。同时Alphafold3采用了Pairformer模块取代了AlphaFold2中的Evoformer模块，专注于处理成对表示（pair representation），并通过成对特征的交互来更新单一特征（single representation）。这一模块的设计使得信息流动更加高效，能够更好地捕捉分子间的相互作用使得AlphaFold3在蛋白质及其他生物分子的结构预测方面具有更高的准确性和广度。此前，DeepMind并未公开Alphafold3的源代码，而是提供了一个在线的AlphaFold Server，用户可以在该平台上进行蛋白质结构预测。用户只需注册并登录，即可提交蛋白质序列进行预测。由于源代码未公开，同时受到网络的限制，国内用户想使用Alphafold3完成蛋白质与其他生物大分子或小分子的预测非常困难。最近，DeepMind公司公开了Alphafold3的源代码https://github.com/google-deepmind/alphafold3，使得蛋白质及其他生物分子的相互作用可以批量在本地进行。</p></blockquote><h3><span>Alphafold3安装</span></h3><p><img data-backh="557" data-backw="578" data-imgfileid="100001600" data-ratio="0.9631372549019608" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/V6qOSNufyVR57kgeYiaQkD8ibUFE18DgPzoel0mohGia5ej0jic5rROa2I9V4zA2viboVjSXpR7UxicTc0laB89jhkZA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1275" src="https://mmbiz.qpic.cn/sz_mmbiz_png/V6qOSNufyVR57kgeYiaQkD8ibUFE18DgPzoel0mohGia5ej0jic5rROa2I9V4zA2viboVjSXpR7UxicTc0laB89jhkZA/640?wx_fmt=png&amp;from=appmsg"></p><p>       要安装AlphaFold3，需要遵循以下步骤。请注意，AlphaFold3仅支持Linux操作系统，并且需要具备一定的硬件要求，包括NVIDIA GPU和足够的内存。</p><p>安装步骤</p><h4><span>1.准备环境：</span></h4><p>       确保服务器是Linux操作系统，推荐使用Ubuntu 22.04 LTS。需要至少64 GB的RAM和NVIDIA GPU（计算能力8.0或更高）。</p><h4><span>通过Docker安装</span></h4><p>       更新包管理器并安装必要的依赖</p><pre><code>sudo apt-get <span>update</span><br>sudo apt-<span>get</span> <span>install</span> ca-certificates curl<br></code></pre><p>       添加Docker的GPG密钥并安装Docker：</p><pre><code>sudo <span>install</span> -m <span>0755</span> -d /etc/apt/keyrings<br>sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc<br>sudo chmod a+r /etc/apt/keyrings/docker.asc<br>echo <span>"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu $(. /etc/os-release &amp;&amp; echo "</span>$VERSION_CODENAME<span>") stable"</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/<span>null</span><br>sudo apt-<span>get</span> <span>update</span><br>sudo apt-<span>get</span> <span>install</span> -y docker-ce docker-ce-cli containerd.io docker-buildx-<span>plugin</span> docker-compose-<span>plugin</span><br></code></pre><h4><span>2.安装NVIDIA驱动</span></h4><p>       安装NVIDIA驱动以支持GPU：</p><pre><code><span>sudo</span> ubuntu-drivers install<br>sudo nvidia-smi<br></code></pre><h4><span>通过github安装</span></h4><pre><code>git <span>clone</span> https://github.com/google-deepmind/alphafold3.git<br><span>cd</span> alphafold3<br></code></pre><h4><span>数据库下载</span></h4><p>         使用提供的Python脚本下载所需的基因数据库：确保下载目录有足够的存储空间（约252 GB的下载大小）。</p><pre><code>python3 fetch_databases.py --download_destination=<span><span>&lt;<span>DATABASES_DIR</span>&gt;</span><br></span></code></pre><h3><span>Alphafold3使用方法</span></h3><h4><span>使用前测试</span></h4><pre><code>{<br>  <span>"name"</span>: <span>"2PV7"</span>,<br>  <span>"sequences"</span>: [<br>    {<br>      <span>"protein"</span>: {<br>        <span>"id"</span>: [<span>"A"</span>, <span>"B"</span>],<br>        <span>"sequence"</span>: <span>"GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG"</span><br>      }<br>    },<br>  ],<br>  <span>"modelSeeds"</span>: [<span>1</span>],<br>  <span>"dialect"</span>: <span>"alphafold3"</span>,<br>  <span>"version"</span>: <span>1</span><br>}<br></code></pre><h4><span>基于命令行运行方法</span></h4><pre><code><span>#基于docker的使用方法</span><br>docker run -it \<br>    --volume $HOME/<span>af_input:</span>/root/af_input \<br>    --volume $HOME/<span>af_output:</span>/root/af_output \<br>    --volume &lt;MODEL_PARAMETERS_DIR&gt;<span>:/root/models</span> \<br>    --volume &lt;DATABASES_DIR&gt;<span>:/root/public_databases</span> \<br>    --gpus all \<br>    alphafold3 \<br><span>#基于python源码的使用方法</span><br>python run_alphafold.py \<br>    --json_path=<span>/root/af</span>_input/fold_input.json \<br>    --model_dir=<span>/root/models</span> \<br>    --output_dir=<span>/root/af</span>_output<br></code></pre><h3><span>Alphafold3的硬件依赖</span></h3><p>        AlphaFold 3 不支持其他操作系统，目前只支持Linux操作系统。安装完整版Alphafold3（包含数据库和预训练等库）需要高达 1 TB 的磁盘空间保存（建议使用 SSD 存储）和具有计算能力 8.0 或更高版本的 NVIDIA GPU（具有更多内存的 GPU 可以预测更大的蛋白质结构）。Deepmind团队已经验证，单个 NVIDIA A100 80 GB 或单个 NVIDIA H100 80 GB 可以容纳多达 5,120 个令牌的输入。我们已经在 NVIDIA A100 和 H100 GPU上验证了数值准确性。特别是对于长序列对象，序列搜索阶段可能会消耗大量运行内存，建议至少使用大于64GB的RAM运行。Deepmind公司提供了具有 NVIDIA A100 80 GB GPU 和纯净版Ubuntu 22.04 LTS 安装的计算机的安装说明。</p><h1><span>A100显卡要求</span></h1><pre><code>Mon Nov  <span>11</span> <span>12</span><span>:</span><span>00</span><span>:</span><span>00</span> <span>2024</span><br>+-----------------------------------------------------------------------------------------+<br><span>| NVIDIA-SMI 550.120                Driver Version: 550.120        CUDA Version: 12.6     |</span><br><span>|-----------------------------------------+------------------------+----------------------+<br>|</span> GPU  Name                 Persistence-M <span>| Bus-Id          Disp.A |</span> Volatile Uncorr. ECC <span>|<br>|</span> Fan  Temp   Perf          <span>Pwr:</span>Usage/Cap <span>|           Memory-Usage |</span> GPU-Util  Compute M. <span>|<br>|</span>                                         <span>|                        |</span>               MIG M. <span>|<br>|</span>=========================================+========================+======================<span>|<br>|</span>   <span>0</span>  NVIDIA A10<span>0</span>-SXM4-<span>80</span>GB          Off <span>|   00000000:00:05.0 Off |</span>                    <span>0</span> <span>|<br>|</span> N/A   <span>34</span>C    P<span>0</span>             <span>51</span>W /  <span>400</span>W <span>|       1MiB /  81920MiB |</span>      <span>0</span>%      Default <span>|<br>|</span>                                         <span>|                        |</span>             Disabled <span>|<br>+-----------------------------------------+------------------------+----------------------+<br><br>+-----------------------------------------------------------------------------------------+<br>|</span> <span>Processes:</span>                                                                              <span>|<br>|</span>  GPU   GI   CI        PID   Type   Process name                              GPU Memory <span>|<br>|</span>        ID   ID                                                               Usage      <span>|<br>|</span>=========================================================================================<span>|<br>|</span>  No running processes found                                                             <span>|<br>+-----------------------------------------------------------------------------------------+<br></span></code></pre><h3><span>基于Docker安装的NVIDIA支持</span></h3><pre><code>curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg <span>--dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \</span><br>  &amp;&amp; curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \<br>    sed 's<span>#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \</span><br>    sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list<br>sudo apt-get <span>update</span><br>sudo apt-<span>get</span> <span>install</span> -y nvidia-<span>container</span>-toolkit<br>nvidia-ctk runtime configure <span>--runtime=docker --config=$HOME/.config/docker/daemon.json</span><br>systemctl <span>--user restart docker</span><br>sudo nvidia-ctk config <span>--set nvidia-container-cli.no-cgroups --in-place</span><br>docker run <span>--rm --gpus all nvidia/cuda:12.6.0-base-ubuntu22.04 nvidia-smi</span><br></code></pre><h3><span>Linux NIVDIA显卡驱动安装</span></h3><pre><code>sudo apt-get -y <span>install</span> alsa-utils ubuntu-drivers-common<br>sudo ubuntu-drivers <span>install</span><br><br>sudo nvidia-smi <span>--gpu-reset</span><br><br>nvidia-smi  <span># Check that the drivers are installed.</span><br></code></pre></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/OjF7X9UhmVChI8ls81E8Cg",target="_blank" rel="noopener noreferrer">原文链接</a>
