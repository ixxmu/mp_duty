---
title: "实战！利用本地Alphafold3批量预测蛋白结构及其与生物大分子相互作用"
date: 2024-11-27T11:57:52Z
draft: ["false"]
tags: [
  "fetched",
  "危生物组"
]
categories: ["Acdemic"]
---
实战！利用本地Alphafold3批量预测蛋白结构及其与生物大分子相互作用 by 危生物组
------
<div><section><h1><span><span leaf="">实战！利用本地Alphafold3批量预测蛋白结构及其与生物大分子相互作用</span></span></h1><blockquote><p><span leaf="">写在前面的</span><span leaf=""><br></span><span leaf="">过去发布的5篇推送分别介绍了如何通过DeepMind发布在github的源代码安装Alphafold3平台，如何部署Alphafold3数据库，如何申请Alphafold3的模型参数、获批模型参数后如何部署以及Alphafold3预测蛋白及其与其他生物大分子相互作用的基本原理和算法。当Alphafold3被完全部署好后，就能利用它在本地完成蛋白质结构及相关互作动力学预测了。本期推送将详细介绍如何在本地使用Alphafold3。</span></p></blockquote><h3><span><span leaf="">使用Docker运行Alphafold3</span></span></h3><p><span leaf="">       在Alphafold3的github主页中，DeepMind团队介绍了两种使用Alphafold3的伪代码，一种是通过Docker运行alphafold3，另外一种是通过Singularity运行alphafold3.</span></p><pre><code><span><span leaf="">#使用docker运行alphafold3</span></span><span leaf=""><br></span><span leaf="">docker run -it \</span><span leaf=""><br></span><span leaf="">    --volume $HOME/</span><span><span leaf="">af_input:</span></span><span leaf="">/root/af_input \</span><span leaf=""><br></span><span leaf="">    --volume $HOME/</span><span><span leaf="">af_output:</span></span><span leaf="">/root/af_output \</span><span leaf=""><br></span><span leaf="">    --volume &lt;MODEL_PARAMETERS_DIR&gt;</span><span><span leaf="">:/root/models</span></span><span leaf=""> \</span><span leaf=""><br></span><span leaf="">    --volume &lt;SSD_DB_DIR&gt;</span><span><span leaf="">:/root/public_databases</span></span><span leaf=""> \</span><span leaf=""><br></span><span leaf="">    --volume &lt;DB_DIR&gt;</span><span><span leaf="">:/root/public_databases_fallback</span></span><span leaf=""> \</span><span leaf=""><br></span><span leaf="">    --gpus all \</span><span leaf=""><br></span><span leaf="">    alphafold3 \</span><span leaf=""><br></span><span leaf="">    python run_alphafold.py \</span><span leaf=""><br></span><span leaf="">    --json_path=</span><span><span leaf="">/root/af</span></span><span leaf="">_input/fold_input.json \</span><span leaf=""><br></span><span leaf="">    --model_dir=</span><span><span leaf="">/root/models</span></span><span leaf=""> \</span><span leaf=""><br></span><span leaf="">    --db_dir=</span><span><span leaf="">/root/public</span></span><span leaf="">_databases \</span><span leaf=""><br></span><span leaf="">    --db_dir=</span><span><span leaf="">/root/public</span></span><span leaf="">_databases_fallback \</span><span leaf=""><br></span><span leaf="">    --output_dir=</span><span><span leaf="">/root/af</span></span><span leaf="">_output</span><span leaf=""><br></span><span><span leaf="">#使用singularity运行alphafold3</span></span><span leaf=""><br></span><span leaf="">singularity exec \</span><span leaf=""><br></span><span leaf="">     --nv \</span><span leaf=""><br></span><span leaf="">     --bind $HOME/</span><span><span leaf="">af_input:</span></span><span leaf="">/root/af_input \</span><span leaf=""><br></span><span leaf="">     --bind $HOME/</span><span><span leaf="">af_output:</span></span><span leaf="">/root/af_output \</span><span leaf=""><br></span><span leaf="">     --bind &lt;MODEL_PARAMETERS_DIR&gt;</span><span><span leaf="">:/root/models</span></span><span leaf=""> \</span><span leaf=""><br></span><span leaf="">     --bind &lt;DB_DIR&gt;</span><span><span leaf="">:/root/public_databases</span></span><span leaf=""> \</span><span leaf=""><br></span><span leaf="">     alphafold3.sif \</span><span leaf=""><br></span><span leaf="">     python run_alphafold.py \</span><span leaf=""><br></span><span leaf="">     --json_path=</span><span><span leaf="">/root/af</span></span><span leaf="">_input/fold_input.json \</span><span leaf=""><br></span><span leaf="">     --model_dir=</span><span><span leaf="">/root/models</span></span><span leaf=""> \</span><span leaf=""><br></span><span leaf="">     --db_dir=</span><span><span leaf="">/root/public</span></span><span leaf="">_databases \</span><span leaf=""><br></span><span leaf="">     --output_dir=</span><span><span leaf="">/root/af</span></span><span leaf="">_output</span><span leaf=""><br></span></code></pre><p><span leaf="">       简而言之，deepmind给出的教程是通过虚拟空间完成aphafold3 pipeline的运行，事实上，Singularity和Docker都是容器技术（容器可以理解成虚拟空间），但它们在设计理念、使用场景和功能上有一些显著的区别。前者支持非root用户运行容器，这使得它在高性能计算（HPC）环境中更为友好，因为许多科研用户没有root权限。Singularity在容器启动前后保持用户上下文不变，确保用户在容器内外的权限一致。而后者通常需要root权限来运行容器，这在某些环境中可能会造成限制，特别是在共享的计算资源上。此外Singularity使用只读的SIF（Singularity Image Format）文件作为主要的容器格式，这种格式在生产环境中使用，强调了容器的可移植性和安全性。相比之下使用可读写的镜像，允许用户在容器内进行修改和更新，此外Docker最初被设计用于软件开发和部署，适合快速迭代和微服务架构，广泛应用于云计算和DevOps环境。</span></p><h3><span><span leaf="">Docker命令格式</span></span></h3><p><span leaf="">       DeepMind给出的基于docker运行alphafold3的伪代码教程中涉及到了docker的volume参数，理解这个参数对于完成真实数据的分析至关重要。事实上docker --volume（或 -v）是docker命令中的一个选项，用于在运行docker容器时挂载主机上的目录或文件到容器内。用更通俗的语言理解，可以把计算机操作系统理解为一个空间，docker理解为计算机系统空间中创造的一个更加虚拟的空间，这个docker空间可以和计算机系统的空间互通，在docker中同样可以部署按照软件，这些软件在docker虚拟空间运行时不会影响外部计算机空间。而外部计算机空间的数据、文件如果要送至docker虚拟空间运行，则需要一个输送的桥梁，那么--volume参数可以狭隘地理解为起到桥梁的作用。--volume参数的用法如下。继续使用两个空间的概念讲解--volume用法，由于在计算机系统的空间中，自己存放的数据或文件夹的路径是已知的，这些数据被送往docker这个虚拟空间后，需要给送进虚拟空间的数据贴上标签，这样docker空间中的软件才知道不同的--volume参数输入的数据分别是什么</span></p><pre><code><span><span leaf="">#/host/path是自己真实数据的路径</span></span><span leaf=""><br></span><span><span leaf="">#/container/path是真实数据的路径输入至docker系统后的路径</span></span><span leaf=""><br></span><span><span leaf="">--volume /host/path:/container/path</span></span><span leaf=""><br></span></code></pre><h3><span><span leaf="">基于Docker运行Alphafold3</span></span></h3><h4><span><span leaf="">数据准备</span></span></h4><p><span leaf="">       alphafold3支持.json格式的数据输入，我以deepmind给的示例数据为例（如下），其中name后面双引号内给定蛋白的名称，可以自定义，id后跟蛋白的chain，如果一个蛋白可能存在多聚体可以输入A, B, C, D等，sequence后的双引号给出蛋白的序列，可以自定义，modelSeeds后的数字是随机数种子，可以自定义，建议选择好随机数种子，不过作为示例，我就按照默认的1执行。保存该文件命名为alphafold_input.json用于预测结构</span></p><pre><code><span leaf="">{</span><span leaf=""><br></span><span leaf="">  </span><span><span leaf="">"name"</span></span><span leaf="">: </span><span><span leaf="">"2PV7"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">  </span><span><span leaf="">"sequences"</span></span><span leaf="">: [</span><span leaf=""><br></span><span leaf="">    {</span><span leaf=""><br></span><span leaf="">      </span><span><span leaf="">"protein"</span></span><span leaf="">: {</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"id"</span></span><span leaf="">: [</span><span><span leaf="">"A"</span></span><span leaf="">, </span><span><span leaf="">"B"</span></span><span leaf="">],</span><span leaf=""><br></span><span leaf="">        </span><span><span leaf="">"sequence"</span></span><span leaf="">: </span><span><span leaf="">"GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG"</span></span><span leaf=""><br></span><span leaf="">      }</span><span leaf=""><br></span><span leaf="">    }</span><span leaf=""><br></span><span leaf="">  ],</span><span leaf=""><br></span><span leaf="">  </span><span><span leaf="">"modelSeeds"</span></span><span leaf="">: [</span><span><span leaf="">1</span></span><span leaf="">],</span><span leaf=""><br></span><span leaf="">  </span><span><span leaf="">"dialect"</span></span><span leaf="">: </span><span><span leaf="">"alphafold3"</span></span><span leaf="">,</span><span leaf=""><br></span><span leaf="">  </span><span><span leaf="">"version"</span></span><span leaf="">: </span><span><span leaf="">1</span></span><span leaf=""><br></span><span leaf="">}</span><span leaf=""><br></span></code></pre><h4><span><span leaf="">运行命令</span></span></h4><p><span leaf="">       在运行命令前，需要做一些准备，包括创建alphafold3的输入数据、alphafold3输出结果存放路径、alphafold3的数据库和模型参数。我的这些数据是这样准备的</span></p><pre><code><span><span leaf="">#创建alphafold3输入数据存放的路径，并修改此路径权限为可读可执行</span></span><span leaf=""><br></span><span leaf="">mkdir ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/af_input &amp;&amp; chmod -R </span><span><span leaf="">755</span></span><span leaf=""> ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/af_input</span><span leaf=""><br></span><span><span leaf="">#移动蛋白质序列数据到输入文件夹，拟准备结构预测</span></span><span leaf=""><br></span><span leaf="">mv alphafold_input.json ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/af_input</span><span leaf=""><br></span><span><span leaf="">#创建alphafold3输出结果存放路径，并修改此路径权限为可读可写可执行</span></span><span leaf=""><br></span><span leaf="">mkdir ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/af_output &amp;&amp; chmod -R </span><span><span leaf="">777</span></span><span leaf=""> ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/af_output</span><span leaf=""><br></span><span><span leaf="">#进入alphafold3模型参数存放路径，此路径下存放有af3.bin模型参数文件，并修改此路径权限为可读可执行，此命令只需第一次使用alphafold3时执行即可</span></span><span leaf=""><br></span><span leaf="">cd ~</span><span><span leaf="">/home/software</span></span><span><span leaf="">/alphafold3/models</span></span><span leaf=""> &amp;&amp; chmod -R </span><span><span leaf="">755</span></span><span leaf=""> $PWD</span><span leaf=""><br></span><span><span leaf="">#进入alphafold3依赖数据库路径，此路径下存放了alphafold3的数据库，解压pdb_2022_09_28_mmcif_files.tar文件，上一次构建数据库时此文件忘记解压缩。该命令执行一次即可</span></span><span leaf=""><br></span><span leaf="">cd ~</span><span><span leaf="">/home/software</span></span><span><span leaf="">/alphafold3/database</span></span><span leaf=""> &amp;&amp; tar -xf pdb_2022_09_28_mmcif_files.tar /dev/null </span><span><span leaf="">2</span></span><span leaf="">&gt;&amp;</span><span><span leaf="">1</span></span><span leaf=""><br></span><span><span leaf="">#进入解压缩后路径，修改此路径权限为可读可执行，此路径下存放了全部已知结构的蛋白质cit文件，此命令执行一次即可</span></span><span leaf=""><br></span><span leaf="">cd mmcif_files &amp;&amp; chmod -R </span><span><span leaf="">755</span></span><span leaf=""> $PWD</span><span leaf=""><br></span></code></pre><p><span leaf="">       完成好数据准备后，可以开始运行基于docker的alphafold3命令</span></p><pre><code><span leaf="">docker run -it \</span><span leaf=""><br></span><span><span leaf="">#挂载计算机中输入数据路径为docker空间中的虚拟路径/root/af_input</span></span><span leaf=""><br></span><span leaf="">--volume ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/</span><span><span leaf="">af_input:</span></span><span leaf="">/root/af_input \</span><span leaf=""><br></span><span><span leaf="">#挂载计算机中~/home/software-test/AF3-test/af_output路径到docker虚拟空间，作为结果输出路径</span></span><span leaf=""><br></span><span leaf="">--volume ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/</span><span><span leaf="">af_output:</span></span><span leaf="">/root/af_output \</span><span leaf=""><br></span><span><span leaf="">#挂载af3.bin模型参数所在路径~/home/software/alphafold3/models为docker空间模型参数路径/root/models</span></span><span leaf=""><br></span><span leaf="">--volume ~</span><span><span leaf="">/home/software</span></span><span><span leaf="">/alphafold3/models</span></span><span><span leaf="">:/root/models</span></span><span leaf=""> \</span><span leaf=""><br></span><span><span leaf="">#挂载AF3数据库路径~/home/software/alphafold3/database为docker空间数据路径/root/public_databases</span></span><span leaf=""><br></span><span leaf="">--volume ~</span><span><span leaf="">/home/software</span></span><span><span leaf="">/alphafold3/database</span></span><span><span leaf="">:/root/public_databases</span></span><span leaf=""> \</span><span leaf=""><br></span><span><span leaf="">#使用2个GPU完成预测结构</span></span><span leaf=""><br></span><span leaf="">--gpus </span><span><span leaf="">2</span></span><span leaf=""> \</span><span leaf=""><br></span><span><span leaf="">#调用docker空间中的alphafold3</span></span><span leaf=""><br></span><span leaf="">alphafold3 \</span><span leaf=""><br></span><span><span leaf="">#调用docker空间的python</span></span><span leaf=""><br></span><span leaf="">python \</span><span leaf=""><br></span><span><span leaf="">#用docker空间的python运行docker空间中alphafold3的程序</span></span><span leaf=""><br></span><span leaf="">/app/alphafold/run_alphafold.py \</span><span leaf=""><br></span><span><span leaf="">#指定输入蛋白质序列数据alphafold_input.json</span></span><span leaf=""><br></span><span leaf="">--json_path=</span><span><span leaf="">/root/af</span></span><span leaf="">_input/alphafold_input.json \</span><span leaf=""><br></span><span><span leaf="">#指定模型参数</span></span><span leaf=""><br></span><span leaf="">--model_dir=</span><span><span leaf="">/root/models</span></span><span leaf=""> \</span><span leaf=""><br></span><span><span leaf="">#指定预测结果输出路径</span></span><span leaf=""><br></span><span leaf="">--output_dir=</span><span><span leaf="">/root/af</span></span><span leaf="">_output</span><span leaf=""><br></span></code></pre><h4><span><span leaf="">运行状态记录</span></span></h4><p><span leaf="">       我在输入上述命令运行的过程中，有两个小小的报错，rocm和tpu因为在docker中的版本问题可能无法初始化。这个两个报错不影响alphafold3的正常运行</span></p><pre><code><span leaf="">I1126 13:40:20.485044 140366166138880 folding_input.py:1044] Detected /root/af_input/alphafold_input.json is an AlphaFold 3 JSON since the top-level is not a list.</span><span leaf=""><br></span><span leaf="">I1126 13:40:21.109509 140366166138880 xla_bridge.py:895] Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'</span><span leaf=""><br></span><span leaf="">I1126 13:40:21.111025 140366166138880 xla_bridge.py:895] Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: libtpu.so: cannot open shared object file: No such file or directory</span><span leaf=""><br></span><span leaf="">Running AlphaFold 3. Please note that standard AlphaFold 3 model parameters are</span><span leaf=""><br></span><span leaf="">only available under terms of </span><span><span leaf="">use</span></span><span leaf=""> provided </span><span><span leaf="">at</span></span><span leaf=""><br></span><span leaf="">https://github.com/google-deepmind/alphafold3/</span><span><span leaf="">blob</span></span><span leaf="">/</span><span><span leaf="">main</span></span><span leaf="">/WEIGHTS_TERMS_OF_USE.md.</span><span leaf=""><br></span><span><span leaf="">If</span></span><span leaf=""> you </span><span><span leaf="">do</span></span><span leaf=""> </span><span><span leaf="">not</span></span><span leaf=""> agree </span><span><span leaf="">to</span></span><span leaf=""> these terms </span><span><span leaf="">and</span></span><span leaf=""> </span><span><span leaf="">are</span></span><span leaf=""> </span><span><span leaf="">using</span></span><span leaf=""> AlphaFold </span><span><span leaf="">3</span></span><span leaf=""> derived </span><span><span leaf="">model</span></span><span leaf=""><br></span><span><span leaf="">parameters</span></span><span leaf="">, </span><span><span leaf="">cancel</span></span><span leaf=""> execution </span><span><span leaf="">of</span></span><span leaf=""> AlphaFold </span><span><span leaf="">3</span></span><span leaf=""> inference </span><span><span leaf="">with</span></span><span leaf=""> CTRL-C, </span><span><span leaf="">and</span></span><span leaf=""> </span><span><span leaf="">do</span></span><span leaf=""> </span><span><span leaf="">not</span></span><span leaf=""><br></span><span><span leaf="">use</span></span><span leaf=""> the </span><span><span leaf="">model</span></span><span leaf=""> parameters.</span><span leaf=""><br></span><span><span leaf="">Found</span></span><span leaf=""> </span><span><span leaf="">local</span></span><span leaf=""> devices: [CudaDevice(</span><span><span leaf="">id</span></span><span leaf="">=</span><span><span leaf="">0</span></span><span leaf="">), CudaDevice(</span><span><span leaf="">id</span></span><span leaf="">=</span><span><span leaf="">1</span></span><span leaf="">)]</span><span leaf=""><br></span><span leaf="">Building </span><span><span leaf="">model</span></span><span leaf=""> </span><span><span leaf="">from</span></span><span leaf=""> scratch...</span><span leaf=""><br></span><span leaf="">Processing </span><span><span leaf="">1</span></span><span leaf=""> fold inputs.</span><span leaf=""><br></span><span leaf="">Processing fold </span><span><span leaf="">input</span></span><span leaf=""> </span><span><span leaf="">2</span></span><span leaf="">PV7</span><span leaf=""><br></span><span leaf="">Checking we can </span><span><span leaf="">load</span></span><span leaf=""> the </span><span><span leaf="">model</span></span><span leaf=""> parameters...</span><span leaf=""><br></span><span leaf="">Running </span><span><span leaf="">data</span></span><span leaf=""> pipeline...</span><span leaf=""><br></span><span leaf="">Processing </span><span><span leaf="">chain</span></span><span leaf=""> A</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.834818</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">40</span></span><span leaf="">] Getting protein MSAs </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf=""> GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.836811</span></span><span leaf=""> </span><span><span leaf="">140219542140480</span></span><span leaf=""> jackhmmer.py:</span><span><span leaf="">78</span></span><span leaf="">] </span><span><span leaf="">Query</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf="">: GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.837389</span></span><span leaf=""> </span><span><span leaf="">140219173041728</span></span><span leaf=""> jackhmmer.py:</span><span><span leaf="">78</span></span><span leaf="">] </span><span><span leaf="">Query</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf="">: GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.838079</span></span><span leaf=""> </span><span><span leaf="">140218669725248</span></span><span leaf=""> jackhmmer.py:</span><span><span leaf="">78</span></span><span leaf="">] </span><span><span leaf="">Query</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf="">: GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.838415</span></span><span leaf=""> </span><span><span leaf="">140219542140480</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">68</span></span><span leaf="">] Launching subprocess </span><span><span leaf="">"/hmmer/bin/jackhmmer -o /dev/null -A /tmp/tmp1kibjvz1/output.sto --noali --F1 0.0005 --F2 5e-05 --F3 5e-07 --cpu 8 -N 1 -E 0.0001 --incE 0.0001 /tmp/tmp1kibjvz1/query.fasta /root/public_databases/uniref90_2022_05.fa"</span></span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.838522</span></span><span leaf=""> </span><span><span leaf="">140218468398656</span></span><span leaf=""> jackhmmer.py:</span><span><span leaf="">78</span></span><span leaf="">] </span><span><span leaf="">Query</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf="">: GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.838822</span></span><span leaf=""> </span><span><span leaf="">140219173041728</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">68</span></span><span leaf="">] Launching subprocess </span><span><span leaf="">"/hmmer/bin/jackhmmer -o /dev/null -A /tmp/tmpgmrprwok/output.sto --noali --F1 0.0005 --F2 5e-05 --F3 5e-07 --cpu 8 -N 1 -E 0.0001 --incE 0.0001 /tmp/tmpgmrprwok/query.fasta /root/public_databases/mgy_clusters_2022_05.fa"</span></span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.839107</span></span><span leaf=""> </span><span><span leaf="">140218669725248</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">68</span></span><span leaf="">] Launching subprocess </span><span><span leaf="">"/hmmer/bin/jackhmmer -o /dev/null -A /tmp/tmpsx3w1xyj/output.sto --noali --F1 0.0005 --F2 5e-05 --F3 5e-07 --cpu 8 -N 1 -E 0.0001 --incE 0.0001 /tmp/tmpsx3w1xyj/query.fasta /root/public_databases/bfd-first_non_consensus_sequences.fasta"</span></span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">13</span></span><span leaf="">:</span><span><span leaf="">40</span></span><span leaf="">:</span><span><span leaf="">52.913183</span></span><span leaf=""> </span><span><span leaf="">140218468398656</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">68</span></span><span leaf="">] Launching subprocess </span><span><span leaf="">"/hmmer/bin/jackhmmer -o /dev/null -A /tmp/tmp4wnjxgtf/output.sto --noali --F1 0.0005 --F2 5e-05 --F3 5e-07 --cpu 8 -N 1 -E 0.0001 --incE 0.0001 /tmp/tmp4wnjxgtf/query.fasta /root/public_databases/uniprot_all_2021_04.fa"</span></span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">14</span></span><span leaf="">:</span><span><span leaf="">02</span></span><span leaf="">:</span><span><span leaf="">20.881261</span></span><span leaf=""> </span><span><span leaf="">140218669725248</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">97</span></span><span leaf="">] Finished Jackhmmer </span><span><span leaf="">in</span></span><span leaf=""> </span><span><span leaf="">1288.042</span></span><span leaf=""> seconds</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">14</span></span><span leaf="">:</span><span><span leaf="">55</span></span><span leaf="">:</span><span><span leaf="">56.417176</span></span><span leaf=""> </span><span><span leaf="">140219542140480</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">97</span></span><span leaf="">] Finished Jackhmmer </span><span><span leaf="">in</span></span><span leaf=""> </span><span><span leaf="">4503.578</span></span><span leaf=""> seconds</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">17</span></span><span leaf="">:</span><span><span leaf="">29.204052</span></span><span leaf=""> </span><span><span leaf="">140218468398656</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">97</span></span><span leaf="">] Finished Jackhmmer </span><span><span leaf="">in</span></span><span leaf=""> </span><span><span leaf="">5796.291</span></span><span leaf=""> seconds</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">26</span></span><span leaf="">:</span><span><span leaf="">17.612687</span></span><span leaf=""> </span><span><span leaf="">140219173041728</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">97</span></span><span leaf="">] Finished Jackhmmer </span><span><span leaf="">in</span></span><span leaf=""> </span><span><span leaf="">6324.774</span></span><span leaf=""> seconds</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">26</span></span><span leaf="">:</span><span><span leaf="">17.708755</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">73</span></span><span leaf="">] Getting protein MSAs took </span><span><span leaf="">6324.87</span></span><span leaf=""> seconds </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf=""> GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">26</span></span><span leaf="">:</span><span><span leaf="">17.708882</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">79</span></span><span leaf="">] Deduplicating MSAs </span><span><span leaf="">and</span></span><span leaf=""> getting protein templates </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf=""> GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">26</span></span><span leaf="">:</span><span><span leaf="">17.800101</span></span><span leaf=""> </span><span><span leaf="">140219542140480</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">68</span></span><span leaf="">] Launching subprocess </span><span><span leaf="">"/hmmer/bin/hmmbuild --informat stockholm --hand --amino /tmp/tmpz08tzay3/output.hmm /tmp/tmpz08tzay3/query.msa"</span></span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">26</span></span><span leaf="">:</span><span><span leaf="">18.118319</span></span><span leaf=""> </span><span><span leaf="">140219542140480</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">97</span></span><span leaf="">] Finished Hmmbuild </span><span><span leaf="">in</span></span><span leaf=""> </span><span><span leaf="">0.318</span></span><span leaf=""> seconds</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">26</span></span><span leaf="">:</span><span><span leaf="">18.119754</span></span><span leaf=""> </span><span><span leaf="">140219542140480</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">68</span></span><span leaf="">] Launching subprocess </span><span><span leaf="">"/hmmer/bin/hmmsearch --noali --cpu 8 --F1 0.1 --F2 0.1 --F3 0.1 -E 100 --incE 100 --domE 100 --incdomE 100 -A /tmp/tmp5ypfqsbe/output.sto /tmp/tmp5ypfqsbe/query.hmm /root/public_databases/pdb_seqres_2022_09_28.fasta"</span></span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">26</span></span><span leaf="">:</span><span><span leaf="">28.741594</span></span><span leaf=""> </span><span><span leaf="">140219542140480</span></span><span leaf=""> subprocess_utils.py:</span><span><span leaf="">97</span></span><span leaf="">] Finished Hmmsearch </span><span><span leaf="">in</span></span><span leaf=""> </span><span><span leaf="">10.622</span></span><span leaf=""> seconds</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">44</span></span><span leaf="">:</span><span><span leaf="">52.984116</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">108</span></span><span leaf="">] Deduplicating MSAs </span><span><span leaf="">and</span></span><span leaf=""> getting protein templates took </span><span><span leaf="">1115.28</span></span><span leaf=""> seconds </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf=""> GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">44</span></span><span leaf="">:</span><span><span leaf="">52.984334</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">115</span></span><span leaf="">] Filtering protein templates </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf=""> GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">44</span></span><span leaf="">:</span><span><span leaf="">52.986828</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">124</span></span><span leaf="">] Filtering protein templates took </span><span><span leaf="">0.00</span></span><span leaf=""> seconds </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">sequence</span></span><span leaf=""> GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG</span><span leaf=""><br></span><span leaf="">Processing </span><span><span leaf="">chain</span></span><span leaf=""> A took </span><span><span leaf="">7440.26</span></span><span leaf=""> seconds</span><span leaf=""><br></span><span leaf="">Processing </span><span><span leaf="">chain</span></span><span leaf=""> B</span><span leaf=""><br></span><span leaf="">Processing </span><span><span leaf="">chain</span></span><span leaf=""> B took </span><span><span leaf="">0.10</span></span><span leaf=""> seconds</span><span leaf=""><br></span><span><span leaf="">Output</span></span><span leaf=""> </span><span><span leaf="">directory</span></span><span leaf="">: /root/af_output/</span><span><span leaf="">2</span></span><span leaf="">pv7</span><span leaf=""><br></span><span leaf="">Writing </span><span><span leaf="">model</span></span><span leaf=""> </span><span><span leaf="">input</span></span><span leaf=""> </span><span><span leaf="">JSON</span></span><span leaf=""> </span><span><span leaf="">to</span></span><span leaf=""> /root/af_output/</span><span><span leaf="">2</span></span><span leaf="">pv7</span><span leaf=""><br></span><span leaf="">Predicting </span><span><span leaf="">3</span></span><span leaf="">D structure </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">2</span></span><span leaf="">PV7 </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">seed</span></span><span leaf="">(s) (</span><span><span leaf="">1</span></span><span leaf="">,)...</span><span leaf=""><br></span><span leaf="">Featurising </span><span><span leaf="">data</span></span><span leaf=""> </span><span><span leaf="">for</span></span><span leaf=""> seeds (</span><span><span leaf="">1</span></span><span leaf="">,)...</span><span leaf=""><br></span><span leaf="">Featurising </span><span><span leaf="">2</span></span><span leaf="">PV7 </span><span><span leaf="">with</span></span><span leaf=""> rng_seed </span><span><span leaf="">1.</span></span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">44</span></span><span leaf="">:</span><span><span leaf="">58.196067</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">165</span></span><span leaf="">] processing </span><span><span leaf="">2</span></span><span leaf="">PV7, random_seed=</span><span><span leaf="">1</span></span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">44</span></span><span leaf="">:</span><span><span leaf="">58.240150</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">258</span></span><span leaf="">] Calculating bucket </span><span><span leaf="">size</span></span><span leaf=""> </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">input</span></span><span leaf=""> </span><span><span leaf="">with</span></span><span leaf=""> </span><span><span leaf="">596</span></span><span leaf=""> tokens.</span><span leaf=""><br></span><span leaf="">I1126 </span><span><span leaf="">15</span></span><span leaf="">:</span><span><span leaf="">44</span></span><span leaf="">:</span><span><span leaf="">58.240287</span></span><span leaf=""> </span><span><span leaf="">140366166138880</span></span><span leaf=""> pipeline.py:</span><span><span leaf="">264</span></span><span leaf="">] Got bucket </span><span><span leaf="">size</span></span><span leaf=""> </span><span><span leaf="">768</span></span><span leaf=""> </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">input</span></span><span leaf=""> </span><span><span leaf="">with</span></span><span leaf=""> </span><span><span leaf="">596</span></span><span leaf=""> tokens, resulting </span><span><span leaf="">in</span></span><span leaf=""> </span><span><span leaf="">172</span></span><span leaf=""> padded tokens.</span><span leaf=""><br></span><span leaf="">Featurising </span><span><span leaf="">2</span></span><span leaf="">PV7 </span><span><span leaf="">with</span></span><span leaf=""> rng_seed </span><span><span leaf="">1</span></span><span leaf=""> took </span><span><span leaf="">9.68</span></span><span leaf=""> seconds.</span><span leaf=""><br></span><span leaf="">Featurising </span><span><span leaf="">data</span></span><span leaf=""> </span><span><span leaf="">for</span></span><span leaf=""> seeds (</span><span><span leaf="">1</span></span><span leaf="">,) took  </span><span><span leaf="">14.49</span></span><span leaf=""> seconds.</span><span leaf=""><br></span><span leaf="">Running </span><span><span leaf="">model</span></span><span leaf=""> inference </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">seed</span></span><span leaf=""> </span><span><span leaf="">1.</span></span><span leaf="">..</span><span leaf=""><br></span><span leaf="">Running </span><span><span leaf="">model</span></span><span leaf=""> inference </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">seed</span></span><span leaf=""> </span><span><span leaf="">1</span></span><span leaf=""> took  </span><span><span leaf="">84.60</span></span><span leaf=""> seconds.</span><span leaf=""><br></span><span leaf="">Extracting </span><span><span leaf="">output</span></span><span leaf=""> structures (one per </span><span><span leaf="">sample</span></span><span leaf="">) </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">seed</span></span><span leaf=""> </span><span><span leaf="">1.</span></span><span leaf="">..</span><span leaf=""><br></span><span leaf="">Extracting </span><span><span leaf="">output</span></span><span leaf=""> structures (one per </span><span><span leaf="">sample</span></span><span leaf="">) </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">seed</span></span><span leaf=""> </span><span><span leaf="">1</span></span><span leaf=""> took  </span><span><span leaf="">0.64</span></span><span leaf=""> seconds.</span><span leaf=""><br></span><span leaf="">Running </span><span><span leaf="">model</span></span><span leaf=""> inference </span><span><span leaf="">and</span></span><span leaf=""> extracting </span><span><span leaf="">output</span></span><span leaf=""> structures </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">seed</span></span><span leaf=""> </span><span><span leaf="">1</span></span><span leaf=""> took  </span><span><span leaf="">85.24</span></span><span leaf=""> seconds.</span><span leaf=""><br></span><span leaf="">Running </span><span><span leaf="">model</span></span><span leaf=""> inference </span><span><span leaf="">and</span></span><span leaf=""> extracting </span><span><span leaf="">output</span></span><span leaf=""> structures </span><span><span leaf="">for</span></span><span leaf=""> seeds (</span><span><span leaf="">1</span></span><span leaf="">,) took  </span><span><span leaf="">85.24</span></span><span leaf=""> seconds.</span><span leaf=""><br></span><span leaf="">Writing outputs </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">2</span></span><span leaf="">PV7 </span><span><span leaf="">for</span></span><span leaf=""> </span><span><span leaf="">seed</span></span><span leaf="">(s) (</span><span><span leaf="">1</span></span><span leaf="">,)...</span><span leaf=""><br></span><span leaf="">Done processing fold </span><span><span leaf="">input</span></span><span leaf=""> </span><span><span leaf="">2</span></span><span leaf="">PV7.</span><span leaf=""><br></span><span leaf="">Done processing </span><span><span leaf="">1</span></span><span leaf=""> fold inputs.</span><span leaf=""><br></span></code></pre><h4><span><span leaf="">运行结果</span></span></h4><p><span leaf="">       大约2个小时完成了蛋白质结构预测，完成结构预测后，输出路径下会多出如下文件夹和文件，其中seed-1_sample-数字是alphafold3预测的多个模型结果文件夹。每个文件夹中的model.cif文件是预测好的结果，可以使用pymol等软件查看。此外，每个文件夹中还有summary_confidences.json结果文件，记录了蛋白质结构的PTM和IPTM等信息，用于评估结构可靠性.其中PTM（预测模板建模分数）用于衡量整体预测的复合物折叠与真实结构的相似性,分数高于 0.5 表示预测的复合物折叠可能与真实结构相似。IPTM（界面预测模板建模分数）用于评估复合物中各个亚基之间相对位置的预测准确性，IPTM 分数高于 0.8 表示预测的质量较高，具有较高的置信度，IPTM 分数低于 0.6 则可能表示预测失败。</span></p><pre><code><span leaf="">├── </span><span><span leaf="">af3</span></span><span><span leaf="">.bin</span></span><span leaf=""><br></span><span leaf="">├── </span><span><span leaf="">af_input</span></span><span leaf=""><br></span><span leaf="">│   └── </span><span><span leaf="">alphafold_input</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">├── </span><span><span leaf="">af_output</span></span><span leaf=""><br></span><span leaf="">│   └── 2</span><span><span leaf="">pv7</span></span><span leaf=""><br></span><span leaf="">│       ├── 2</span><span><span leaf="">pv7_confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       ├── 2</span><span><span leaf="">pv7_data</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       ├── 2</span><span><span leaf="">pv7_model</span></span><span><span leaf="">.cif</span></span><span leaf=""><br></span><span leaf="">│       ├── 2</span><span><span leaf="">pv7_summary_confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       ├── </span><span><span leaf="">ranking_scores</span></span><span><span leaf="">.csv</span></span><span leaf=""><br></span><span leaf="">│       ├── </span><span><span leaf="">seed-1_sample-0</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">model</span></span><span><span leaf="">.cif</span></span><span leaf=""><br></span><span leaf="">│       │   └── </span><span><span leaf="">summary_confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       ├── </span><span><span leaf="">seed-1_sample-1</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">model</span></span><span><span leaf="">.cif</span></span><span leaf=""><br></span><span leaf="">│       │   └── </span><span><span leaf="">summary_confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       ├── </span><span><span leaf="">seed-1_sample-2</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">model</span></span><span><span leaf="">.cif</span></span><span leaf=""><br></span><span leaf="">│       │   └── </span><span><span leaf="">summary_confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       ├── </span><span><span leaf="">seed-1_sample-3</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">model</span></span><span><span leaf="">.cif</span></span><span leaf=""><br></span><span leaf="">│       │   └── </span><span><span leaf="">summary_confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       ├── </span><span><span leaf="">seed-1_sample-4</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       │   ├── </span><span><span leaf="">model</span></span><span><span leaf="">.cif</span></span><span leaf=""><br></span><span leaf="">│       │   └── </span><span><span leaf="">summary_confidences</span></span><span><span leaf="">.json</span></span><span leaf=""><br></span><span leaf="">│       └── </span><span><span leaf="">TERMS_OF_USE</span></span><span><span leaf="">.md</span></span><span leaf=""><br></span><span leaf="">└── </span><span><span leaf="">alphafold3_command</span></span><span><span leaf="">.sh</span></span><span leaf=""><br></span></code></pre><p><span leaf="">       ranking_scores.csv文件包含了所有预测的排名分数，这些分数用于评估和比较不同预测模型的质量，该文件记录了每个预测样本的排名分数，这些分数是基于整体结构的置信度（如 pTM 和 ipTM 分数）计算得出的，户可以根据 其中的分数来选择最佳的预测模型。分数越高，表示模型的预测质量越好。其中我的ranking_socre提示选择第5个模型较好。</span></p><pre><code><span><span leaf="">seed</span></span><span leaf="">,</span><span><span leaf="">sample</span></span><span leaf="">,</span><span><span leaf="">ranking_score</span></span><span leaf=""><br></span><span leaf="">1,0,0</span><span><span leaf="">.6277882312190337</span></span><span leaf=""><br></span><span leaf="">1,1,0</span><span><span leaf="">.6351682539574052</span></span><span leaf=""><br></span><span leaf="">1,2,0</span><span><span leaf="">.6287604315641846</span></span><span leaf=""><br></span><span leaf="">1,3,0</span><span><span leaf="">.6281894589304114</span></span><span leaf=""><br></span><span leaf="">1,4,0</span><span><span leaf="">.6690602222555568</span></span><span leaf=""><br></span></code></pre><h4><span><span leaf="">使用pymol可视化</span></span></h4><p><span leaf="">       选择seed-1_sample-4文件夹下的model.cif文件用pymol可视化展示预测效果。由于我输入的蛋白是个二聚体，预测结果显示如下</span></p><section nodeleaf=""><img data-src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/V6qOSNufyVR96gGgDEkgza0YcqWnRXia097Y3Sl7VbDFdgXDKjPRQgF6zWt0W50L7tMOSLBZMmz4HcwASbPHDmA/640?wx_fmt=jpeg&amp;from=appmsg" data-ratio="0.6336515513126492" data-s="300,640" data-type="jpeg" data-w="838" type="block" data-backw="578" data-backh="366" data-imgfileid="100002015" src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/V6qOSNufyVR96gGgDEkgza0YcqWnRXia097Y3Sl7VbDFdgXDKjPRQgF6zWt0W50L7tMOSLBZMmz4HcwASbPHDmA/640?wx_fmt=jpeg&amp;from=appmsg"></section><p><span leaf=""><br></span></p><h3><span><span leaf="">后记</span></span></h3><p><span leaf="">       如果通过docker运行alphafold3报错（如找不到文件或路径），可以试图输入如下命令进入docker虚拟空间的bash，再通过shell终端查看是哪些环境可能存在问题，如果要批量预测蛋白，可以制作多个.json格式的文件统一放置于一个输入文件夹，就能完成数据的批量预测。后续我将考虑如何利用Alphafold3完成蛋白和其他生物分子互作动力学分析。</span></p><pre><code><span leaf="">docker run -it \</span><span leaf=""><br></span><span leaf="">--volume ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/</span><span><span leaf="">af_input:</span></span><span leaf="">/root/af_input \</span><span leaf=""><br></span><span leaf="">--volume ~</span><span><span leaf="">/home/software</span></span><span leaf="">-test/AF3-test/</span><span><span leaf="">af_output:</span></span><span leaf="">/root/af_output \</span><span leaf=""><br></span><span leaf="">--volume ~</span><span><span leaf="">/home/software</span></span><span><span leaf="">/alphafold3/models</span></span><span><span leaf="">:/root/models</span></span><span leaf=""> \</span><span leaf=""><br></span><span leaf="">--volume ~</span><span><span leaf="">/home/software</span></span><span><span leaf="">/alphafold3/database</span></span><span><span leaf="">:/root/public_databases</span></span><span leaf=""> \</span><span leaf=""><br></span><span><span leaf="">#使用2个GPU完成预测结构</span></span><span leaf=""><br></span><span leaf="">--gpus </span><span><span leaf="">2</span></span><span leaf=""> \</span><span leaf=""><br></span><span><span leaf="">#调用docker空间中的alphafold3</span></span><span leaf=""><br></span><span leaf="">alphafold3 \</span><span leaf=""><br></span><span leaf="">bash</span><span leaf=""><br></span></code></pre><h3><span><span leaf="">往期精彩</span></span></h3><p><span leaf=""><a href="https://mp.weixin.qq.com/s?__biz=MzU3MTc2NDI4Mw==&amp;mid=2247485164&amp;idx=1&amp;sn=b8e234e2b72e942fbde59a5980637494&amp;scene=21#wechat_redirect" textvalue="生物大分子结构及其互作预测的里程碑：从Alphafold2到Alphafold3的革新" data-itemshowtype="0" target="_blank" linktype="text" data-linktype="2">生物大分子结构及其互作预测的里程碑：从Alphafold2到Alphafold3的革新</a></span></p><p><span leaf=""><a href="https://mp.weixin.qq.com/s?__biz=MzU3MTc2NDI4Mw==&amp;mid=2247485654&amp;idx=1&amp;sn=2e4b20e9e1072f7a538fecd44dfe6f91&amp;scene=21#wechat_redirect" textvalue="Alphafold3源代码已完全公开（附本地安装教程）" data-itemshowtype="0" target="_blank" linktype="text" data-linktype="2">Alphafold3源代码已完全公开（附本地安装教程）</a></span></p><p><span leaf=""><a href="https://mp.weixin.qq.com/s?__biz=MzU3MTc2NDI4Mw==&amp;mid=2247485654&amp;idx=2&amp;sn=e43d2d8f6650d554d57a55cd396b6db1&amp;scene=21#wechat_redirect" textvalue="拿走不谢！Alphafold3数据库已打包百度网盘（文末领取链接）" data-itemshowtype="0" target="_blank" linktype="text" data-linktype="2">拿走不谢！Alphafold3数据库已打包百度网盘（文末领取链接）</a></span></p><p><span leaf=""><a href="https://mp.weixin.qq.com/s?__biz=MzU3MTc2NDI4Mw==&amp;mid=2247485654&amp;idx=3&amp;sn=b8c9fbe5a60a303cb835e13fe473d049&amp;scene=21#wechat_redirect" textvalue="申请Alphafold3模型参数" data-itemshowtype="0" target="_blank" linktype="text" data-linktype="2">申请Alphafold3模型参数</a></span></p><p><span leaf=""><a href="https://mp.weixin.qq.com/s?__biz=MzU3MTc2NDI4Mw==&amp;mid=2247485652&amp;idx=1&amp;sn=359bd78fa5936f62ac387c406ac53460&amp;scene=21#wechat_redirect" textvalue="获批使用Alphafold3模型参数" data-itemshowtype="0" target="_blank" linktype="text" data-linktype="2">获批使用Alphafold3模型参数</a></span></p></section><section><span leaf=""><br></span></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/s7vLsb4q0KYcbL8fiNEZjQ",target="_blank" rel="noopener noreferrer">原文链接</a>
