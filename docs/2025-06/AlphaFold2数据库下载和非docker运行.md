---
title: "AlphaFold2数据库下载和非docker运行"
date: 2025-06-10T22:47:38Z
draft: ["false"]
tags: [
  "fetched",
  "东林的扯淡小屋"
]
categories: ["Acdemic"]
---
AlphaFold2数据库下载和非docker运行 by 东林的扯淡小屋
------
<div><section><ul><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="bash"><code><span leaf=""><span>#!/bin/bash</span></span></code><code><span leaf=""><span># AlphaFold2 Data Download Script - Direct Execution Version</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 1. First set variables (modify these as needed)</span></span></code><code><span leaf="">DOWNLOAD_DIR=<span>"/path/to/alphafold_data"</span>  <span># Change this to your desired download location</span></span></code><code><span leaf="">DOWNLOAD_MODE=<span>"full_dbs"</span>  <span># or "reduced_dbs" for smaller dataset</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 2. Create directory structure</span></span></code><code><span leaf=""><span>mkdir</span> -p <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>"</span></span></code><code><span leaf=""><span>mkdir</span> -p \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/params"</span> \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/mgnify"</span> \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb70"</span> \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_mmcif/data_dir"</span> \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_mmcif/mmcif_files"</span> \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniref30"</span> \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniref90"</span> \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot"</span> \</span></code><code><span leaf="">  <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_seqres"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 3. Download AlphaFold parameters</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/params"</span> <span>"https://storage.googleapis.com/alphafold/alphafold_params_2022-12-06.tar"</span></span></code><code><span leaf="">tar -xf <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/params/alphafold_params_2022-12-06.tar"</span> -C <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/params"</span></span></code><code><span leaf=""><span>rm</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/params/alphafold_params_2022-12-06.tar"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 4. Download databases based on selected mode</span></span></code><code><span leaf=""><span>if</span> [ <span>"</span><span><span>$DOWNLOAD_MODE</span></span><span>"</span> = <span>"full_dbs"</span> ]; <span>then</span></span></code><code><span leaf="">    <span># Full BFD database</span></span></code><code><span leaf="">    <span>mkdir</span> -p <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/bfd"</span></span></code><code><span leaf="">    wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/bfd"</span> <span>"https://storage.googleapis.com/alphafold-databases/casp14_versions/bfd_metaclust_clu_complete_id30_c90_final_seq.sorted_opt.tar.gz"</span></span></code><code><span leaf="">    tar -xf <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/bfd/bfd_metaclust_clu_complete_id30_c90_final_seq.sorted_opt.tar.gz"</span> -C <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/bfd"</span></span></code><code><span leaf="">    <span>rm</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/bfd/bfd_metaclust_clu_complete_id30_c90_final_seq.sorted_opt.tar.gz"</span></span></code><code><span leaf=""><span>else</span></span></code><code><span leaf="">    <span># Reduced BFD database</span></span></code><code><span leaf="">    <span>mkdir</span> -p <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/small_bfd"</span></span></code><code><span leaf="">    wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/small_bfd"</span> <span>"https://storage.googleapis.com/alphafold-databases/reduced_dbs/bfd-first_non_consensus_sequences.fasta.gz"</span></span></code><code><span leaf="">    gunzip <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/small_bfd/bfd-first_non_consensus_sequences.fasta.gz"</span></span></code><code><span leaf=""><span>fi</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 5. Download MGnify database</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/mgnify"</span> <span>"https://storage.googleapis.com/alphafold-databases/v2.3/mgy_clusters_2022_05.fa.gz"</span></span></code><code><span leaf="">gunzip <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/mgnify/mgy_clusters_2022_05.fa.gz"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 6. Download PDB70 database</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb70"</span> <span>"http://wwwuser.gwdg.de/~compbiol/data/hhsuite/databases/hhsuite_dbs/old-releases/pdb70_from_mmcif_200401.tar.gz"</span></span></code><code><span leaf="">tar -xf <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb70/pdb70_from_mmcif_200401.tar.gz"</span> -C <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb70"</span></span></code><code><span leaf=""><span>rm</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb70/pdb70_from_mmcif_200401.tar.gz"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 7. Download PDB obsolete data</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_mmcif"</span> <span>"ftp://ftp.wwpdb.org/pub/pdb/data/status/obsolete.dat"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 8. Download PDB mmCIF files</span></span></code><code><span leaf="">rsync -rlpt -v -z --delete --port=33444 rsync.rcsb.org::ftp_data/structures/divided/mmCIF/ <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_mmcif/data_dir"</span></span></code><code><span leaf="">find <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_mmcif/data_dir"</span> -name <span>"*.gz"</span> -<span>exec</span> gunzip {} +</span></code><code><span leaf="">find <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_mmcif/data_dir"</span> -<span>type</span> f -name <span>"*.cif"</span> -<span>exec</span> <span>mv</span> {} <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_mmcif/mmcif_files"</span> \;</span></code><code><span leaf="">find <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_mmcif/data_dir"</span> -<span>type</span> d -empty -delete</span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 9. Download UniRef30</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniref30"</span> <span>"https://storage.googleapis.com/alphafold-databases/v2.3/UniRef30_2021_03.tar.gz"</span></span></code><code><span leaf="">tar -xf <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniref30/UniRef30_2021_03.tar.gz"</span> -C <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniref30"</span></span></code><code><span leaf=""><span>rm</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniref30/UniRef30_2021_03.tar.gz"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 10. Download UniRef90</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniref90"</span> <span>"ftp://ftp.uniprot.org/pub/databases/uniprot/uniref/uniref90/uniref90.fasta.gz"</span></span></code><code><span leaf="">gunzip <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniref90/uniref90.fasta.gz"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 11. Download UniProt (TrEMBL + Swiss-Prot)</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot"</span> <span>"ftp://ftp.ebi.ac.uk/pub/databases/uniprot/current_release/knowledgebase/complete/uniprot_trembl.fasta.gz"</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot"</span> <span>"ftp://ftp.ebi.ac.uk/pub/databases/uniprot/current_release/knowledgebase/complete/uniprot_sprot.fasta.gz"</span></span></code><code><span leaf="">gunzip <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot/uniprot_trembl.fasta.gz"</span></span></code><code><span leaf="">gunzip <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot/uniprot_sprot.fasta.gz"</span></span></code><code><span leaf=""><span>cat</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot/uniprot_sprot.fasta"</span> &gt;&gt; <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot/uniprot_trembl.fasta"</span></span></code><code><span leaf=""><span>mv</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot/uniprot_trembl.fasta"</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot/uniprot.fasta"</span></span></code><code><span leaf=""><span>rm</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/uniprot/uniprot_sprot.fasta"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span># 12. Download PDB seqres</span></span></code><code><span leaf="">wget -P <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_seqres"</span> <span>"ftp://ftp.wwpdb.org/pub/pdb/derived_data/pdb_seqres.txt"</span></span></code><code><span leaf="">grep -A1 <span>'&gt;.* mol:protein'</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_seqres/pdb_seqres.txt"</span> &gt; <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_seqres/pdb_seqres_filtered.txt"</span></span></code><code><span leaf=""><span>mv</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_seqres/pdb_seqres_filtered.txt"</span> <span>"</span><span><span>$DOWNLOAD_DIR</span></span><span>/pdb_seqres/pdb_seqres.txt"</span></span></code><code><span leaf=""><br></span></code><code><span leaf=""><span>echo</span> <span>"AlphaFold2 data download complete!"</span></span></code></pre></section><section><span leaf=""><br></span></section><section><ul><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="bash"><code><span leaf="">conda create --name alphafold python==3.8</span></code><code><span leaf="">conda activate alphafold</span></code><code><span leaf="">conda install -y -c conda-forge openmm==7.5.1 cudatoolkit==11.2.2 pdbfixer</span></code><code><span leaf="">conda install -y -c bioconda hmmer hhsuite==3.3.0 kalign2</span></code><code><span leaf="">pip install absl-py</span></code><code><span leaf="">pip install dm-tree</span></code><code><span leaf="">pip install Bio</span></code><code><span leaf="">wget https://github.com/deepmind/alphafold/archive/refs/tags/v2.3.1.tar.gz &amp;&amp; tar -xzf v2.3.1.tar.gz &amp;&amp; <span>export</span> alphafold_path=<span>"</span><span><span>$(pwd)</span></span><span>/alphafold-2.3.1"</span></span></code><code><span leaf="">wget -q -P <span>$alphafold_path</span>/alphafold/common/ https://git.scicore.unibas.ch/schwede/openstructure/-/raw/7102c63615b64735c4941278d92b554ec94415f8/modules/mol/alg/src/stereo_chemical_props.txt</span></code><code><span leaf=""><span># $alphafold_path variable is set to the alphafold git repo directory (absolute path)</span></span></code><code><span leaf=""><span>cd</span> ~/anaconda3/envs/alphafold/lib/python3.8/site-packages/ &amp;&amp; patch -p0 &lt; <span>$alphafold_path</span>/docker/openmm.patch</span></code><code><span leaf=""><span># or</span></span></code><code><span leaf=""><span>cd</span> ~/miniconda3/envs/alphafold/lib/python3.8/site-packages/ &amp;&amp; patch -p0 &lt; <span>$alphafold_path</span>/docker/openmm.patch</span></code><code><span leaf="">bash /data/yudonglin/software/alphafold-2.3.1/scripts/download_db.sh -d /data6/yudonglin/alphafold -m reduced_dbs</span></code><code><span leaf=""><span># OR for CPU only run</span></span></code><code><span leaf="">bash run_alphafold.sh -d /data6/yudonglin/alphafold -o ./dummy_test/ -f ./example/query.fasta -t 2022-01-01  -g False</span></code></pre></section><section><span leaf=""><br></span></section><section nodeleaf=""><img data-imgfileid="100029154" data-ratio="0.31851851851851853" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/kZ1wdgAscBpDe3KEt5oriaR2cusKXBZk437cQ8bbr6KbOxTXMJHPQuFu2f8icSicdYtS6Uk9mhm2gdnUxtpzcdk8Q/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" type="block" src="https://mmbiz.qpic.cn/mmbiz_png/kZ1wdgAscBpDe3KEt5oriaR2cusKXBZk437cQ8bbr6KbOxTXMJHPQuFu2f8icSicdYtS6Uk9mhm2gdnUxtpzcdk8Q/640?wx_fmt=png&amp;from=appmsg"></section><section><span leaf=""><br></span></section><section><span leaf="">参考链接：</span><span leaf="">https://github.com/kalininalab/alphafold_non_docker/tree/main?tab=readme-ov-file</span></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/_szbQ-9xS0WX9XAAW6ZMQg",target="_blank" rel="noopener noreferrer">原文链接</a>
