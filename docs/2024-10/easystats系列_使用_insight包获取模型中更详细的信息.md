---
title: "easystats系列：使用 insight包获取模型中更详细的信息"
date: 2024-10-19T16:03:48Z
draft: ["false"]
tags: [
  "fetched",
  "R 学习践行者"
]
categories: ["Acdemic"]
---
easystats系列：使用 insight包获取模型中更详细的信息 by R 学习践行者
------
<div><p>    在拟合任何统计模型时，除了系数估计和一般模型拟合统计之外，还会同时计算和存储许多有用的信息；尽管存在一些通用函数来获取模型信息和数据，但许多特定于包的建模函数没有提供这样的方法来允许用户访问这些有价值的信息。</p><p>    insight 包填补了这个重要的空白，提供了一套函数来支持几乎所有模型。insight包的目标是提供工具，以便轻松、直观且一致地访问模型对象中的信息，这些工具帮助几乎任何领域的应用研究人员进行拟合、诊断和呈现统计模型，通过一致的语法和输出简化访问许多模型对象的各个方面。</p><p>    这个包围绕两个关键的前缀：get_* 和 find_。get_ 前缀用于提取与模型特定对象（例如参数或变量）相关的值（或数据），而 find_* 前缀则列出模型特定对象（例如先验或预测变量）；这些都是强大的函数族，使用起来灵活自如，无论是在较高的描述性层面（find_）还是在更狭窄的统计检查和报告层面（get_）。</p><p><img data-imgfileid="100003014" data-ratio="0.5666666666666667" data-type="png" data-w="600" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50ky9g9pTnnLEVYX513Hdtmic8x1OM6BoibZY1ThIBvQGgXszGJiaGqriaCbMFxCx78YGqNMdy6xHNegpw/640?wx_fmt=png&amp;from=appmsg" src="https://mmbiz.qpic.cn/sz_mmbiz_png/IGjxEGEQ50ky9g9pTnnLEVYX513Hdtmic8x1OM6BoibZY1ThIBvQGgXszGJiaGqriaCbMFxCx78YGqNMdy6xHNegpw/640?wx_fmt=png&amp;from=appmsg"></p><p>    insight 包包含 16 个核心函数，在所有情况下，用户至少需要提供模型拟合对象的名称；在一些函数中，还有额外的参数，可以更有针对性地返回模型信息。</p><p><br></p><p>下面使用示例展示每个函数的功能：</p><pre><code><span>#install.packages("insight")</span><br><span>library</span>(<span>"insight"</span>)</code></pre><ol><li><p>get_data()获取模型使用的数据集</p></li></ol><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>get_data(model)</code></pre><pre><code>                       mpg    wt  hp<br>  Mazda RX4           21.0 2.620 110<br>  Mazda RX4 Wag       21.0 2.875 110<br>  Datsun 710          22.8 2.320  93<br>  Hornet 4 Drive      21.4 3.215 110<br>  Hornet Sportabout   18.7 3.440 175<br>  Valiant             18.1 3.460 105<br>  Duster 360          14.3 3.570 245<br>  Merc 240D           24.4 3.190  62<br>  Merc 230            22.8 3.150  95<br>  Merc 280            19.2 3.440 123<br>  Merc 280C           17.8 3.440 123<br>  Merc 450SE          16.4 4.070 180<br>  Merc 450SL          17.3 3.730 180<br>  Merc 450SLC         15.2 3.780 180<br>  Cadillac Fleetwood  10.4 5.250 205<br>  Lincoln Continental 10.4 5.424 215<br>  Chrysler Imperial   14.7 5.345 230<br>  Fiat 128            32.4 2.200  66<br>  Honda Civic         30.4 1.615  52<br>  Toyota Corolla      33.9 1.835  65<br>  Toyota Corona       21.5 2.465  97<br>  Dodge Challenger    15.5 3.520 150<br>  AMC Javelin         15.2 3.435 150<br>  Camaro Z28          13.3 3.840 245<br>  Pontiac Firebird    19.2 3.845 175<br>  Fiat X1-9           27.3 1.935  66<br>  Porsche 914-2       26.0 2.140  91<br>  Lotus Europa        30.4 1.513 113<br>  Ford Pantera L      15.8 3.170 264<br>  Ferrari Dino        19.7 2.770 175<br>  Maserati Bora       15.0 3.570 335<br>  Volvo 142E          21.4 2.780 109</code></pre><ol start="2"><li><p>get_priors()提取模型的先验分布（适用于贝叶斯模型）</p></li></ol><pre><code><span>library</span>(brms)<br>model &lt;- brm(mpg ~ wt + hp, data = mtcars, <br>             prior = c(set_prior(<span>"normal(0,5)"</span>, class = <span>"b"</span>)))</code></pre><pre><code>  <br>  SAMPLING FOR MODEL 'anon_model' NOW (CHAIN 1).<br>  Chain 1: <br>  Chain 1: Gradient evaluation took 3.3e-05 seconds<br>  Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.33 seconds.<br>  Chain 1: Adjust your expectations accordingly!<br>  Chain 1: <br>  Chain 1: <br>  Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup)<br>  Chain 1: Iteration:  200 / 2000 [ 10%]  (Warmup)<br>  Chain 1: Iteration:  400 / 2000 [ 20%]  (Warmup)<br>  Chain 1: Iteration:  600 / 2000 [ 30%]  (Warmup)<br>  Chain 1: Iteration:  800 / 2000 [ 40%]  (Warmup)<br>  Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)<br>  Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)<br>  Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)<br>  Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)<br>  Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)<br>  Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)<br>  Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)<br>  Chain 1: <br>  Chain 1:  Elapsed Time: 0.059 seconds (Warm-up)<br>  Chain 1:                0.023 seconds (Sampling)<br>  Chain 1:                0.082 seconds (Total)<br>  Chain 1: <br>  <br>  SAMPLING FOR MODEL 'anon_model' NOW (CHAIN 2).<br>  Chain 2: <br>  Chain 2: Gradient evaluation took 7e-06 seconds<br>  Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.07 seconds.<br>  Chain 2: Adjust your expectations accordingly!<br>  Chain 2: <br>  Chain 2: <br>  Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup)<br>  Chain 2: Iteration:  200 / 2000 [ 10%]  (Warmup)<br>  Chain 2: Iteration:  400 / 2000 [ 20%]  (Warmup)<br>  Chain 2: Iteration:  600 / 2000 [ 30%]  (Warmup)<br>  Chain 2: Iteration:  800 / 2000 [ 40%]  (Warmup)<br>  Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)<br>  Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)<br>  Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)<br>  Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)<br>  Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)<br>  Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)<br>  Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)<br>  Chain 2: <br>  Chain 2:  Elapsed Time: 0.063 seconds (Warm-up)<br>  Chain 2:                0.021 seconds (Sampling)<br>  Chain 2:                0.084 seconds (Total)<br>  Chain 2: <br>  <br>  SAMPLING FOR MODEL 'anon_model' NOW (CHAIN 3).<br>  Chain 3: <br>  Chain 3: Gradient evaluation took 6e-06 seconds<br>  Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.06 seconds.<br>  Chain 3: Adjust your expectations accordingly!<br>  Chain 3: <br>  Chain 3: <br>  Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup)<br>  Chain 3: Iteration:  200 / 2000 [ 10%]  (Warmup)<br>  Chain 3: Iteration:  400 / 2000 [ 20%]  (Warmup)<br>  Chain 3: Iteration:  600 / 2000 [ 30%]  (Warmup)<br>  Chain 3: Iteration:  800 / 2000 [ 40%]  (Warmup)<br>  Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)<br>  Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)<br>  Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)<br>  Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)<br>  Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)<br>  Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)<br>  Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)<br>  Chain 3: <br>  Chain 3:  Elapsed Time: 0.072 seconds (Warm-up)<br>  Chain 3:                0.021 seconds (Sampling)<br>  Chain 3:                0.093 seconds (Total)<br>  Chain 3: <br>  <br>  SAMPLING FOR MODEL 'anon_model' NOW (CHAIN 4).<br>  Chain 4: <br>  Chain 4: Gradient evaluation took 5e-06 seconds<br>  Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.05 seconds.<br>  Chain 4: Adjust your expectations accordingly!<br>  Chain 4: <br>  Chain 4: <br>  Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup)<br>  Chain 4: Iteration:  200 / 2000 [ 10%]  (Warmup)<br>  Chain 4: Iteration:  400 / 2000 [ 20%]  (Warmup)<br>  Chain 4: Iteration:  600 / 2000 [ 30%]  (Warmup)<br>  Chain 4: Iteration:  800 / 2000 [ 40%]  (Warmup)<br>  Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup)<br>  Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling)<br>  Chain 4: Iteration: 1200 / 2000 [ 60%]  (Sampling)<br>  Chain 4: Iteration: 1400 / 2000 [ 70%]  (Sampling)<br>  Chain 4: Iteration: 1600 / 2000 [ 80%]  (Sampling)<br>  Chain 4: Iteration: 1800 / 2000 [ 90%]  (Sampling)<br>  Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling)<br>  Chain 4: <br>  Chain 4:  Elapsed Time: 0.057 seconds (Warm-up)<br>  Chain 4:                0.021 seconds (Sampling)<br>  Chain 4:                0.078 seconds (Total)<br>  Chain 4:</code></pre><pre><code>get_priors(model)</code></pre><pre><code>      Parameter Distribution Location Scale df<br>  1 b_Intercept    student_t     19.2   5.4  3<br>  2        b_wt       normal      0.0   5.0 NA<br>  3        b_hp       normal      0.0   5.0 NA<br>  4       sigma    student_t      0.0   5.4  3</code></pre><ol start="3"><li><p>get_variance()提取模型的方差信息，特别适用于混合效应模型</p></li></ol><pre><code><span>library</span>(lme4)<br>model &lt;- lmer(mpg ~ wt + (<span>1</span> | cyl), data = mtcars)<br>get_variance(model)</code></pre><pre><code>  $var.fixed<br>  [1] 11.84575<br>  <br>  $var.random<br>  [1] 8.083893<br>  <br>  $var.residual<br>  [1] 6.551628<br>  <br>  $var.distribution<br>  [1] 6.551628<br>  <br>  $var.dispersion<br>  [1] 0<br>  <br>  $var.intercept<br>       cyl <br>  8.083893</code></pre><ol start="4"><li><p>get_parameters()获取模型的参数估计（例如回归系数）</p></li></ol><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>get_parameters(model)</code></pre><pre><code>      Parameter    Estimate<br>  1 (Intercept) 37.22727012<br>  2          wt -3.87783074<br>  3          hp -0.03177295</code></pre><ol start="5"><li><p>get_predictors()获取模型的预测变量</p></li></ol><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>get_predictors(model)</code></pre><pre><code>                         wt  hp<br>  Mazda RX4           2.620 110<br>  Mazda RX4 Wag       2.875 110<br>  Datsun 710          2.320  93<br>  Hornet 4 Drive      3.215 110<br>  Hornet Sportabout   3.440 175<br>  Valiant             3.460 105<br>  Duster 360          3.570 245<br>  Merc 240D           3.190  62<br>  Merc 230            3.150  95<br>  Merc 280            3.440 123<br>  Merc 280C           3.440 123<br>  Merc 450SE          4.070 180<br>  Merc 450SL          3.730 180<br>  Merc 450SLC         3.780 180<br>  Cadillac Fleetwood  5.250 205<br>  Lincoln Continental 5.424 215<br>  Chrysler Imperial   5.345 230<br>  Fiat 128            2.200  66<br>  Honda Civic         1.615  52<br>  Toyota Corolla      1.835  65<br>  Toyota Corona       2.465  97<br>  Dodge Challenger    3.520 150<br>  AMC Javelin         3.435 150<br>  Camaro Z28          3.840 245<br>  Pontiac Firebird    3.845 175<br>  Fiat X1-9           1.935  66<br>  Porsche 914-2       2.140  91<br>  Lotus Europa        1.513 113<br>  Ford Pantera L      3.170 264<br>  Ferrari Dino        2.770 175<br>  Maserati Bora       3.570 335<br>  Volvo 142E          2.780 109</code></pre><ol start="6"><li><p>get_random()提取混合效应模型中的随机效应</p></li></ol><pre><code>model &lt;- lmer(mpg ~ wt + (<span>1</span> | cyl), data = mtcars)<br>get_random(model)</code></pre><pre><code>                      cyl<br>  Mazda RX4             6<br>  Mazda RX4 Wag         6<br>  Datsun 710            4<br>  Hornet 4 Drive        6<br>  Hornet Sportabout     8<br>  Valiant               6<br>  Duster 360            8<br>  Merc 240D             4<br>  Merc 230              4<br>  Merc 280              6<br>  Merc 280C             6<br>  Merc 450SE            8<br>  Merc 450SL            8<br>  Merc 450SLC           8<br>  Cadillac Fleetwood    8<br>  Lincoln Continental   8<br>  Chrysler Imperial     8<br>  Fiat 128              4<br>  Honda Civic           4<br>  Toyota Corolla        4<br>  Toyota Corona         4<br>  Dodge Challenger      8<br>  AMC Javelin           8<br>  Camaro Z28            8<br>  Pontiac Firebird      8<br>  Fiat X1-9             4<br>  Porsche 914-2         4<br>  Lotus Europa          4<br>  Ford Pantera L        8<br>  Ferrari Dino          6<br>  Maserati Bora         8<br>  Volvo 142E            4</code></pre><ol start="7"><li><p>get_response()提取模型的响应变量</p></li></ol><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>get_response(model)</code></pre><pre><code>   [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4<br>  [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7<br>  [31] 15.0 21.4</code></pre><ol start="8"><li><p>find_algorithm()识别和返回用于拟合模型的算法</p></li></ol><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>find_algorithm(model)</code></pre><pre><code>  $algorithm<br>  [1] "OLS"</code></pre><ol start="9"><li><p>find_formula()获取模型的公式</p></li></ol><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>find_formula(model)</code></pre><pre><code>  $conditional<br>  mpg ~ wt + hp<br>  <br>  attr(,"class")<br>  [1] "insight_formula" "list"</code></pre><p><span>10.find_variables()列出模型中的变量</span></p><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>find_variables(model)</code></pre><pre><code>  $response<br>  [1] "mpg"<br>  <br>  $conditional<br>  [1] "wt" "hp"</code></pre><p><span>11.find_terms()列出模型中的术语</span></p><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>find_terms(model)</code></pre><pre><code>  $response<br>  [1] "mpg"<br>  <br>  $conditional<br>  [1] "wt" "hp"</code></pre><p><span>12.find_parameters()列出模型的参数</span></p><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>find_parameters(model)</code></pre><pre><code>  $conditional<br>  [1] "(Intercept)" "wt"          "hp"</code></pre><p><span>13.find_predictors()列出模型的预测变量</span></p><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>find_predictors(model)</code></pre><pre><code>  $conditional<br>  [1] "wt" "hp"</code></pre><p><span>14.find_random()列出混合效应模型中的随机效应</span></p><pre><code>model &lt;- lmer(mpg ~ wt + (<span>1</span> | cyl), data = mtcars)<br>find_random(model)</code></pre><pre><code>  $random<br>  [1] "cyl"</code></pre><p><span>15.find_response()列出模型的响应变量</span></p><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>find_response(model)</code></pre><pre><code>  [1] "mpg"</code></pre><p><span>16.model_info()提供关于模型对象的全面概述</span></p><p>    返回模型的详细信息，如模型族、链接函数、拟合方法等</p><pre><code>model &lt;- lm(mpg ~ wt + hp, data = mtcars)<br>model_info(model)</code></pre><pre><code>  $is_binomial<br>  [1] FALSE<br>  <br>  $is_bernoulli<br>  [1] FALSE<br>  <br>  $is_count<br>  [1] FALSE<br>  <br>  $is_poisson<br>  [1] FALSE<br>  <br>  $is_negbin<br>  [1] FALSE<br>  <br>  $is_beta<br>  [1] FALSE<br>  <br>  $is_betabinomial<br>  [1] FALSE<br>  <br>  $is_orderedbeta<br>  [1] FALSE<br>  <br>  $is_dirichlet<br>  [1] FALSE<br>  <br>  $is_exponential<br>  [1] FALSE<br>  <br>  $is_logit<br>  [1] FALSE<br>  <br>  $is_probit<br>  [1] FALSE<br>  <br>  $is_censored<br>  [1] FALSE<br>  <br>  $is_truncated<br>  [1] FALSE<br>  <br>  $is_survival<br>  [1] FALSE<br>  <br>  $is_linear<br>  [1] TRUE<br>  <br>  $is_tweedie<br>  [1] FALSE<br>  <br>  $is_zeroinf<br>  [1] FALSE<br>  <br>  $is_zero_inflated<br>  [1] FALSE<br>  <br>  $is_dispersion<br>  [1] FALSE<br>  <br>  $is_hurdle<br>  [1] FALSE<br>  <br>  $is_ordinal<br>  [1] FALSE<br>  <br>  $is_cumulative<br>  [1] FALSE<br>  <br>  $is_multinomial<br>  [1] FALSE<br>  <br>  $is_categorical<br>  [1] FALSE<br>  <br>  $is_mixed<br>  [1] FALSE<br>  <br>  $is_multivariate<br>  [1] FALSE<br>  <br>  $is_trial<br>  [1] FALSE<br>  <br>  $is_bayesian<br>  [1] FALSE<br>  <br>  $is_gam<br>  [1] FALSE<br>  <br>  $is_anova<br>  [1] FALSE<br>  <br>  $is_timeseries<br>  [1] FALSE<br>  <br>  $is_ttest<br>  [1] FALSE<br>  <br>  $is_correlation<br>  [1] FALSE<br>  <br>  $is_onewaytest<br>  [1] FALSE<br>  <br>  $is_chi2test<br>  [1] FALSE<br>  <br>  $is_ranktest<br>  [1] FALSE<br>  <br>  $is_levenetest<br>  [1] FALSE<br>  <br>  $is_variancetest<br>  [1] FALSE<br>  <br>  $is_xtab<br>  [1] FALSE<br>  <br>  $is_proptest<br>  [1] FALSE<br>  <br>  $is_binomtest<br>  [1] FALSE<br>  <br>  $is_ftest<br>  [1] FALSE<br>  <br>  $is_meta<br>  [1] FALSE<br>  <br>  $link_function<br>  [1] "identity"<br>  <br>  $family<br>  [1] "gaussian"<br>  <br>  $n_obs<br>  [1] 32<br>  <br>  $n_grouplevels<br>  NULL</code></pre><p>    总之，insight 包旨在为 R 中的模型提供一致且直观的访问接口，帮助用户获取、探索和解释几乎任何类型的模型对象。它通过统一的语法和输出，使得用户能够轻松访问模型的重要信息。insight 包涵盖了模型的各个方面，包括数据、参数、预测变量、随机效应和公式等。</p><p>    insight 包的功能可以归纳为以下几个关键点：</p><p>1）提取模型信息：通过函数获取模型的数据、参数、方差、公式等。</p><p>2）列出模型组件：列出模型中的变量、预测变量、随机效应等对象。</p><p>3）诊断模型：获取模型的相关诊断信息，如拟合算法、模型误差等。</p><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/BFQPrEj2GHqphw7zKBgBTA",target="_blank" rel="noopener noreferrer">原文链接</a>
